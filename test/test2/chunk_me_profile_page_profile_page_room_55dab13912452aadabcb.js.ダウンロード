(window.webpackJsonp=window.webpackJsonp||[]).push([[17,51],{LPRd:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),i=n("vOnD"),o=n("NXoE"),c=i.default.button.withConfig({componentId:"sc-1ljarm0-0"})(["width:50px;height:50px;border-radius:2px;display:flex;flex-direction:column;align-items:center;justify-content:center;border-width:1px;border-style:solid;cursor:pointer;> .label{font-size:12px;line-height:1.5;}&:hover{> .icon{color:#20bef3;}> .label{color:#20bef3;}}",""],function(e){e=e.theme.darkTheme;return Object(i.css)(["background-color:",";border-color:",";&:hover{background-color:",";}> .icon{color:",";}> .label{color:",";}"],e?"rgb(46, 48, 51)":"rgb(255, 255, 255)",e?"rgb(65, 68, 72)":"rgb(239, 239, 239)",e?"#2b4449":"#dff6f9",e?"rgba(255, 255, 255, 0.5)":"rgb(205, 205, 205)",e?"rgba(255, 255, 255, 0.5)":"rgb(205, 205, 205)")});t.a=function(e){return a.a.createElement(c,e,a.a.createElement(o.b,{className:"icon",name:o.b.NAME.ARROW_TOP_FILL,size:18}),a.a.createElement("div",{className:"label"},"TOP"))}},fND3:function(e,t,n){"use strict";function _(e){var t=e.roomId,a=e.hostData,n=e.onDelete,r=e.followStatus,i=e.updateListBook,o=e.updatePostComment,c=Object(ee.a)().darkTheme?le:se,s=a.id,l=Object(U.useRef)(1),u=Object(U.useState)(-1),d=(I=K()(u,2))[0],p=I[1],f=Object(U.useState)(!1),m=(S=K()(f,2))[0],b=S[1],v=Object(U.useState)([]),g=(z=K()(v,2))[0],h=z[1],_=Object(U.useState)(a.nearest_comment||[]),x=(N=K()(_,2))[0],k=N[1],w=Object(U.useState)([]),O=(A=K()(w,2))[0],E=A[1],e=Object(U.useState)(a.comment_count),j=(u=K()(e,2))[0],y=u[1],I=Object(U.useState)(a.like_count),S=(f=K()(I,2))[0],T=f[1],v=Object(U.useState)(a.is_like),_=(z=K()(v,2))[0],C=z[1],N=Object(U.useState)(a.show_status),A=(w=K()(N,2))[0],R=w[1],e=Object(U.useCallback)(function(r){return ue(void 0,void 0,void 0,P.a.mark(function e(){var t,n;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Q.a.getState(),t=n.user){e.next=3;break}return e.abrupt("return",Q.a.dispatch(Object(ne.c)(!0)));case 3:return e.prev=3,e.next=6,Object(W.a)({content:r,id:s,type:"post"});case 6:(n=e.sent)&&0<Object.keys(n).length&&(n={id:n.new_comment_id,content:n.show_content,create_time:n.create_time_str,create_time_mills:n.create_time_mills,is_like:!1,like_count:0,user_id:t.user_id,user_grade:t.level,user_avatar_url:t.avatar,user_nickname:t.loginname},n=Array.of(n),k([].concat(M()(x),M()(n))),h([].concat(M()(g),M()(n))),y(j+1)),$.a.handleDataCount({lt:"pcclick",ct:"click",dt:"liveroom",et:"story",ft:"comment"}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),G.a.error(e.t0,{description:"直播间添加评论失败",report:!0}),V.d.error(e.t0.message);case 15:case"end":return e.stop()}},e,null,[[3,11]])}))},[s,x,g,j]),u=Object(U.useCallback)(function(r,a){return ue(void 0,void 0,void 0,P.a.mark(function e(){var t,n;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Q.a.getState(),n.user){e.next=3;break}return e.abrupt("return",Q.a.dispatch(Object(ne.c)(!0)));case 3:return e.prev=3,t=a?0:1,e.next=7,Object(W.o)({id:r,type:"post",isLike:t});case 7:n=e.sent,t=n.like_count,n=n.is_like,T(t),C(n),$.a.handleDataCount({lt:"pcclick",ct:"click",dt:"liveroom",et:"story",ft:"like"}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),G.a.error(e.t0,{description:"点赞失败",report:!0}),V.d.error(e.t0.message);case 19:case"end":return e.stop()}},e,null,[[3,15]])}))},[]),I=Object(U.useCallback)(function(){return ue(void 0,void 0,void 0,P.a.mark(function e(){var t;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Q.a.getState(),t.user){e.next=3;break}return e.abrupt("return",Q.a.dispatch(Object(ne.c)(!0)));case 3:return e.prev=3,e.next=6,Object(W.c)({id:s});case 6:n(s),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),G.a.error(e.t0,{description:"删除帖子失败",report:!0}),V.d.error(e.t0.message);case 13:case"end":return e.stop()}},e,null,[[3,9]])}))},[s,n]),f=Object(U.useCallback)(function(){return ue(void 0,void 0,void 0,P.a.mark(function e(){var t;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Q.a.getState(),t.user){e.next=3;break}return e.abrupt("return",Q.a.dispatch(Object(ne.c)(!0)));case 3:return e.prev=3,e.next=6,Object(W.n)({id:s});case 6:V.d.success(Object(B.f)("report_success")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),G.a.error(e.t0,{description:"举报帖子失败",report:!0}),V.d.error(e.t0.message);case 13:case"end":return e.stop()}},e,null,[[3,9]])}))},[s]),v=Object(U.useCallback)(function(n,r){return ue(void 0,void 0,void 0,P.a.mark(function e(){var t;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1<x.findIndex(function(e){return e.id===r}))return e.prev=2,e.next=5,Object(W.h)({postId:s,page:1,size:3*l.current});e.next=17;break;case 5:t=e.sent,t=t.comments,k(t?M()(t):[]),o({postId:a.id,comments:t||[]}),y(n),h([]),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),G.a.error(e.t0,{description:"直播间获取更多评论列表失败-1",report:!0}),V.d.error(e.t0.message);case 17:case"end":return e.stop()}},e,null,[[2,13]])}))},[s,x,a.id,o]),z=Object(U.useCallback)(function(){return ue(void 0,void 0,void 0,P.a.mark(function e(){var t,n;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(W.h)({postId:s,page:++l.current});case 3:n=e.sent,(t=n.comments)&&0<t.length&&(n=t.map(function(e){return{id:e.id,content:e.content,create_time:e.create_time_str,create_time_mills:e.create_time_mills,is_like:e.is_like,like_count:e.like_count,user_id:e.user_id,user_grade:e.user_grade,user_avatar_url:e.user_avatar_url,user_nickname:e.user_nickname,reply_count:e.reply_count,show_status:e.show_status}}),t=x.filter(function(t){return!g.find(function(e){return e.id===t.id})}),n=n.filter(function(t){return!g.find(function(e){return e.id===t.id})}),k(M()(new Set([].concat(M()(t),M()(n),M()(g)))))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),G.a.error(e.t0,{description:"直播间获取更多评论列表失败",report:!0}),V.d.error(e.t0.message);case 12:case"end":return e.stop()}},e,null,[[0,8]])}))},[s,x,g]),N=Object(U.useCallback)(function(e){return{trailerTitle:(null==e?void 0:e.trailer_title)||"",trailerPic:(null==e?void 0:e.trailer_banner)||"",trailerTime:(null==e?void 0:e.trailer_start_time)||0,bookStatus:(null==e?void 0:e.book_status)||0,trailerId:(null==e?void 0:e.trailer_id)||"",enable:(null==e?void 0:e.enable)||0,homeEnable:(null==e?void 0:e.home_enable)||0,liveType:(null==e?void 0:e.live_type)||0,trailerLabel:(null==e?void 0:e.trailer_label)||"",userId:(null==e?void 0:e.user_id)||0,createAt:(null==e?void 0:e.create_at)||""}},[]),D=Object(U.useCallback)(function(e){e=e.currentIndex;e&&(O.push(e),E(M()(O)))},[O]),w=Object(U.useCallback)(function(){b(!1)},[]),L=Object(U.useCallback)(function(e){m||b(!0),p(e)},[m]);return F.a.createElement(de,null,m&&F.a.createElement(te.a,{imgArr:a.image_url,currentIndex:d,closeAlbum:w}),F.a.createElement(X.b,{className:"avatar",size:40,src:Object(J.a)({url:a.user_avatar_url,styleQuery:{size:J.b.mini}})}),F.a.createElement(pe,null,F.a.createElement(fe,null,F.a.createElement(H.a,{level:a.user_grade}),F.a.createElement("div",{className:"author-name"},a.user_nickname)),F.a.createElement("div",{className:"publish-time"},Object(q.a)(a.create_time_mills)),"risky"===A?F.a.createElement(ce.a,{showPost:function(){R("displayed")},id:s}):F.a.createElement(F.a.Fragment,null,a.content&&F.a.createElement(me,null,a.content),a.image_url instanceof Array&&0<a.image_url.length?F.a.createElement(be,null,a.image_url.map(function(e,t){return F.a.createElement("div",{key:t,className:"host-status__post-img-box",onClick:function(){return L(t)},style:{backgroundImage:"url(".concat(O.includes(t)?c:e,")")}},O.includes(t)?null:F.a.createElement("img",{src:e,alt:"pic",onError:function(){return D({currentIndex:t})},className:"room_img"}))})):null,a.vote_detail&&F.a.createElement(Y.a,null,F.a.createElement(oe.a,{detail:a.vote_detail,postId:s})),a.trailer_detail&&F.a.createElement(Z.a,{detail:N(a.trailer_detail),roomId:t,followStatus:r,updateListBook:i}),F.a.createElement(ie.a,{likeUp:_,toggleLike:u,likeCount:S,commentCount:j,commentId:s,loginId:function(){var e=Q.a.getState().user;if(e)return e.user_id}(),roomId:t,userId:a.user_id,onDetele:I,onReport:f}),F.a.createElement(re.a,{submitComment:e}),0<x.length&&F.a.createElement(Y.a,null,F.a.createElement(ae.a,{roomId:t,count:j,commentList:x,updateCountAfterDelete:v,loadMoreComments:z})))))}var r=n("o0o1"),P=n.n(r),r=n("RIqP"),M=n.n(r),r=n("J4zp"),K=n.n(r),U=n("q1tI"),F=n.n(U),a=n("vOnD"),x=n("uuth"),W=n("LtoX"),G=n("4Qmz"),k=n("jxKE"),w=n("9T9G"),O=n("vMhd"),B=n("SUlE"),E=n("n+8t"),j=n("4DtP"),y=n("IdJ0"),I=n("EQxi"),r=n("Bfvj"),H=n("t3Xz"),J=n("2LK0"),X=n("Gt/x"),q=n("LYyr"),Q=n("y90O"),V=n("9UTw"),Y=n("bMKL"),Z=n("AjMH"),$=n("3IhF"),ee=n("iE/9"),te=n("CeIo"),ne=n("TrD6"),re=n("LfAP"),ae=n("tpxW"),ie=n("GfBc"),oe=n("3xFW"),ce=n("cynR"),se=n.p+"assets/file/ca7b46f40f91f96a757ac3dcfe7aa661.png",le=n.p+"assets/file/7e63ee3a6d9bc95e0c880ae38099019d.png",ue=function(e,o,c,s){return new(c=c||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},de=a.default.div.withConfig({componentId:"sc-15rxiev-0"})(["display:flex;border-radius:4px;padding:20px;margin-bottom:20px;> .avatar{margin-right:10px;flex-shrink:0;}",""],function(e){e=e.theme.darkTheme;return Object(a.css)(["background-color:",";"],e?"#2e3033":"rgba(252,252,252,1)")}),pe=a.default.div.withConfig({componentId:"sc-15rxiev-1"})(["flex:1;> .publish-time{margin:5px 0 10px 0;font-size:12px;color:var(--text-color-secondary);}"]),fe=a.default.div.withConfig({componentId:"sc-15rxiev-2"})(["display:flex;align-items:center;> .author-name{margin-left:5px;font-size:14px;","}"],r.a),me=a.default.div.withConfig({componentId:"sc-15rxiev-3"})([""," font-size:14px;margin-bottom:10px;word-break:break-all;word-wrap:break-word;white-space:pre-wrap;max-width:550px;line-height:20px;> .send-btn{background:#252b2c;}"],function(e){e=e.theme.darkTheme;return Object(a.css)(["color:",";"],e?"rgba(255, 255, 255, 0.9)":"#232323")}),be=a.default.div.withConfig({componentId:"sc-15rxiev-4"})(["display:flex;align-items:center;flex-wrap:wrap;max-width:500px;> .host-status__post-img-box{width:140px;height:140px;margin-bottom:10px;margin-right:10px;margin-top:10px;cursor:pointer;overflow:hidden;border:1px solid #ebebeb;border-radius:4px;background-repeat:no-repeat;background-size:cover;background-position:center;> img.room_img{display:none;width:130px;height:130px;border:none;}}",""],function(e){e=e.theme.darkTheme;return Object(a.css)(["> .host-status__post-img-box{border-color:",";}"],e&&"transparent")}),S=function(e,o,c,s){return new(c=c||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},T=a.default.div.withConfig({componentId:"sx8u2e-0"})(["box-sizing:border-box;> .empty-content{margin-top:50px;}> .no-more{width:100%;font-size:12px;font-weight:400;color:rgba(153,153,153,1);text-align:center;margin-top:75px;margin-bottom:65px;}"]),C=a.default.div.withConfig({componentId:"sx8u2e-1"})(["width:100%;margin:50px auto;text-align:center;"]);t.a=function(e){var i=e.userId,t=e.scroolDom,n=Object(U.useState)([]),r=K()(n,2),a=r[0],o=r[1],e=Object(U.useState)(k.g.LOADING),n=K()(e,2),r=n[0],c=n[1],e=Object(U.useState)(parseInt(I.a.getQuery("p"),10)||1),n=K()(e,2),s=n[0],l=n[1],e=Object(U.useState)(!0),n=K()(e,2),u=n[0],d=n[1],e=Object(U.useState)(),n=K()(e,2),e=n[0],p=n[1],n=Object(U.useState)(!1),n=K()(n,2),f=n[0],m=n[1],b=Object(U.useCallback)(function(){return S(void 0,void 0,void 0,P.a.mark(function e(){var t,n,r,a;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:return c(k.g.LOADING),e.prev=3,e.next=6,Object(W.k)({userId:i,page:s,size:10});case 6:t=e.sent,n=t.count,r=t.hasNext,a=t.posts,d(r),0<n&&a&&0<a.length&&(o(function(e){return[].concat(M()(e),M()(a))}),l(s+1)),c(k.g.SUCCESS),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(3),G.a.error(e.t0,{description:"获取直播间主播动态失败",report:!0}),p(e.t0),c(k.g.ERROR);case 20:case"end":return e.stop()}},e,null,[[3,15]])}))},[i,s,u]),v=Object(U.useCallback)(function(e){var r=e.bookId,a=e.bookStatus;o(function(e){return e.map(function(e){var t=e.trailer_detail,n=void 0===t?{}:t,t=n.trailer_id,t=void 0===t?-1:t;return Object.assign(Object.assign({},e),t===r&&{trailer_detail:Object.assign(Object.assign({},n),{book_status:a})})})})},[]);Object(U.useEffect)(function(){return b(),Object(j.db)({followUserId:i}).then(function(e){e=(e||{}).status;m(!!(void 0===e?0:e))}).catch(function(e){G.a.error(e,{description:"get follow status failed.",report:!0})}),y.b.on(y.a.ROOM_TO_MOMENT_RESERVE,v),function(){y.b.off(y.a.ROOM_TO_MOMENT_RESERVE,v)}},[i,v]),Object(U.useEffect)(function(){o([]),d(!0)},[i]);var g=Object(U.useCallback)(function(t){if(!t)return!1;var e=a.findIndex(function(e){return e.id===t}),n=M()(a);-1<e&&(n.splice(e,1),o(n))},[a]),h=Object(U.useCallback)(function(e){var t=e.postId,n=e.comments;if(!(t&&n instanceof Array))return!1;var r=a.findIndex(function(e){return e.id===t}),e=M()(a);-1<r&&(e[r].nearest_comment=M()(n),o(e))},[a]),e=r===k.g.SUCCESS?0!==a.length||u?t?F.a.createElement(x.a,{onEnter:b,scrollableAncestor:t.current}):F.a.createElement(x.a,{onEnter:b}):F.a.createElement(E.a,{className:"empty-content"}):r===k.g.ERROR?F.a.createElement(w.a,{errorMessage:e.message,retry:b}):F.a.createElement(C,null,F.a.createElement(O.a,null));return F.a.createElement(T,null,0<a.length&&a.map(function(e,t){return F.a.createElement(_,{onDelete:function(e){g(e)},roomId:i,key:"".concat(t,"-").concat(e.id),hostData:e,followStatus:!!f,updateListBook:v,updatePostComment:h})}),e,0<a.length&&!u?F.a.createElement("div",{className:"no-more"},Object(B.f)("no-more")):null)}},nKfw:function(e,t,n){"use strict";n.r(t);var r=n("o0o1"),x=n.n(r),a=n("J4zp"),k=n.n(a),w=n("q1tI"),O=n.n(w),E=n("WCjN"),i=n("vOnD"),j=n("9UTw"),y=n("SUlE"),I=n("5VyL"),S=n("7B9f"),T=n("1IkE"),C=n("WfGX"),N=n("jFEq"),r=n.p+"assets/file/27cc86e0209716721cfd88a795369b12.png",a=n.p+"assets/file/eb581a9cbfc48c58a224002fb6cfa123.png",n=n.p+"assets/file/e44fc3b04cc12aed061bc7eda2332ba9.png",A=function(e,o,c,s){return new(c=c||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},R=i.default.div.withConfig({componentId:"sc-1hlddny-0"})(["width:455px;.gift-title{height:33px;font-size:24px;font-weight:500;line-height:33px;color:#ffe898;text-align:center;}.open-gift-box{width:320px;height:320px;background:url(",") no-repeat center/100%;margin:0 auto;}.gift-btn{width:220px;height:50px;background:url(",") no-repeat center/100%;text-align:center;line-height:50px;font-size:18px;font-weight:600;color:#ffffff;text-shadow:0px 0px 4px #c76b00;margin:0 auto;cursor:pointer;}.reward-item-box{width:300px;text-align:center;margin:24px auto 0;.reward-img-box{width:300px;height:281px;background:url(",") no-repeat center/100%;display:flex;align-items:center;justify-content:center;img{width:150px;}}.reward-text-box{height:22px;font-size:16px;line-height:22px;color:#ffffff;text-align:center;margin-bottom:34px;}}"],r,a,n);t.default=function(){function e(e){(e=e.data).record_id&&(a(!0),m(!1),u(e.record_id))}var t=Object(w.useState)(!1),n=k()(t,2),r=n[0],a=n[1],i=Object(w.useContext)(I.a),o=i.setActConfig,c=i.roomId,s=Object(w.useState)(""),t=k()(s,2),l=t[0],u=t[1],d=Object(w.useRef)([]),p=Object(w.useRef)([]),n=Object(w.useState)(),i=k()(n,2),s=i[0],f=i[1],t=Object(w.useState)(!1),n=k()(t,2),i=n[0],m=n[1],t=Object(w.useState)(!1),n=k()(t,2),b=n[0],v=n[1],g=Object(w.useCallback)(function(i){return A(void 0,void 0,void 0,x.a.mark(function e(){var r,t,n,a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.data,o(function(e){var t=e.userTask,n=null===(n=null==t?void 0:t.list)||void 0===n?void 0:n.map(function(e){return(null==e?void 0:e.task_id)===(null==r?void 0:r.task_id)?Object.assign(Object.assign({},e),r):Object.assign({},e)});return Object.assign(Object.assign({},e),{userTask:{list:n,h5_url:t.h5_url}})}),3===r.status)return e.next=5,Object(N.u)({roomId:c});e.next=9;break;case 5:t=e.sent,n=t.user_task,a=n.list.filter(function(e){return(null==e?void 0:e.task_id)===(null==r?void 0:r.task_id)}),o(function(e){var t=e.userTask,t=null===(t=null==t?void 0:t.list)||void 0===t?void 0:t.map(function(e){var t;return(null==e?void 0:e.task_id)===(null===(t=a[0])||void 0===t?void 0:t.task_id)?Object.assign(Object.assign({},e),a[0]):Object.assign({},e)});return Object.assign(Object.assign({},e),{userTask:{list:t,h5_url:n.h5_url}})});case 9:case"end":return e.stop()}},e)}))},[c,o]),h=Object(w.useCallback)(function(e){e&&0<e.length&&(a(!0),d.current=e,m(!0),f(e[0]))},[]),t=Object(w.useCallback)(function(){return A(void 0,void 0,void 0,x.a.mark(function e(){var t;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b)return e.abrupt("return");e.next=2;break;case 2:return v(!0),e.prev=3,e.next=6,Object(N.s)({recordId:l});case 6:t=e.sent,(t=t.reward)&&0<t.length&&h(t),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),a(!1),j.d.error(e.t0.message||Object(y.f)("common_network_error"));case 15:v(!1);case 16:case"end":return e.stop()}},e,null,[[3,11]])}))},[h,b,l]),n=Object(w.useCallback)(function(){var e=d.current;e.shift(),0===e.length?(a(!1),m(!1),f(void 0)):f(e[0]),d.current=e},[]),_=Object(w.useCallback)(function(t){return A(void 0,void 0,void 0,x.a.mark(function e(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==p.current.indexOf(null==t?void 0:t.task_id))return e.abrupt("return");e.next=2;break;case 2:return p.current.push(null==t?void 0:t.task_id),e.next=5,Object(N.t)({roomId:c,watchTime:60*t.target});case 5:setTimeout(function(){p.current=p.current.filter(function(e){return e!==(null==t?void 0:t.task_id)})},9e4);case 6:case"end":return e.stop()}},e)}))},[c,p]);return Object(w.useEffect)(function(){return S.a.on(T.m.USER_TASK_STATE_CHANGE,g),S.a.on(T.m.USER_TASK_REWARDNOTITY,e),C.h.on(C.g.COMPLETE_WATCH_TIME_TASK,_),C.h.on(C.g.HANDLE_TAKE_REWARD_LIST,h),function(){S.a.off(T.m.USER_TASK_STATE_CHANGE,g),S.a.off(T.m.USER_TASK_REWARDNOTITY,e),C.h.off(C.g.COMPLETE_WATCH_TIME_TASK,_),C.h.off(C.g.HANDLE_TAKE_REWARD_LIST,h)}},[g,_,h]),O.a.createElement(E.c,{type:E.b.CENTER,improveLayer:!0,open:r},O.a.createElement(R,null,O.a.createElement("div",{className:"gift-title"},i?Object(y.f)("user_task_gift_title1"):Object(y.f)("user_task_gift_title2")),i?O.a.createElement("div",{className:"reward-item-box"},O.a.createElement("div",{className:"reward-img-box"},O.a.createElement("img",{src:null==s?void 0:s.icon_url,alt:""})),O.a.createElement("div",{className:"reward-text-box"},null==s?void 0:s.name,"x",null==s?void 0:s.count)):O.a.createElement("div",{className:"open-gift-box"}),i?O.a.createElement("div",{className:"gift-btn",onClick:n},Object(y.f)("user_task_ok")):O.a.createElement("div",{className:"gift-btn",onClick:t},Object(y.f)("user_task_get_reward"))))}},z0Tq:function(e,t,n){"use strict";n.r(t);var r=n("o0o1"),h=n.n(r),r=n("J4zp"),_=n.n(r),x=n("q1tI"),k=n.n(x),w=n("55Ip"),O=n("ZO3Q"),E=n("9Smi"),j=n("4Qmz"),y=n("4r7h"),I=n("t/+K"),S=n("Gt/x"),T=n("MabT"),C=n("4DtP"),N=n("SUlE"),A=n("3IhF"),R=n("vL7G"),a=n("vOnD"),n=n.p+"assets/file/c4b62a0ae59efb4daf31e60294782e43.png",z=Object(a.default)(O.animated.div).withConfig({componentId:"ba31w8-0"})(["width:476px;height:108px;background:rgba(255,255,255,1);box-shadow:0px 4px 12px rgba(0,0,0,0.12);opacity:1;border-radius:10px;position:fixed;right:20px;bottom:20px;z-index:300;padding:0 20px 0 23px;.popout-invite__close{cursor:pointer;width:14px;height:14px;background:url(",") no-repeat;background-size:100% 100%;position:absolute;right:12px;top:12px;}.popout-invite__main{display:flex;align-items:center;height:100%;justify-content:space-between;}.popout-invite__left{position:relative;width:64px;height:68px;margin-top:4px;.popout-invite__avatar{width:64px;}.popout-invite__onlive{position:absolute;right:-3px;bottom:0;background-color:RGB(255,86,82);width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;}}.popout-invite__mid{width:254px;margin:0 12px 0 15px;> .content{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;> .title{vertical-align:top;}}p{width:100%;color:#333;font-size:14px;line-height:20px;margin:0;max-height:41px;overflow:hidden;position:relative;word-break:break-all;span{color:#999;display:inline-block;margin-right:6px;vertical-align:middle;}&:nth-child(1){font-size:18px;line-height:25px;margin-bottom:6px;height:25px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}i{height:20px;line-height:15px;padding-left:6px;background:#fff;position:absolute;right:0;bottom:3px;display:inline-block;}}}.popout-invite__right{padding:0 18px;height:30px;background:#20bef3;border-radius:32px;text-align:center;line-height:30px;color:#fff;font-size:14px;white-space:nowrap;&:hover{background:#4dcbf5;}}",""],n,function(e){e=e.theme;return Object(a.css)(["",";"],e.darkTheme&&"background: rgba(73, 76, 81, 1);\n        box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.4);\n        .popout-invite__mid {\n            p {\n                color: rgba(255, 255, 255, 0.5);\n                &:nth-child(1) {\n                    span {\n                        color: #ffffff;\n                    }\n                }\n                i {\n                    background: #494c51;\n                }\n            }\n        }\n        .popout-invite__right {\n            background: #20BEF3;\n            opacity: 0.9;\n            &:hover {\n                background: #4DCBF5;\n            }\n        }")}),D=function(e,o,c,s){return new(c=c||Promise)(function(n,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function a(e){try{i(s.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(r,a)}i((s=s.apply(e,o||[])).next())})},L={from:{transform:"translateX(100%)",opacity:0},enter:{transform:"translateX(0)",opacity:1},leave:{transform:"translateX(100%)",opacity:0}},n=function(e){function r(){f(!1)}var c=e.isShowNow,t=e.stayTime,s=void 0===t?10:t,l=e.roomId,u=e.scene,d=e.channelKey,p=e.tags,t=Object(x.useState)(!1),e=_()(t,2),t=e[0],f=e[1],e=Object(x.useState)({}),e=_()(e,2),a=e[0],m=e[1],e=Object(x.useState)(60),e=_()(e,2),b=e[0],v=e[1],i=Object(x.useRef)(null),g=Object(x.useCallback)(function(e,t){e={lt:"rec_stat",dt:"client",et:"initiative_notify",live_status:"1",ct:t,timing:u-1,host_id:e.user_id,host_level:e.host_level,live_Id:e.live_id,m_total_count:e.m_total_count,live_type:e.live_type,live_subtype:e.live_subtype,host_official_type:e.host_official_type,game_key:e.game_key,category_key:e.category_key,event_id:"click"===t?"C_INITIATIVE_NOTIFY_CLICK":"C_INITIATIVE_NOTIFY_EXPOSE",game_type:e.game_type,report_data:e.report_data};A.a.handleDataCount(e),"click"===t&&r()},[u]);Object(x.useEffect)(function(){var e,r,t,n=y.a(I.ec)||null,a=y.d(I.fb);if(!a||!0!==JSON.parse(a).close_invite_notifiy){var i,a=T.a();a.invite_watch_cfg&&v(a.invite_watch_cfg.show_interval),/^.+\/(\d+)/.test(window.location.href)||(i=sessionStorage.getItem(I.pb),sessionStorage.removeItem(I.pb));var o=function(){return D(void 0,void 0,void 0,h.a.mark(function e(){var t,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={room_id:l,scene:u,channel_key:d,tags:p,live_id:i},e.prev=1,e.next=4,Object(C.v)(t);case 4:if(n=e.sent,(n=n.hosts)&&0!==n.length){e.next=8;break}return e.abrupt("return");case 8:m(n[0]),g(n[0],"expose"),f(!0),r=setTimeout(function(){f(!1)},5e3),y.h(I.Eb,b,Date.now()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),j.a.error(e.t0);case 17:case"end":return e.stop()}},e,null,[[1,14]])}))};return(null==n||JSON.parse(n).length<3)&&null==y.a(I.Eb)&&(e=setTimeout(function(){o()},c?0:1e3*s)),function(){clearTimeout(e),e=null,clearTimeout(r),r=null,clearTimeout(t),t=null}}},[s,c,l,u,d,p,b,g]);var o={pathname:"/".concat(a.user_id),state:{stateFrom:R.a.popout_invite}},t=Object(O.useTransition)(t,null,L);return k.a.createElement(k.a.Fragment,null,t.map(function(e){var t=e.item,n=e.props,e=e.key;return t&&k.a.createElement(z,{key:e,style:n},k.a.createElement("div",{className:"popout-invite__close",onClick:r}),k.a.createElement(w.b,{className:"popout-invite__main",to:o,onClick:function(){g(a,"click")}},k.a.createElement("div",{className:"popout-invite__left"},k.a.createElement(S.b,{size:68,src:a.avatar||"",className:"popout-invite__avatar"}),k.a.createElement("div",{className:"popout-invite__onlive"},k.a.createElement(E.b,{size:12,color:E.a.WHITE}))),k.a.createElement("div",{className:"popout-invite__mid"},k.a.createElement("p",null,a.loginname||""),k.a.createElement("p",{ref:i,className:"content"},k.a.createElement("span",{className:"title"},Object(N.f)("popout_invite_w")),a.anchor_intro||"")),k.a.createElement("div",{className:"popout-invite__right"},Object(N.f)("popout_invite_b"))))}))};n.defaultProps={isShowNow:!1,roomId:"",channelKey:"",tags:""};t.default=n}}]);
//# sourceMappingURL=http://hw-source-map.mildom.jp/mildompc-web-server-sourcemap/static_sourcemap/me_profile~page_profile~page_room_8a9fe0a6f40176541e90.js.map