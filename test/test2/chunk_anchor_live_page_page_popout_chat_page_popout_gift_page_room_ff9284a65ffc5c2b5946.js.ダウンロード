(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"2r2b":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var t=n("RIqP"),I=n.n(t),t=n("o0o1"),S=n.n(t),t=n("J4zp"),N=n.n(t),T=n("q1tI"),L=n("raqg"),A=n("SUM4"),R=n("WSuF"),t=n("xweI"),M=n.n(t),t=n("uoTU"),D=n.n(t),t=n("pZt1"),P=n.n(t),F=n("4Qmz"),G=n("Qpla"),B=function(e,i,c,l){return new(c=c||Promise)(function(n,t){function a(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(a,r)}o((l=l.apply(e,i||[])).next())})};function a(e){var t=this,o=e.vid,r=e.messageList,n=e.msgFilter,i=Object(T.useRef)(null),a=Object(L.a)([]),c=N()(a,2),l=c[0],s=c[1],e=Object(T.useState)(!1),a=N()(e,2),u=a[0],f=a[1],c=Object(T.useState)(!1),e=N()(c,2),a=e[0],d=e[1],c=Object(T.useState)(!1),e=N()(c,2),m=e[0],p=e[1],g=Object(T.useRef)([]),h=Object(T.useRef)([]),b=Object(T.useRef)([]),v=Object(T.useRef)(a),x=Object(T.useCallback)(function(t){return-1!==h.current.findIndex(function(e){return e.summary&&t>=e.summary.start_offset_ms&&t<e.summary.end_offset_ms})},[]),_=Object(T.useCallback)(function(){i.current||(i.current=new R.MsgList.MsgListContoller(n,{chatListMaxSize:500,chatListMaxCacheSize:1e6}))},[n]);Object(T.useEffect)(function(){return i.current&&i.current.reset(),function(){i.current=null}},[o]);var E=Object(T.useCallback)(function(){var e;null!==(e=i.current)&&void 0!==e&&e.chatList&&s(i.current.chatList)},[s]),k=Object(T.useCallback)(function(e){var t;i.current||_(),(0===i.current.chatList.length||(null==e?void 0:e.time_offset_ms)>(null===(t=i.current.chatList[i.current.chatList.length-1])||void 0===t?void 0:t.time_offset_ms))&&i.current.addItem(e)},[_]),y=Object(T.useCallback)(function(a){var r=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return B(t,void 0,void 0,S.a.mark(function e(){var t,n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return",[]);case 2:return t=[],e.prev=3,f(!0),e.next=7,Object(A.c)(o,a,r);case 7:n=e.sent,p(n.not_exist),t=n.models||[],g.current=(null===(n=n.history)||void 0===n?void 0:n.detail)||[],e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),F.a.error(e.t0),p(!0);case 17:return f(!1),e.abrupt("return",t);case 19:case"end":return e.stop()}},e,null,[[3,13]])}))},[o]),O=Object(T.useCallback)(function(e){var t=h.current,t=I()(t);100<t.length&&t.splice(0,t.length-2);var a=t.reduce(function(e,t){var n=(null===(n=null==t?void 0:t.summary)||void 0===n?void 0:n.start_offset_ms)||0,t=(null===(t=null==t?void 0:t.summary)||void 0===t?void 0:t.end_offset_ms)||0,t="".concat(n,"-").concat(t);return e.has(t)||e.add(t),e},new Set),r=[];e.forEach(function(e){var t=(null===(n=null==e?void 0:e.summary)||void 0===n?void 0:n.start_offset_ms)||0,n=(null===(n=null==e?void 0:e.summary)||void 0===n?void 0:n.end_offset_ms)||0,n="".concat(t,"-").concat(n);a.has[n]||(r.push(e),a.add(n))}),(t=t.concat(r)).sort(function(e,t){return((null===(e=null==e?void 0:e.summary)||void 0===e?void 0:e.end_offset_ms)||0)-((null===(t=null==t?void 0:t.summary)||void 0===t?void 0:t.end_offset_ms)||0)}),h.current=t},[100]),w=Object(T.useCallback)(function(e){var t,n=h.current;u||m||(t=e/1e3,e=1e3*Math.ceil(t),n=(null===(n=null==(t=0<n.length?n[n.length-1]:null)?void 0:t.summary)||void 0===n?void 0:n.end_offset_ms)||0,t&&x(e)&&!(0<n-e&&n-e<=1e4)||(x(e)?y(1e4+e,!0):y(e,!0)).then(O))},[1e4,O,y,x,u,m]),j=Object(T.useCallback)(function(e,t,n){var a,r=P()(M()(e.filter(function(e){return t<=(null===(e=null==e?void 0:e.summary)||void 0===e?void 0:e.start_offset_ms)}),"summary.start_offset_ms"));if(r)for(var o=D()(e,r);o<e.length;){if(n<=((null===(a=null===(a=e[o])||void 0===a?void 0:a.summary)||void 0===a?void 0:a.start_offset_ms)||0))return!1;if(0<(null===(a=null===(a=e[o])||void 0===a?void 0:a.detail)||void 0===a?void 0:a.length))return!0;o+=1}return!1},[]),C=Object(T.useCallback)(function(e){var t,a,r,o=h.current,i=e,c=b.current,n=c.length,l=Math.max(i-6e4,0),s=i;j(o,l,s)||(l=Math.max(i-18e4,0),j(o,l,s)||(l=Math.max(i-3e5,0)));var u,f=P()(M()(o.filter(function(e){return l<=(null===(e=null==e?void 0:e.summary)||void 0===e?void 0:e.start_offset_ms)}),"summary.start_offset_ms"));if(f)for(var d=D()(o,f);d<o.length;)if("break"===function(){var e=(null===(a=null===(t=o[d])||void 0===t?void 0:t.summary)||void 0===a?void 0:a.start_offset_ms)||0;if(s<e)return"break";var e=(null===(r=o[d])||void 0===r?void 0:r.detail)||[],n=0<c.length?c[c.length-1]:null;e.forEach(function(t){if(t.time_offset_ms&&i>=t.time_offset_ms&&(!n||t.time_offset_ms>n.time_offset_ms))try{var e=JSON.parse(t.message);e.time_offset_ms=t.time_offset_ms,c.push(e),k(e)}catch(e){F.a.error(e,{description:"parse message json error, message: ".concat(t.message)})}}),d+=1}())break;0===c.length&&0<(null===(u=g.current)||void 0===u?void 0:u.length)&&(e=g.current,u=-1===(f=D()(e,P()(e.filter(function(e){return e.time_offset_ms>=i}))))?Math.max(e.length-40,0):Math.max(f-40,0),f=-1===f?e.length:f,f=e.slice(u,f),(c=f.map(function(e){var t=JSON.parse(e.message);return t.time_offset_ms=e.time_offset_ms,t})).length!==n&&(c.forEach(function(e){k(e)}),b.current=c))},[j,k]),c=Object(T.useCallback)(function(e){w(e),C(e)},[w,C]),e=Object(T.useCallback)(function(){m||(i.current&&i.current.reset(),s([]),b.current=[])},[m,s]);return Object(T.useEffect)(function(){return R.MsgList.MsgListEventemitter.on(R.MsgList.TYPE.CHATLIST_UPDATE,E),function(){R.MsgList.MsgListEventemitter.off(R.MsgList.TYPE.CHATLIST_UPDATE,E)}},[E]),Object(T.useLayoutEffect)(function(){function n(){var e,t=h.current;v.current||(d(!0),v.current=!0,e=l[0]||{},t=(null===(t=null===(t=t[0])||void 0===t?void 0:t.summary)||void 0===t?void 0:t.start_offset_ms)||0,Promise.all([Object(A.d)(o,e.time_offset_ms||t||0,e.message_id),Object(G.a)(1e3)]).then(function(e){var t=N()(e,1)[0];d(!1),v.current=!1;e=((null==t?void 0:t.detail)||[]).map(function(e){var t=JSON.parse(e.message);return t.time_offset_ms=e.time_offset_ms,t});i.current&&i.current.updateHeadChatList(e);e=null===(t=null==r?void 0:r.list)||void 0===t?void 0:t.children[null==e?void 0:e.length];null!=e&&e.scrollIntoView({block:"start"})}).catch(function(e){d(!1),v.current=!1,F.a.error(e)}))}function e(e){var t;r&&(t=Math.ceil((null===(t=r.list)||void 0===t?void 0:t.scrollTop)||-1),a?e.deltaY<0&&t<=0&&n():0<e.wheelDeltaY&&t<=0&&n())}var a=-1!==navigator.userAgent.indexOf("Firefox"),t=r&&r.listContainerDom;return t&&t.addEventListener("wheel",e),function(){t&&t.removeEventListener("wheel",e)}},[o,s,d,r,l]),{prevPageLoading:a,chatList:l,loading:u,onTimeUpdate:c,clear:e}}},"31Qe":function(e,t,n){"use strict";var a=n("7W2i"),r=n.n(a),o=n("a1gu"),i=n.n(o),c=n("Nsbk"),l=n.n(c),a=n("lwsE"),s=n.n(a),o=n("cDf5"),u=n.n(o),c=n("l5Jd");function f(n){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=l()(n);return t=a?(e=l()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),i()(this,t)}}var a=function(e,t,n,a){var r,o=arguments.length,i=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":u()(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;0<=c;c--)(r=e[c])&&(i=(o<3?r(i):3<o?r(t,n,i):r(t,n))||i);return 3<o&&i&&Object.defineProperty(t,n,i),i},d={maxStickyMessages:500,defaultChargesLevel:2,charges:[]},o=function e(){s()(this,e),this.coins=300,this.emotion=0,this.level=1,this.stickyTime=0};a([Object(c.number)()],o.prototype,"coins",void 0),a([Object(c.number)()],o.prototype,"emotion",void 0),a([Object(c.number)()],o.prototype,"level",void 0),a([Object(c.number)()],o.prototype,"stickyTime",void 0),o=a([Object(c.mapping)({coins:"base_config.charges.coins",emotion:"base_config.charges.emotion",level:"base_config.charges.level",stickyTime:"base_config.charges.sticky_time"})],o);n=function e(){s()(this,e),this.charges=[{coins:600,emotion:1,level:2,stickyTime:120}],this.maxStickyMessages=500,this.defaultChargesLevel=2};a([Object(c.array)({model:o})],n.prototype,"charges",void 0),a([Object(c.number)()],n.prototype,"maxStickyMessages",void 0),a([Object(c.number)()],n.prototype,"defaultChargesLevel",void 0),n=a([Object(c.mapping)({charges:"base_config.charges",maxStickyMessages:"base_config.max_sticky_messages",defaultChargesLevel:"base_config.default_charges_level"})],n);o=function(e){r()(n,e);var t=f(n);function n(){var e;return s()(this,n),(e=t.apply(this,arguments)).switch=0,e.baseConfig=d,e}return n}(c.ApiModel);a([Object(c.number)()],o.prototype,"switch",void 0),a([Object(c.object)({model:n})],o.prototype,"baseConfig",void 0),o=a([Object(c.mapping)({baseConfig:"base_config",switch:"switch"})],o),t.a=o},IVgx:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"a",function(){return s}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return f}),n.d(t,"c",function(){return d});var t=n("o0o1"),a=n.n(t),r=n("PVK+"),o=n("jp0t"),i=function(e,i,c,l){return new(c=c||Promise)(function(n,t){function a(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(a,r)}o((l=l.apply(e,i||[])).next())})};function c(t){return i(this,void 0,void 0,a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.request({method:o.a.METHOD.GET,path:"/nonolive/weex_ws/transferLive/status",params:{host_id:t}}).then(function(e){return e.transfer_live_info?Object(r.c)(e.transfer_live_info):null}));case 1:case"end":return e.stop()}},e)}))}var l=function(e){return o.a.request({method:o.a.METHOD.GET,path:"/nonolive/weex_ws/transferLive/prepare",params:{to_host_id:e}})};function s(){return i(this,void 0,void 0,a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.request({method:o.a.METHOD.GET,path:"/nonolive/weex_ws/transferLive/cancel",params:{}}));case 1:case"end":return e.stop()}},e)}))}var u=function(e){return o.a.request({method:o.a.METHOD.GET,path:"/nonolive/weex_ws/transferLive/start",params:{to_host_id:e}})},f=function(){return o.a.request({method:o.a.METHOD.GET,path:"/nonolive/weex_ws/transferLive/stop",params:{}})},d=function(e){e=e.anchorId;return o.a.request({method:o.a.METHOD.GET,path:"/nonolive/weex_ws/transferLive/join",params:{host_id:e}})}},JvGe:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("q1tI"),n=n.n(a);(a={})[a.DISABLED=0]="DISABLED",a[a.ENABLED=1]="ENABLED",(a={})[a.FEMALE=0]="FEMALE",a[a.MALE=1]="MALE",(a={})[a.UNFOLLOW=0]="UNFOLLOW",a[a.FOLLOWED=1]="FOLLOWED";var n=n.a.createContext({open:!1,roomId:0,chargeList:[],selectedChargeIndex:0,selectCharge:function(){},messageMaxCount:0,messageList:[],config:{switch:0,baseConfig:{maxStickyMessages:500,defaultChargesLevel:2,charges:[]}},messageText:"",changeMessageText:function(){}}),r=n.Provider;n.Consumer,t.b=n},O5KI:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("uhBA"),a=n.n(a),r={DELETE_PAY_MESSAGE:"delete_pay_message",UPDATE_PAY_MESSAGE_LIST:"update_pay_message_list"};t.b=new a.a},Qpla:function(e,t,n){"use strict";t.a=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length?arguments[1]:void 0;return new Promise(function(e){return setTimeout(function(){return e(n)},t)})}},W1C6:function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),r=n.n(a),o=n("lwsE"),i=n.n(o),c=n("7W2i"),l=n.n(c),s=n("a1gu"),u=n.n(s),a=n("Nsbk"),f=n.n(a),o=n("oShl"),c=n.n(o),s=n("l5Jd"),a=n("1wtQ"),d=n("mjvw"),m=n("9UTw"),p=n("N4lq"),g=n("IdJ0"),o=n("Qyje"),h=n.n(o);function b(n){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f()(n);return t=a?(e=f()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),u()(this,t)}}var v,x=function(e,i,c,l){return new(c=c||Promise)(function(n,t){function a(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(a,r)}o((l=l.apply(e,i||[])).next())})};(o=v=v||{})[o.BANED=1500]="BANED";var _=function(e){l()(n,e);var t=b(n);function n(){return i()(this,n),t.apply(this,arguments)}return n}(c()(Error)),a={host:a.a.cloudacsvr},a={urls:{enterstudio:["/nonolive/gappserv/live/enterstudio","进房接口","get"],getRechargeCoupon:["/nonolive/payserv/user/getRechargeCoupon","获取优惠券"],payMsgConfig:"/nonolive/gappserv/paidMessage/getConfig",getWidgetList:"/nonolive/privilegeserv/user/pendant",postRecycle:"/nonolive/privilegeserv/pendant/recycle",postWidgetSwitch:"/nonolive/privilegeserv/user/pendantOpt"},mocks:{isHadTree:n("Y98B")},method:"get",baseURL:"".concat(a.host),timeout:3e4,throttle:!0,callbackName:"test",log:!1,beforeRequest:function(t){var n;return x(this,void 0,void 0,r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"post"===(null===(n=null==t?void 0:t.config)||void 0===n?void 0:n.method)?(t.url="".concat(t.url,"?").concat(h.a.stringify(p.a.getHttpCommonParams())),t.config.withCredentials=!0):t.data=Object.assign(Object.assign({},p.a.getHttpCommonParams()),t.data),e.abrupt("return",t);case 2:case"end":return e.stop()}},e)}))},afterResponse:function(e,t,n){var a=e.code,r=e.message,e=e.setting_version;if(e&&g.b.emit(g.a.CHECK_CONFIGURE_VERSION,e),0!==a){a===v.BANED&&(m.d.error(r||"User login baned. log out"),d.a.logout());r=new _("".concat(r,"(#").concat(a,")"));throw r.code=a,r}},afterError:function(e){if(e.code)throw e;throw new Error(e)}};t.default=Object(s.createApi)(a)},Y98B:function(e,t){e.exports={code:0,msg:"",data:{status:!0}}},cLsM:function(e,t,n){"use strict";(function(l){var e=n("o0o1"),s=n.n(e),e=n("J4zp"),u=n.n(e),f=n("q1tI"),d=n("31Qe"),m=n("jxKE"),p=n("4Qmz"),g=function(e,i,c,l){return new(c=c||Promise)(function(n,t){function a(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(a,r)}o((l=l.apply(e,i||[])).next())})};t.a=function(n){var e=Object(f.useState)(m.g.LOADING),t=u()(e,2),a=t[0],r=t[1],o=Object(f.useState)(null),e=u()(o,2),t=e[0],i=e[1],o=Object(f.useState)(),e=u()(o,2),o=e[0],c=e[1];return Object(f.useEffect)(function(){n&&g(void 0,void 0,void 0,s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r(m.g.LOADING),e.prev=1,e.next=4,l.payMsgConfig({host_id:n},{model:d.a});case 4:t=e.sent,t=t.res,console.log("pay msg hook::",t),c(t),r(m.g.SUCCESS),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),p.a.error(e.t0,{description:"获取付费留言配置失败",report:!0}),i(e.t0),r(m.g.ERROR);case 16:case"end":return e.stop()}},e,null,[[1,11]])}))},[n]),{status:a,error:t,paymessageConfig:o}}}).call(this,n("W1C6").default)},gRaq:function(e,t,n){"use strict";(function(w){function j(e){return e.map(function(e){return{username:e.user_name,level:e.charges_level,stickyTime:e.sticky_time,avatar:e.user_img,time:e.send_time,id:e.msg_id,content:e.msg,coin:e.coins,emotion:e.emotion,fansGroupType:e.fans_group_type,userId:e.user_id}}).filter(function(e){return 0<e.stickyTime})}var e=n("o0o1"),C=n.n(e),e=n("RIqP"),I=n.n(e),e=n("J4zp"),S=n.n(e),N=n("q1tI"),T=n.n(N),L=n("solc"),A=n("ZpDD"),R=n("xjki"),M=n("WfGX"),D=n("vbfE"),P=n("31Qe"),F=n("4Qmz"),G=n("obtk"),B=n("O5KI"),z=n("k6ah"),U=n("JvGe"),H=function(e,i,c,l){return new(c=c||Promise)(function(n,t){function a(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(a,r)}o((l=l.apply(e,i||[])).next())})};t.a=function(e){var l=e.roomId,t=e.isLiving,n=e.roomSettingPage,a=e.isInPopoutMode,r=e.payMessageDisplay,o=Object(N.useState)(!1),i=S()(o,2),c=i[0],s=i[1],u=Object(N.useState)([]),f=S()(u,2),d=f[0],m=f[1],p=Object(N.useState)([]),g=S()(p,2),h=g[0],b=g[1],v=Object(N.useState)(),e=S()(v,2),o=e[0],x=e[1],i=Object(N.useState)(0),u=S()(i,2),f=u[0],_=u[1],p=Object(N.useState)(""),g=S()(p,2),v=g[0],E=g[1],e=Object(N.useContext)(R.b),i=e.layout,k=e.paymessageConfig,u=Object(N.useCallback)(function(e){return _(e)},[]),p=Object(N.useCallback)(function(e){return E(e)},[]),g=Object(N.useState)(0),e=S()(g,2),g=e[0],y=e[1],O=Object(N.useCallback)(function(){Object(G.b)(l).then(function(e){e=j(e.message_list);b(I()(e))}).catch(function(e){return F.a.error(e)})},[l]);return Object(N.useEffect)(function(){function e(t){var e=h.filter(function(e){return e.id!==t});b(I()(e))}return B.b.on(B.a.DELETE_PAY_MESSAGE,e),function(){B.b.off(B.a.DELETE_PAY_MESSAGE,e)}}),Object(N.useEffect)(function(){if(k){var e=null==k?void 0:k.baseConfig,t=e.charges,n=e.defaultChargesLevel;m(t);for(var a=0,r=0,o=t.length;r<o;r+=1)if(t[r].level===n){a=r;break}_(a),y(k.baseConfig.maxStickyMessages),s(!!k.switch),x(k)}},[k]),Object(N.useEffect)(function(){function e(){return H(void 0,void 0,void 0,C.a.mark(function e(){var t,n,a,r,o,i,c;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={host_id:l},e.next=4,w.payMsgConfig(t,{model:P.a});case 4:i=e.sent,n=i.res,c=n.baseConfig,a=c.charges,r=c.defaultChargesLevel,m(a),i=o=0,c=a.length;case 10:if(!(i<c)){e.next=17;break}if(a[i].level===r)return o=i,e.abrupt("break",17);e.next=14;break;case 14:i+=1,e.next=10;break;case 17:_(o),y(n.baseConfig.maxStickyMessages),s(!!n.switch),x(n),M.h.emit(M.g.PAY_MESSAGE_SWITCH,!!n.switch),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),F.a.error(e.t0);case 27:case"end":return e.stop()}},e,null,[[0,24]])}))}function t(e){var t;e.runCmd===A.kb?(t=e.runBody,l===t.room_id&&s(!!t.switch)):e.runCmd===A.vb&&(e.runBody&&e.runBody.message_list?(e=j(e.runBody.message_list),b(I()(e))):O())}return O(),L.a.on(l,A.B,t),L.a.on(l,A.S,e),function(){L.a.off(l,A.S,e),L.a.off(l,A.B,t)}},[O,l]),T.a.createElement(U.a,{value:{open:c,chargeList:d,selectedChargeIndex:f,selectCharge:u,messageMaxCount:g,roomId:l,messageList:h,config:o,messageText:v,changeMessageText:p}},T.a.createElement(z.a,{payMessageDisplay:r,isLiving:t,roomSettingPage:n||!1,isInPopoutMode:a||!1,isFullScreen:i===D.h.FULLSCREEN}))}}).call(this,n("W1C6").default)},ip8e:function(e,t,n){"use strict";var a=n("RIqP"),_t=n.n(a),r=n("o0o1"),Et=n.n(r),o=n("J4zp"),kt=n.n(o),yt=n("q1tI"),Ot=n.n(yt),wt=n("Ty5D"),jt=n("WfGX"),Ct=n("1IkE"),It=n("ZpDD"),St=n("7B9f");function Nt(){Object(yt.useEffect)(function(){function e(e){(e=null==e?void 0:e.data).cmd=It.I,jt.h.emit(jt.g.UPDATE_ON_CHAT,e)}return St.a.on(Ct.n,e),function(){St.a.off(Ct.n,e)}},[])}function Tt(){var a=Object(yt.useRef)(0),r=Object(yt.useRef)(0),o=Object(yt.useRef)(null),e=Object(yt.useState)([]),t=(p=kt()(e,2))[0],n=p[1],e=Object(yt.useState)([]),i=(p=kt()(e,2))[0],c=p[1],e=Object(yt.useState)([]),l=(p=kt()(e,2))[0],s=p[1],u=Object(yt.useRef)(0),f=Object(yt.useRef)(0),d=Object(yt.useRef)(0),m=(e=Object(yt.useContext)(Yt.b)).anchorInfo,p=e.layout,g=e.roomId,h=Object(yt.useMemo)(function(){return 2===m.liveType?{category_key:"",game_key:m.gameKey||""}:1===m.liveType?{category_key:m.categoryKey||"",game_key:""}:void 0},[m.categoryKey,m.gameKey,m.liveType]),b=Object(yt.useCallback)(function(e){var t=e.data,n=Wt.a.getUserId(),e={};jt.h.emit(jt.g.CHANGE_GIFT_MSG,{msgId:null==t?void 0:t.msg_id,type:"count"}),console.log("add borad cast",t),n===(null==t?void 0:t.send_id)&&((n=Math.floor(8*Math.random()))===a.current&&(n===E.length?--n:n+=1),a.current=n,e.color=n,e.name=2===(null==t?void 0:t.type)?null==t?void 0:t.guest_name:null==t?void 0:t.user_name,e.key=r.current,r.current+=1,t=Wt.a.getUserInfo(),At.a.handleDataCount(Object.assign({lt:"click",af:"client",bf:"reaction",cf:"effect",action:"expose",u_level:null==t?void 0:t.level,host_id:g,category_key:"",game_key:"",fr:"web"},h)),o.current&&o.current.push(e))},[g,h]);Object(yt.useEffect)(function(){return St.a.on(Ct.f,b),function(){St.a.off(Ct.f,b)}},[b]),Object(yt.useEffect)(function(){1<=t.length&&setTimeout(function(){n([]),u.current=0},1e3)},[t.length]),Object(yt.useEffect)(function(){1<=i.length&&setTimeout(function(){c([]),f.current=0},1e3)},[i.length]),Object(yt.useEffect)(function(){1<=l.length&&setTimeout(function(){s([]),d.current=0},1e3)},[l.length]);var v=Object(yt.useCallback)(function(e){var t=[];t.push(e),0===d.current&&0<t.length&&(s(t),d.current=t.length,t=[]),0===f.current&&0<t.length&&(c(t),f.current=t.length,t=[]),0===u.current&&0<t.length&&(n(t),u.current=t.length,t=[]),0<t.length&&v(e)},[]);return Object(yt.useEffect)(function(){o.current||(o.current=new _(function(e){v(e)},function(){}))},[v]),Object(yt.useEffect)(function(){return function(){o.current=null}},[]),Ot.a.createElement(y,{isFullScreen:p===Kt.h.FULLSCREEN},Ot.a.createElement("div",{className:"one"},Ot.a.createElement(x.a,{type:["right","top"],duration:300,ease:["easeOutBack","easeInOutCirc"],leaveReverse:!0},1===(null==t?void 0:t.length)&&Ot.a.createElement(k,{color:E[t[0].color],key:t[0].key,name:t[0].name}))),Ot.a.createElement("div",{className:"two"},Ot.a.createElement(x.a,{type:["right","top"],duration:300,ease:["easeOutBack","easeInOutCirc"],leaveReverse:!0},1===(null==i?void 0:i.length)&&Ot.a.createElement(k,{color:E[i[0].color],key:i[0].key,name:i[0].name}))),Ot.a.createElement("div",{className:"three"},Ot.a.createElement(x.a,{type:["right","top"],duration:300,ease:["easeOutBack","easeInOutCirc"],leaveReverse:!0},1===(null==l?void 0:l.length)&&Ot.a.createElement(k,{color:E[l[0].color],key:l[0].key,name:l[0].name}))))}var Lt=n("ShSV"),D=n("4Qmz"),At=n("3IhF"),i=n("pIBI"),Rt=n.n(i),Mt=n("lhe3"),Dt=n("SUlE"),Pt=n("4DtP"),Ft=n("y90O"),Gt=n("5VyL"),Bt=n("iC3N"),c=n("J2m7"),zt=n.n(c),Ut=n("IdJ0"),Ht=n("g9la"),x=n("0Xwh"),Kt=n("vbfE"),Yt=n("xjki"),P=n("vOnD"),l=n("Xamy"),Wt=n("mjvw"),s=n("lwsE"),u=n.n(s),f=n("W8MJ"),d=n.n(f),_=function(){function n(e,t){u()(this,n),this.onData=e,this.end=t,this.queue=[],this.isRun=!1}return d()(n,[{key:"push",value:function(e){if(!(999<this.queue.length)){if(null==e.order&&(e.order=100),0===this.queue.length)this.queue.push(e);else for(var t=0;t<this.queue.length;t+=1){var n=this.queue[t];if(e.order<n.order){this.queue.splice(t,0,e);break}if(t===this.queue.length-1){this.queue.push(e);break}}this.run()}}},{key:"run",value:function(){this.isRun||(this.isRun=!0,this.next())}},{key:"next",value:function(){var e=this;if(0===this.queue.length)return this.isRun=!1,void this.end();var t=this.queue.shift();this.onData(t),setTimeout(function(){e.next()},333)}},{key:"clear",value:function(){this.queue=this.queue.filter(function(e){return 1===e.order}),this.isRun=!1}}]),n}(),E=["#A8DCE4","#8AC47E","#41D091","#3FC9D9","#EF73A0","#F57B7B","#E6CA40","#F3AB3F","#AC7EEF"],j=n("NXoE"),m=P.default.div.withConfig({componentId:"qao1na-0"})(["width:110px;height:26px;line-height:26px;opacity:0.8;border-radius:20px;margin-bottom:5px;font-size:13px;display:flex;align-items:center;span{display:inline-block;width:70px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:#fff;}.like_icon{margin-right:1px;color:#fff;margin-left:13px;}"]),k=Ot.a.memo(function(e){var t=e.name,e=e.color;return Ot.a.createElement(m,{style:{backgroundColor:e}},Ot.a.createElement(j.b,{size:18,className:"like_icon",name:j.b.NAME.LIKE_HOLLOW}),Ot.a.createElement("span",null,t))}),y=P.default.div.withConfig({componentId:"sc-146odq6-0"})(["width:110px;height:88px;position:absolute;pointer-events:none;top:110px;right:12px;z-index:",";.one,.two,.three{position:absolute;}.one{top:0;}.two{top:31px;}.three{top:62px;}",";"],l.a.LIKE_QUEUE,function(e){return e.isFullScreen&&Object(P.css)(["top:12px;"])}),qt=n("tib1"),Vt=n("bMKL"),Jt=n("DVT8"),Xt=n("raqg"),Qt=n("UOZH"),Zt=n("I0uh"),$t=n("MmvA"),en=n("VmMe"),tn=n("solc"),nn=n("PHiW"),an=n("t/+K"),p=n("EpQk"),g=n("+dPx"),h=n.n(g),b=n("obys"),v=n("IVgx"),C=n("Gt/x"),O=n.p+"assets/file/5ba294401e815472cbff6e662cd0fe44.png",w=n.p+"assets/file/d4c170775b2b4e42abf1c6b73754f17c.png",I=n.p+"assets/file/47473dd9ddc6d2424efa79f63a882e58.png",S=n.p+"assets/file/d357b23679239bfcb0717052dc174bbf.png",N=function(e,i,c,l){return new(c=c||Promise)(function(n,t){function a(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(a,r)}o((l=l.apply(e,i||[])).next())})};function T(e,t){return!e||e.length<=t?e:"".concat(e.substr(0,t),"...")}function rn(e){var t=e.anchorInfo,n=Object(yt.useState)(null),a=kt()(n,2),r=a[0],o=a[1],i=Object(yt.useState)(!1),c=kt()(i,2),l=c[0],s=c[1],u=Object(yt.useContext)(Yt.b).roomId,f=Object(yt.useRef)(l),e=t.transferLiveInfo,d=Object(yt.useRef)(0);return d.current=e?e.anchorInfo.anchorId:0,n=Object(yt.useCallback)(function(){o(null);var e=d.current;if(f.current&&0<e)try{Object(v.c)({anchorId:e})}catch(e){D.a.error(e)}},[o]),Object(yt.useEffect)(function(){function e(e){var t;switch(e.runCmd){case It.eb:t=Date.now()+1e4,o(new Date(t)),s(!0),f.current=!0;break;case It.db:break;case It.fb:N(void 0,void 0,void 0,Et.a.mark(function e(){var t;return Et.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.current,f.current&&0<t)try{Object(v.c)({anchorId:t}),window.location.href="/".concat(t)}catch(e){D.a.error(e)}case 2:case"end":return e.stop()}},e)}));break;case It.gb:}}return tn.a.on(u,It.B,e),function(){tn.a.off(u,It.B,e)}},[u,s,o]),e?(a=e.transferLiveStatus,i=e.anchorInfo,c=Ot.a.createElement("div",{className:"live"},Ot.a.createElement("a",{className:"wrapper",href:"/profile/".concat(i.anchorId),target:"_blank",rel:"noreferrer"},Ot.a.createElement(C.b,{className:"avatar",src:i.avatar})),Ot.a.createElement("div",{className:"text",title:Object(Dt.f)("transfer_to_host").replace("{{host}}",i.name)},Ot.a.createElement("div",{className:"text-inner"},Object(Dt.f)("transfer_to_host").replace("{{host}}",T(i.name,15)))),Ot.a.createElement("a",{href:"/".concat(i.anchorId)},Ot.a.createElement("span",{className:"text-move"},Object(Dt.f)("transfer_move_to")),Ot.a.createElement(j.b,{name:j.a.ARROW_RIGHT,style:{color:"#fff"}}))),e=null!==r,e=Ot.a.createElement("div",{className:"prepare"},Ot.a.createElement("div",{className:"avatar-container"},e?Ot.a.createElement(Ot.a.Fragment,null,Ot.a.createElement(C.b,{className:"avatar",src:t.avatar}),Ot.a.createElement(j.b,{className:"arrow-icon",size:12,name:j.a.ARROW_RIGHT}),Ot.a.createElement(C.b,{className:"avatar",src:i.avatar})):Ot.a.createElement(C.b,{className:"avatar",src:i.avatar})),Ot.a.createElement("div",{className:"anchor-info",title:(e?Object(Dt.f)("transfer_live_follow_to").replace("{{A}}",t.name):Object(Dt.f)("transfer_live_pic")).replace("{{B}}",i.name)},e?Object(Dt.f)("transfer_live_follow_to").replace("{{A}}",T(t.name,8)).replace("{{B}}",T(i.name,10)):Object(Dt.f)("transfer_live_pic").replace("{{B}}",T(i.name,15)),e&&Ot.a.createElement("div",{className:"follow-btn",onClick:function(){s(function(e){return f.current=!e,!e})}},Ot.a.createElement("i",{className:"radio"}),Ot.a.createElement("span",{className:"text"},Object(Dt.f)("transfer_live_follow")),Ot.a.createElement("span",{className:"seconds"},"(",Ot.a.createElement(h.a,{date:r,onComplete:n,renderer:function(e){e=e.seconds;return Ot.a.createElement("span",null,e,"s")}}),")"))),!e&&Ot.a.createElement("div",{className:"btn-wrapper"},Ot.a.createElement("div",{className:"btn"},Object(Dt.f)("transfer_live_ready")))),Ot.a.createElement(L,{followed:l},a===b.c.LIVING?c:e)):null}var L=P.default.div.withConfig({componentId:"sc-50uno5-0"})(["width:100%;height:60px;background-image:url(",");background-repeat:no-repeat;background-size:cover;padding:0 10px;position:relative;z-index:",";&.big-size{height:80px;background-image:url(",");}.live{height:100%;width:100%;display:flex;align-items:center;.wrapper{display:block;width:40px;height:40px;margin-right:8px;flex-shrink:0;}.avatar{width:100%;height:100%;}.text{flex:1;color:#fff;font-size:14px;}.text-inner{max-width:188px;}.text-move{color:#fff;}}.prepare{height:100%;width:100%;display:flex;align-items:center;.avatar-container{display:flex;align-items:center;flex-shrink:0;margin-right:8px;}.avatar{flex-shrink:0;width:40px;height:40px;}.arrow-icon{fill:#fff;}.anchor-info{color:#fff;font-size:14px;line-height:20px;flex:1;margin-right:10px;}.follow-btn{display:flex;align-items:center;cursor:pointer;.radio{display:block;width:18px;height:18px;border-radius:50%;margin-right:3px;background:url(",");background-size:100% 100%;}.text{font-size:16px;margin-right:3px;opacity:0.8;}.seconds{opacity:0.8;}","}.btn-wrapper{color:#fff;flex-shrink:0;.btn{padding:0 12px;height:30px;line-height:30px;background:rgba(13,13,13,0.15);color:#fff;border-radius:4px;font-size:14px;}}}"],O,l.a.TRANSFER_LIVE_PANEL,w,S,function(e){return e.followed&&Object(P.css)([".radio{background:url(",");background-size:100% 100%;}.text{opacity:1;}.seconds{opacity:1;}"],I)}),on=n("SMHC"),cn=n("f35i"),ln=n("e191"),sn=n("WSuF"),un=n("iE/9"),fn=n("GA2E"),dn=n.p+"assets/file/8a26cd1e68b656fe9ebc572655aea8fd.png",mn=n("35tE"),pn=n("S7qb"),A=n("n+8t"),R=n("LYyr"),M=n("9UTw"),a=n("sEfC"),F=n.n(a),G=n("LtoX"),B=n("JhUC"),z=n("qj16"),r=n("OoQT"),U=P.default.div.withConfig({componentId:"itwj60-0"})(["position:absolute;height:100%;top:0;width:100%;.message-list-container{flex:1;min-height:0;position:relative;background-color:transparent;}"]),H=P.default.div.withConfig({componentId:"itwj60-1"})(["position:absolute;width:100%;height:100%;font-size:13px;flex:1 1 auto;overflow:auto;scroll-behavior:smooth;padding:9px 5px 0 17px;",";.pay-msg-history{margin-bottom:10px;display:flex;align-items:center;justify-content:space-between;.pay-msg-time{color:#999;margin-right:18px;}}"],r.a),o=n("pVnL"),K=n.n(o),Y=n("EQxi"),W=n.p+"assets/file/851a64f44e8f6a34de37d18c0195321b.png";function q(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,t=function(){};return{s:t,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw r}}}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function J(e){function t(e){e&&jt.h.emit(jt.g.SHOW_USER_CARD,e)}var l=e.msg,n=Q(e,["msg"]),s=Object(yt.useContext)(Yt.b).emotion,a=l.level,r=l.avatar,o=l.userName,i=l.userId,c=l.coins,u=l.content,e=l.emotion,a=Object(mn.d)(a);return Ot.a.createElement(Z,K()({color:a,popUserCard:t},n),Ot.a.createElement("div",{className:"info"},Ot.a.createElement($,{src:"".concat(r,"?size=mini"),onClick:function(){t(i)}}),Ot.a.createElement("div",{className:"name",onClick:function(){t(i)}},o),Ot.a.createElement("img",{className:"icon",src:W,alt:"coin"}),Ot.a.createElement("div",{className:"coin"},c)),Ot.a.createElement("div",{className:"content"},e?function(e){var t=s.defaultEmotions,n=s.fansGroupEmotions,a=Object.create(null);if(t){var r=q(t);try{for(r.s();!(o=r.n()).done;){var o=o.value;o.id&&(a[o.id]=o.pic)}}catch(e){r.e(e)}finally{r.f()}}if(0<l.fansGroupType&&n){var i=q(n);try{for(i.s();!(c=i.n()).done;){var c=c.value;c.id&&(a[c.id]=c.pic)}}catch(e){i.e(e)}finally{i.f()}}return Rt()(e,/\[\/(\d+)\]/g,function(e,t){var n=a[e];return n?Ot.a.createElement("img",{key:t,className:"emotion",src:Y.a.processServerImageUrl(n),alt:"emotion"}):"[/".concat(e,"]")})}(u):u))}function gn(e){var t=e.fullScreen,n=Object(yt.useState)(Ee),a=(k=kt()(n,2))[0],r=k[1],o=(y=Object(yt.useContext)(Yt.b)).happyBagMsgList,i=y.roomId,c=y.anchorInfo,l=y.layout,s=Object(yt.useState)(!1),u=(O=kt()(s,2))[0],f=O[1],d=Object(yt.useState)(!1),m=(w=kt()(d,2))[0],p=w[1],g=Object(yt.useRef)(he.c.roomUser),h=Object(yt.useMemo)(function(){if(0<o.length){var e=pe.b.getItem(pe.a.HAPPY_BAG_ACROSS_ID);return e===o[0].happyBagId&&(g.current=he.c.bannerUser),e&&pe.b.removeItem(pe.a.HAPPY_BAG_ACROSS_ID),At.a.handleDataCount({lt:"click",af:"live_room",bf:"receive",cf:"happybag",action:"chatlist_notice",action_type:"show",room_id:i,live_type:c.liveType,category_key:2===c.liveType?c.gameKey:c.categoryKey,host_official_type:c.anchorGroup&&c.anchorGroup[0]||"normal",screen_mode:me.a[l]}),f(!1),p(!1),o.find(function(e){return!a.includes(e.happyBagId)})}return null},[c.anchorGroup,c.categoryKey,c.gameKey,c.liveType,o,l,i,a]);Object(yt.useEffect)(function(){function e(e){var t=e.executorId,e=e.executedIdArr,n=[];t===i&&(null!=e&&e.forEach(function(t){o.forEach(function(e){e.userId===t&&n.push(e.happyBagId)})}),n.length&&r(function(e){return Ee=[].concat(_t()(e),n)}))}return Ut.b.on(Ut.a.ANCHOR_BLACKLIST_ADD,e),function(){Ut.b.off(Ut.a.ANCHOR_BLACKLIST_ADD,e)}},[o,a,i]);var b=pe.b.getItem(pe.a.TIME_OFFSET),v=Object(yt.useCallback)(function(){var e=(h||{}).endTime,t=!1;e&&(t=e-Date.now()-b<=0),t||u?p(!0):M.d.error(Object(Dt.f)("happy_bag_tip_unopen"))},[u,h,b]),x=Object(yt.useCallback)(function(){var e=Ft.a.getState().user;if(!e)return Ft.a.dispatch(Object(ie.c)(!0));h&&(At.a.handleDataCount({lt:"click",af:"live_room",bf:"receive",cf:"happybag",action:"chatlist_notice",action_type:"click",room_id:i,live_type:c.liveType,category_key:2===c.liveType?c.gameKey:c.categoryKey,host_official_type:c.anchorGroup&&c.anchorGroup[0]||"normal",screen_mode:me.a[l],click_id:e.user_id,click_level:e.level}),v())},[c.anchorGroup,c.categoryKey,c.gameKey,c.liveType,h,l,i,v]),_=Object(yt.useCallback)(function(e){e=e.awardMess;p(!1),h&&e&&on.b.emit(on.a.RECEIVED_BAG,h.happyBagId||-1)},[h]);if(!h)return null;var E=h.avatar,e=h.userName,n=h.endTime,k=h.colorStart,y=h.colorEnd,s=h.happyBagId,O=h.userId,d=h.message,w=n-Date.now()-b<=0;return Ot.a.createElement(xe,{fullScreen:t},Ot.a.createElement(_e,{fullScreen:t,colorStart:k,colorEnd:y},Ot.a.createElement(C.b,{size:32,src:E,className:"avatar"}),Ot.a.createElement("div",{className:"info"},Ot.a.createElement("div",{className:"name"},e),Ot.a.createElement("div",null,d)),Ot.a.createElement("div",{className:"btn",onClick:x},w||u?Object(Dt.f)("happy_bag_status_now"):Ot.a.createElement(be.a,{onEnd:function(){f(!0)},end:n,timeOffset:b,type:"number"})),Ot.a.createElement(ge.a,{open:m,onClose:_,sponsorId:O,happyBagId:s,receiveType:he.a.chatup,userSource:g.current}),Ot.a.createElement("img",{className:"esolc",src:ve,alt:"close",onClick:function(){return r(function(e){return Ee=[].concat(_t()(e),[h.happyBagId])})}})))}function X(e){return 6<e.length?"".concat(e.slice(0,6),"..."):e}function hn(e){var a=e.fullScreen,t=Object(yt.useContext)(Yt.b),n=t.happyBagAcrossMsgList,r=t.layout,o=t.anchorInfo,i=t.roomId,e=Object(yt.useState)(!0),e=(t=kt()(e,2))[0],c=t[1],l=Object(yt.useRef)(),s=Object(wt.g)(),e=Object(ke.useTransition)(e,null,Oe),u=Object(yt.useMemo)(function(){return 0<n.length?(c(!0),At.a.handleDataCount({lt:"click",af:"live_room",bf:"receive",cf:"happybag",action:"channel_notice",action_type:"show",room_id:i,send_room_id:n[0].hostInfo.hostId,live_type:o.liveType,category_key:2===o.liveType?o.gameKey:o.categoryKey,host_official_type:o.anchorGroup&&o.anchorGroup[0]||"",screen_mode:me.a[r]}),n[0]):null},[o.anchorGroup,o.categoryKey,o.gameKey,o.liveType,n,r,i]);Object(yt.useEffect)(function(){return l.current&&clearTimeout(l.current),u&&(l.current=setTimeout(function(){c(!1),on.b.emit(on.a.CLOSE_CATEGORY_NOTICE,(null==u?void 0:u.happyBagId)||-1)},5e3)),function(){l.current&&clearTimeout(l.current)}},[u]);var f=Object(yt.useCallback)(function(){var e=(null===(t=null==u?void 0:u.hostInfo)||void 0===t?void 0:t.hostId)||0,t=Ft.a.getState().user;At.a.handleDataCount({lt:"click",af:"live_room",bf:"receive",cf:"happybag",action:"channel_notice",action_type:"click",room_id:i,send_room_id:e,live_type:o.liveType,category_key:1===o.liveType?o.gameKey:o.categoryKey,host_official_type:o.anchorGroup&&o.anchorGroup[0]||"",screen_mode:me.a[r],click_id:(null==t?void 0:t.user_id)||"",click_level:(null==t?void 0:t.level)||""});t="".concat(Zt.h.ROOM.replace(":room_id",e.toString()),"?categoryTag=true");pe.b.setItem(pe.a.HAPPY_BAG_ACROSS_DATA,u),u&&u.happyBagId&&(e=u.happyBagId,pe.b.setItem(pe.a.HAPPY_BAG_ACROSS_ID,e)),s.push(t)},[o.anchorGroup,o.categoryKey,o.gameKey,o.liveType,u,s,r,i]);if(!u)return null;var d=u.userInfo,m=u.hostInfo;return Ot.a.createElement(Ot.a.Fragment,null,e.map(function(e){var t=e.key,n=e.item,e=e.props;return n?Ot.a.createElement(we,{key:t,style:e,fullScreen:a,onClick:f},Ot.a.createElement("div",{className:"info"},Ot.a.createElement("div",{className:"icon-wrapper"},Ot.a.createElement("img",{src:ye,alt:""})),Ot.a.createElement("div",{className:"bag-msg"},Ot.a.createElement("div",null,Object(Dt.f)("happy_bag_cross_room_msg").replace("{{userName}}","".concat(X(d.userName||""))).replace("{{hostName}}","".concat(X(m.hostName||"")))))),Ot.a.createElement(j.b,{name:j.b.NAME.ARROW_RIGHT,size:32,className:"btn"})):null}))}function bn(e){var t=e.roomId,n=e.noLogin,a=void 0!==(N=e.disabled)&&N,r=e.sendMessage,i=e.anchorInfo,c=e.luckyDraw,l=e.isAdmin,o=e.forbidChatOffLive,s=e.payMessageDisplay,u=e.isGameLive,f=e.messageListComponent,d=Object(yt.useState)(""),m=(v=kt()(d,2))[0],p=v[1],g=Object(yt.useState)(!0),h=(N=kt()(g,2))[0],b=N[1],e=Object(yt.useState)(!0),v=(d=kt()(e,2))[0],x=d[1],g=Object(yt.useState)(!1),_=(N=kt()(g,2))[0],E=N[1],e=Object(yt.useState)(!0),k=(d=kt()(e,2))[0],y=d[1],g=Object(yt.useState)(!0),e=(N=kt()(g,2))[0],O=N[1],w=Object(yt.useRef)(),j=Object(yt.useRef)(),C=Object(On.a)({anchorInfo:i}).guestGz,d=Object(yt.useState)(null),I=(g=kt()(d,2))[0],S=g[1],N=Object(yt.useState)(".tool-bar"),g=(d=kt()(N,2))[0],T=d[1],N=Object(yt.useState)(!1),L=(d=kt()(N,2))[0],A=d[1];Object(yt.useEffect)(function(){je="";function e(e){var n;Wt.a.getLoginStatus()?(n="[/".concat(null===(e=null==e?void 0:e.emotion)||void 0===e?void 0:e.id,"]"),p(function(e){var t=e+n;return t.length>Kt.i?e:t}),w.current.focus()):Ft.a.dispatch(Object(ie.c)(!0))}function t(e){y(e)}function n(e){O(e)}return jt.h.on(jt.g.PLAYER_FOCUS_CHANGE,t),jt.h.on(jt.g.CHAT_PANEL_ENABLE_CHANGE,n),jt.h.on(jt.g.EMOTION_STICK_FULLSCREEN,e),function(){jt.h.off(jt.g.PLAYER_FOCUS_CHANGE,t),jt.h.off(jt.g.CHAT_PANEL_ENABLE_CHANGE,n),jt.h.off(jt.g.EMOTION_STICK_FULLSCREEN,e)}},[]);var R=Object(yt.useCallback)(function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];I&&S(null),je&&(e&&jt.h.emit(jt.g.HIDDEN_TOOL_PANNEL,je),je="",A(!1))},[I]),N=Object(yt.useCallback)(function(e,t){if(!je||je!==e)return e?void(L&&je?(R(),window.setTimeout(function(){je=e,A(!0),t&&T(t)},0)):(je=e,A(!0),t&&T(t))):D.a.error(new Error("tool tag undefined"))},[R,L]);function M(){Object(Jt.b)(m)&&(r(m),p(""),w.current.focus())}return Object(yt.useEffect)(function(){_||x(k)},[_,k]),d=Object(yt.useCallback)(function(){var e,t=Ft.a.getState().user,n=0,a=0;if(t&&!l&&t.user_id!==i.anchorId||!t){var r=i.ifFollow,o=i.roomSetting;if(o&&(n=o.chatMustFans,a=o.chatLevelLimit),o=Ot.a.createElement("div",{className:"chat-panel___mention-follow-panel"},Ot.a.createElement("div",{className:"chat-panel___mention-follow-panel__icon"}),Ot.a.createElement("span",null,Object(Dt.f)("chat_need_follow"))),Boolean(n)&&!r)return!t&&C?null:o;if(a&&0<a&&(t&&!l&&t.user_id!==i.anchorId&&(null==t?void 0:t.level)<a||!t)){a=Object(Dt.f)("chat_level_limit").replace("{{level}}",String(a));return o=Ot.a.createElement("div",{className:"chat-panel___mention-follow-panel"},Ot.a.createElement("div",{className:"chat-panel___mention-follow-panel__icon"}),Ot.a.createElement("span",null,a))}if(h&&c&&c.drawing&&(null===(e=c.detail)||void 0===e||!e.joined)&&i.living&&(null===(e=c.detail)||void 0===e?void 0:e.startDrawType)===Qt.b.ANY_CHAT)return Boolean(n)&&!r?o:o=Ot.a.createElement("div",{className:"chat-panel__lucky-draw-ongoing-panel"},Ot.a.createElement("div",{className:"chat-panel__lucky-draw-ongoing-panel__icon"}),Ot.a.createElement("span",null,Object(Dt.f)("luckydraw_ongoing")),Ot.a.createElement("div",{className:"chat-panel__lucky-draw-ongoing-panel__close-icon",onClick:function(){b(!1)}}))}return null},[i,l,h,c,C]),Ot.a.createElement(ae.a,null,Ot.a.createElement(se,{ref:j,isShow:e,id:"fullscreen-chatpanel",isPayMessageShow:s&&u&&i.living,className:v||k?"isFocus":""},Ot.a.createElement(Tt,null),Ot.a.createElement(Vt.a,null,Ot.a.createElement(hn,{fullScreen:!0})),Ot.a.createElement(de,null,Ot.a.createElement(En.a,{roomId:t,isLiving:i.living,payMessageDisplay:s})),f(),o?Ot.a.createElement("div",{className:"chat-panel___mention-follow-panel"},Ot.a.createElement("div",{className:"chat-panel___mention-follow-panel__icon"}),Ot.a.createElement("span",null,Object(Dt.f)("chat_need_on_live"))):d(),Ot.a.createElement(Vt.a,null,Ot.a.createElement(gn,{fullScreen:!0})),Ot.a.createElement(ue,{className:"input-area"},Ot.a.createElement(ce.a,{style:{right:Ie},visible:L,positionMode:oe.a.FULLSCREEN,onClickOutside:function(){R()},isFullScreen:!0,exclude:g||".tool-bar"},I),Ot.a.createElement(P.ThemeProvider,{theme:Ce},Ot.a.createElement("div",{className:"chat-shortcut-wrapper"},Ot.a.createElement(re.a,{showClickPop:N,hideClickPop:R,status:oe.a.FULLSCREEN}))),Ot.a.createElement("div",{className:"chat-panel-divier"}),Ot.a.createElement("input",{ref:w,maxLength:Kt.i,value:m,onChange:function(e){p(e.target.value)},onFocus:function(){var e;e=i.liveIntro,n&&(e=Object(Dt.f)("guest_can_only_quick").replace("{streamer_name}",e||""),kn.a.showInfoMessage(e,j.current,5e3,"message_guest_only_chat"),w.current.blur()),E(!0),x(!0)},onBlur:function(){E(!1),x(!1)},placeholder:"".concat(Object(Dt.f)("chat_with_everyone"),"..."),onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),M())}}),Ot.a.createElement(fe,{onClick:M,hasText:""!==m,disabled:a,noLogin:n},Object(Dt.f)("send"))),Ot.a.createElement(le,{className:"emotio-area"},Ot.a.createElement(ne.a,{roomId:t,isFullScreen:!0,showClickPop:N})),Ot.a.createElement("div",{className:"close",onClick:function(){O(!1),jt.h.emit(jt.g.CHAT_PANEL_CLOSE,!1)}})))}var Q=function(e,t){var n={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},Z=P.default.div.withConfig({componentId:"sc-1y6hl6g-0"})(["padding:8px;border-radius:4px;> .info{display:flex;align-items:center;> .name{flex:1;min-width:0;color:#fff;font-size:14px;margin:0 8px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;}> .icon{width:12px;height:12px;}> .coin{font-size:12px;color:#fff;margin-left:5px;}}> .content{margin-top:8px;font-size:12px;color:#fff;border-radius:4px;padding:8px;background-color:rgba(255,255,255,0.2);line-height:1.5;word-break:break-word;> .emotion{width:32px;height:32px;vertical-align:middle;margin:0 4px;}}",""],function(e){var t=e.color,e=e.popUserCard;return Object(P.css)(["background-color:",";> .info{> .name{cursor:",";}}"],t,e?"pointer":"auto")}),$=Object(P.default)(C.b).withConfig({componentId:"sc-1y6hl6g-1"})(["cursor:pointer;width:32px;height:32px;"]),ee={marginTop:"130px"},te=null,vn=Ot.a.memo(function(e){var t=e.styleProp,i=e.chatList,a=e.roomId,n=e.needFetchGiftHistory,r=e.giftActiveTab,o=Ft.a.getState().configure,c=Object(yt.useContext)(Yt.b),l=c.anchorInfo,s=c.layout,e=Object(yt.useState)(!0),c=kt()(e,2),u=c[0],f=c[1],e=Object(yt.useState)([]),c=kt()(e,2),d=c[0],m=c[1],e=Object(yt.useState)([]),c=kt()(e,2),e=c[0],p=c[1],c=Object(yt.useState)({}),c=kt()(c,2),g=c[0],h=c[1],b=Object(yt.useRef)(null),v=Object(yt.useRef)(0),x=o.gift.giftIdMapDetail;console.log("gift list exec");function _(){setTimeout(function(){b&&b.current&&(b.current.scrollTop=99999999)},100)}var E=Object(yt.useCallback)(F()(function(e){var t,n;e&&(t=(n=e.target).scrollTop,e=n.scrollHeight,n=n.clientHeight,f(e<n+t+50||0===e||0===n))},100),[]);Object(yt.useLayoutEffect)(function(){var e=b.current;return e&&e.addEventListener("scroll",E),function(){e.removeEventListener("scroll",E)}},[E,b]),Object(yt.useEffect)(function(){l.living&&Wt.a.getUserId()===a&&Object(G.j)({live_id:l.logId}).then(function(e){var t;e&&0<e.length&&(t={},e.forEach(function(e){t[e.msgId]=1}),h(t),p(e),_())}).catch(function(e){M.d.error(Object(R.c)(Object(Dt.f)("common_network_error"),e))})},[l.living,l.logId,a]),Object(yt.useEffect)(function(){if(i.length!==v.current&&l.living){for(var e=i.length-v.current,t=[],n=[],a={},r=i.length-e;r<i.length;r+=1){var o=i[r];o.cmd===It.z?t.push({type:0,gift_id:o.giftId,gift_pic:o.giftImg,fans_group_name:o.fansName,fans_group_bg_pic:o.fansBgPic,loginname:o.userName,user_id:o.userId,level:o.level,quantity:o.count,fansGroupType:o.fansGroupType,create_time:Date.now()}):o.cmd===It.B&&o.runCmd===It.E&&o.runBody&&o.runBody.text?t.push({type:1,text:o.runBody.text}):o.cmd===It.Y&&(g[o.msgId]?a[o.msgId]=1:n.push({msgId:o.msgId,content:o.msg,userId:o.userId,userName:o.userName,level:o.payMsgLevel,sendTime:Number(o.time),coins:o.payMsgCoin,avatar:o.userImg,fansName:o.fansName,fansGroupType:o.fansGroupType,fansBgPic:o.fansBgPic,emotion:o.payEmoticon,hostId:o.toId}))}h(function(e){return Object.assign(Object.assign({},e),a)}),m(function(e){return[].concat(_t()(e),t)}),p(function(e){return _t()(new Set([].concat(_t()(e),n)))}),u&&_()}v.current=i.length},[u,i,g,l.living]);var k=Object(yt.useCallback)(function(){l.living&&Object(G.i)({last_id:te}).then(function(e){e.body&&(e=e.body.models.map(function(e){return e.type=0,e}).filter(function(e){return 2!==e.item_type}).sort(function(e,t){return e.create_time-t.create_time}),m(e),u&&_())}).catch(function(e){M.d.error(Object(R.c)(Object(Dt.f)("common_network_error"),e))})},[l.living,u]);Object(yt.useEffect)(function(){n&&0===r&&k()},[n,r]);var y=Object(yt.useCallback)(function(e,t){var n;switch(e.type){case 0:return n=e.gift_pic||x[e.gift_id].picture,Ot.a.createElement(z.a,{fansGroupType:e.fansGroupType||0,key:t,roomId:a,roomAdmin:0,medals:e.medals||[],level:e.level,userName:e.loginname,userId:e.user_id,giftImg:n,count:e.quantity,receiveTime:e.create_time,isHistory:!0,anchorInfo:l,layout:s});case 1:return Ot.a.createElement(B.a,{key:t,text:e.text});default:return null}},[l,x,s,a]);return Ot.a.createElement(U,{style:t},Ot.a.createElement("div",{className:"message-list-container"},Ot.a.createElement(H,{ref:b},Object(yt.useMemo)(function(){return 0===r&&(null==d?void 0:d.map(function(e,t){return y(e,t)}))},[r,d,y]),0===r&&0===d.length&&Ot.a.createElement(A.a,{style:ee}),1===r&&(0<e.length?e.map(function(e){return Ot.a.createElement("div",{className:"pay-msg-history"},Ot.a.createElement(J,{msg:e,style:{width:"280px"}}),Ot.a.createElement("div",{className:"pay-msg-time"},Object(R.d)("hh:mm",e.sendTime)))}):Ot.a.createElement(A.a,{style:ee})))))}),xn=n("Qod/"),_n=n("EFYm"),En=n("gRaq"),kn=n("cjBY"),yn=n("d6+m"),ne=n("tGkr"),i=n("doQp"),ae=n.n(i),re=n("oGNr"),oe=n("cQiX"),ie=n("TrD6"),ce=n("Maa5"),c=n("gJNT"),s=n.p+"assets/file/b1396cc24382458748a4f7f59fba42df.png",f=n.p+"assets/file/dbdb3641326c7caf663b792211107e90.png",g=n.p+"assets/file/e93768dbc00446e285e02ed99cc2a4ed.png",le=P.default.div.withConfig({componentId:"ech8ej-0"})(["width:36px;height:36px;background:#414448;border-radius:18px;position:absolute;bottom:19px;right:12px;padding:5px;display:none;box-sizing:border-box;"]),se=P.default.div.withConfig({componentId:"ech8ej-1"})(["cursor:move;position:fixed;right:50px;bottom:200px;background-color:transparent;width:360px;height:460px;justify-content:flex-start;padding-bottom:72px;border:none;padding-top:0;border-radius:4px;flex-flow:column;.close{display:none;cursor:pointer;width:26px;height:36px;background:url('","') no-repeat;background-size:26px 26px;position:absolute;right:0;top:-36px;}.chat-panel___mention-follow-panel{padding:10px 30px;font-size:14px;display:flex;align-items:center;position:absolute;bottom:65px;border-radius:4px;width:340px;margin-left:10px;background-color:#2e3033;color:#fff;}.chat-panel___mention-follow-panel__icon{flex-shrink:0;width:24px;height:24px;background:url('","');background-size:100% 100%;margin-right:15px;}.chat-panel__lucky-draw-ongoing-panel{position:absolute;bottom:65px;background-color:#2E3637;border-top:1px solid #2E3637;color:#FFFFFF;border-radius:4px;width:310px;margin-left:25px;}.chat-panel__lucky-draw-ongoing-panel__icon{width:20px;height:20px;background:url('","') no-repeat;background-size:100% 100%;margin-right:8px;}.chat-panel__lucky-draw-ongoing-panel__close-icon{position:absolute;right:12px;top:12px;width:7px;height:7px;background:url('","') no-repeat;background-size:100% 100%;cursor:pointer;}&:hover,&.isFocus{background-color:rgba(0,0,0,0.5);.close{display:block;}.input-area{display:flex;}.emotio-area{display:block;}}",""],s,c.a,f,g,function(e){e=e.isShow;return Object(P.css)(["display:",";"],e?"flex":"none")}),ue=P.default.div.withConfig({componentId:"ech8ej-2"})(["position:absolute;left:12px;width:288px;font-size:12px;display:none;height:36px;background:#414448;border-radius:4px;bottom:19px;&:hover,&.isFocus{display:flex;}input{resize:none;line-height:1.5;flex:1;padding:5px 10px 5px 10px;background:transparent;outline:none;border:none;color:#fff;}.chat-panel-divier{height:18px;width:1px;background-color:#707070;margin-top:auto;margin-bottom:auto;}.chat-shortcut-wrapper{width:48px;height:100%;padding-right:15px;padding-top:5px;.chat-shortcut-panel{left:-260px;}.chat-shortcut-btn__badge{right:5px;}}"]),fe=P.default.div.withConfig({componentId:"ech8ej-3"})(["cursor:pointer;font-size:13px;color:#fff;width:60px;text-align:center;background-color:#20bef3;position:relative;height:36px;border-radius:4px;line-height:36px;",""],function(e){var t=e.noLogin,n=e.disabled,e=e.hasText;return Object(P.css)(["background-color:",";cursor:",";&:hover{background-color:",";}"],t||n?"#c6c6c6":e?"#20bef3":"#999999",t||n?"not-allowed":"pointer",t||n?"":"#60d6e9")}),de=P.default.div.withConfig({componentId:"ech8ej-4"})(["min-height:20px;"]),On=n("nt+y"),O=n("Bfvj"),me=n("2bYw"),pe=n("+7Fa"),ge=n("qruW"),he=n("gwoi"),be=n("cqRG"),ve=n.p+"assets/file/db72817a24367a67ce0e4b582260fca6.png",xe=P.default.div.withConfig({componentId:"sc-84s1ml-0"})(["position:absolute;left:0;bottom:132px;width:100%;",";",""],function(e){e=e.theme;return Object(P.css)(["background-color:",";"],e.darkTheme?"#202123":"#f5f5f5")},function(e){return e.fullScreen&&Object(P.css)(["background-color:transparent;bottom:65px;left:10px;border-radius:4px;width:340px;"])}),_e=P.default.div.withConfig({componentId:"sc-84s1ml-1"})(["position:relative;display:flex;height:40px;align-items:center;padding:0 20px;font-size:12px;color:#ffffff;> .esolc{position:absolute;top:0;right:0;width:18px;height:18px;cursor:pointer;}.info{margin:0 5px;flex:1;min-width:0;display:flex;align-items:center;> .name{max-width:80px;","}}.btn{overflow:hidden;height:28px;line-height:28px;padding:0 15px;text-align:center;border:1px solid #ffffff;background:rgba(255,255,255,0.1);border-radius:14px;flex-shrink:0;cursor:pointer;}",";"],O.a,function(e){var t=e.fullScreen,n=e.colorStart,e=e.colorEnd;return Object(P.css)(["width:",";border-radius:","px;background:linear-gradient(270deg,"," 0%,"," 100%);"],t?"340px":"100%",t?4:0,n,e)}),Ee=[],ke=n("ZO3Q"),ye=n.p+"assets/file/b121775f07102952940f4b3dfec5ebf4.png",Oe={from:{opacity:0},enter:{opacity:1},leave:{opacity:0}},we=Object(P.default)(ke.animated.div).withConfig({componentId:"sc-1rdx511-0"})(["position:absolute;display:flex;cursor:pointer;left:0;top:0px;width:100%;height:60px;align-items:center;justify-content:space-between;padding:0 10px;font-size:14px;color:#ffffff;z-index:2;border-radius:4px;transition:all 1.2s;background:linear-gradient(270deg,#eb4152 0%,#f47345 100%);.info{display:flex;.icon-wrapper{flex-shrink:0;width:48px;height:48px;border-radius:8px;> img{width:100%;height:100%;}}.bag-msg{margin-left:5px;> div{line-height:24px;}}}"," .btn{color:#ffffff;flex-shrink:0;cursor:pointer;}"],function(e){return e.fullScreen&&Object(P.css)(["position:absolute;margin-top:10px;left:12px;border-radius:10px;width:336px;"])}),je="",Ce={darkTheme:!0},Ie=-66,Se=n("e6Ps"),w=n.p+"assets/file/b1396cc24382458748a4f7f59fba42df.png",Ne=n("2r2b"),S=n("DzJC"),Te=n.n(S),Le=n.p+"assets/file/571094570298dba4fdfbefe4be80587c.png",Ae=n.p+"assets/file/001bd059c003a8d9b5f46d6fdef855f4.png",Re=P.default.div.withConfig({componentId:"sc-1b11op7-0"})(["cursor:pointer;position:absolute;left:50%;bottom:9px;transform:translateX(-50%);font-size:10px;padding:5px 8px;border-radius:8px;background:#fff;box-shadow:0px 2px 10px rgba(0,0,0,0.12);display:flex;align-items:center;&::after{content:' ';display:block;width:10px;height:10px;background:url('","');background-size:contain;margin-left:3px;}"," ",""],Le,function(e){var t=e.isFullScreen,e=e.theme.darkTheme;return Object(P.css)(["background:",";color:",';&::after{background:url("','");}'],e||t?"#3c3f43":"#fff",e||t?"rgba(56, 204, 227, 0.9)":"#38cce3",e||t?Ae:Le)},function(e){return e.prevPageLoading&&" bottom: 39px; "});function Me(){return Ot.a.createElement(He,null,Ot.a.createElement("img",{className:"icon",src:Ue,alt:""}))}function De(e){var t=e.anchorInfo,n=e.isFullScreen,a=e.rowRendererFunc,r=Object(yt.useState)(),o=(e=kt()(r,2))[0],i=e[1],c=Object(yt.useRef)(!1),l=Object(yt.useRef)(null),r=Object(yt.useCallback)(function(e){var t=Wt.a.getUserInfo();return e.filter(function(e){return!zt()(null==t?void 0:t.userBlackList,{user_id:e.userId})})},[]),e=Object(un.a)(),s=(t=Object(Ne.a)({vid:t.realtimePlaybackVid,messageList:o,msgFilter:r})).prevPageLoading,r=t.chatList,u=t.clear,f=t.onTimeUpdate,t=Object(yt.useCallback)(function(t){i(function(e){return e||!t?e:t})},[]);return Object(yt.useEffect)(function(){function e(){clearTimeout(l.current),c.current=!0,l.current=setTimeout(function(){c.current=!1},1e3),u()}return jt.h.on(jt.g.PLAYER_SEEK,e),function(){jt.h.off(jt.g.PLAYER_SEEK,e)}},[u]),Object(yt.useEffect)(function(){var e=Te()(function(e){null!=c&&c.current||f(e)},500);return jt.h.on(jt.g.PLAYER_PLAY_TIME_UPDATE,e),function(){jt.h.off(jt.g.PLAYER_PLAY_TIME_UPDATE,e)}},[f]),e=n?{darkTheme:!0,isFullScreen:!0,noNeedAnimation:!0}:Object.assign(Object.assign({},e),{noNeedAnimation:!0}),Ot.a.createElement(Ke,{prevPageLoading:s},s&&Ot.a.createElement(Me,null),Ot.a.createElement(sn.MsgList.Component,{ref:t,rowRenderFunc:a,action:e,chatList:r,gotoBtmRenderFunc:function(){return Ot.a.createElement(Re,{prevPageLoading:s,isFullScreen:n,onClick:function(){o&&o.clickToBottom()}},Object(Dt.f)("new_comment"))}}))}function wn(e){function r(e){return Math.floor((Date.now()-e)/1e3)}function o(e){At.a.handleDataCount(e)}function i(){m(2),localStorage.setItem(an.hb,"1")}function t(e){if(null!=e&&e.price&&0!==e.price&&Ft.a.getState().userFinance.account<e.price)return jt.h.emit(jt.g.HANDLE_POKE_TOPUP),0;!function(t,e){if(!v){if(x(!0),!y)return;e={cmd:It.nb,toName:p.name||"",toUserImg:p.avatar||"",toAvatarDecortaion:p.avatarDecorationid||0,toLevel:p.level||1,toId:p.anchorId,giftId:t.id,category:t.category,giftType:t.type,count:e,comboEffect:0,giftEffect:1};if(y.user_privilege&&y.user_privilege[l]?e.medals=y.user_privilege[l]:e.medals=[],k){var n,a="";for(n in k)k.hasOwnProperty(n)&&(a+="`".concat(n,"=").concat(k[n]));e.nonopara=a}tn.a.request(p.anchorId,e).then(function(e){return 0!==e.rst?(4===e.rst?jt.h.emit(jt.g.HANDLE_POKE_TOPUP):M.d.error(Object(Dt.f)("gift:send_failed")),!1):(o({lt:"click",event_id:"C_ASHOWROOM_POKE_GIFT_SUCCESS","action&watch_time":r(parseInt(localStorage.getItem(an.T)||"0",10)),live_id:p.logId,aid:p.anchorId,room_id:g,live_type:p.liveType,live_subtype:p.liveSubtype,poke_gift_id:_.giftId}),i(),x(!0),localStorage.setItem(an.Cb,"null"),e.exp&&Ft.a.dispatch(Object(We.c)({exp:e.exp})),e.is_level_up&&Ft.a.dispatch(Object(We.c)({level:e.new_level})),jt.h.emit(jt.g.UPDATE_USER_ACCOUNT,y.user_id),void jt.h.emit(jt.g.SEND_GIFT,t.id))}).catch(function(e){return D.a.log({"send-gift--err":e}),M.d.error(Object(Dt.f)("gift:send_timeout")),!1})}}(e,1)}var c=e.isFollow,l=e.anchorId,s=e.liveId,n=Object(yt.useState)(Object(Dt.f)("anchor_poke_user")),n=(e=kt()(n,2))[0],u=e[1],e=Object(yt.useState)(!1),a=(e=kt()(e,2))[0],f=e[1],e=Object(yt.useState)(0),d=(e=kt()(e,2))[0],m=e[1],p=(e=Object(yt.useContext)(Yt.b)).anchorInfo,g=e.roomId,e=Object(yt.useState)(!1),h=(e=kt()(e,2))[0],b=e[1],e=Object(yt.useState)(!1),v=(e=kt()(e,2))[0],x=e[1],e=Object(yt.useState)({type:1,giftId:0,giftPic:"",price:0,name:"name"}),_=(e=kt()(e,2))[0],E=e[1],k=Object(yt.useMemo)(function(){return{source_site:"poke"}},[]),y=Ft.a.getState().user,O=Object(yt.useMemo)(function(){return Date.now()},[]),w=Object(yt.useCallback)(function(){return Xe(void 0,void 0,void 0,Et.a.mark(function e(){var t,n,a;return Et.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return 0===c?(jt.h.emit(jt.g.COMMON_SYNC_FOLLOW),u(Object(Dt.f)("poke_back_and_follow"))):u(Object(Dt.f)("poke_back")),f(!0),e.next=4,Object(Pt.Lb)({anchorId:l,liveId:s});case 4:t=e.sent,h||clearTimeout(Be),n=parseInt(localStorage.getItem(an.Db)||"0",10),a=function(e){!e||1!==e.type&&2!==e.type?m(2):(E(e),m(1),localStorage.setItem(an.hb,"2"),localStorage.setItem(an.Cb,JSON.stringify(e)),o({lt:"click",event_id:"C_ASHOWROOM_POKE_GIFT_POPUP_EXPOSE","action&watch_time":r(parseInt(localStorage.getItem(an.T)||"0",10)),live_id:p.logId,aid:p.anchorId,room_id:g,live_type:p.liveType,live_subtype:p.liveSubtype,poke_gift_id:e.giftId}))},setTimeout(function(){0===n?(localStorage.setItem(an.Db,"1"),b(!0),setTimeout(function(){a(t)},1e3)):a(t)},0===n?2e3:0);case 9:case"end":return e.stop()}},e)}))},[l,p.anchorId,p.liveSubtype,p.liveType,p.logId,h,c,s,g]);return Object(yt.useEffect)(function(){1!==parseInt(localStorage.getItem(an.Db)||"0",10)?0===d&&(Be=setTimeout(function(){localStorage.setItem(an.Db,"1"),b(!0)},6e3)):m(2)},[]),Object(yt.useEffect)(function(){jt.h.on(jt.g.HANDLE_CHATLIST_TO_POP,w);var e=parseInt(localStorage.getItem(an.hb)||"0",10);return 1===e?(f(!0),m(2)):2===e&&(null!=(e=JSON.parse(localStorage.getItem(an.Cb)||"null"))&&e.giftId?(E(e),m(1)):m(2)),function(){jt.h.off(jt.g.HANDLE_CHATLIST_TO_POP,w)}},[]),0===d?Ot.a.createElement($e,{getBack:h},Ot.a.createElement(et,null,Ot.a.createElement("span",null),Ot.a.createElement("div",{className:"poke-text-box"},n)),!a&&Ot.a.createElement(tt,null,Ot.a.createElement("div",{className:"poke-btn",onClick:function(){return Xe(void 0,void 0,void 0,Et.a.mark(function e(){var t;return Et.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a)return e.abrupt("return");e.next=2;break;case 2:return jt.h.emit(jt.g.HANDLE_POKE_USER_TO_ANCHOR),t={toAnchorId:l,fromUserName:y.loginname,pokeType:0===c?1:0},e.next=6,Object(Pt.gc)(t);case 6:localStorage.setItem(an.hb,"1"),o({back_poke_time:r(O),messege_source_audience:0===c?"poke_back&follow_success":"poke_back_success",poke_bake_position:"popups"}),w();case 9:case"end":return e.stop()}},e)}))}},0===c?Object(Dt.f)("poke_back_and_follow_btn"):Object(Dt.f)("poke_back_btn")))):1===d?Ot.a.createElement(nt,null,Ot.a.createElement(j.b,{name:j.b.NAME.CLOSE,size:12,className:"close-icon",onClick:i}),Ot.a.createElement("div",{className:"gift-text"},1===_.type&&Object(Dt.f)("free_gift_text").replace("{{giftName}}",_.name),2===_.type&&Object(Dt.f)("pay_gift_text").replace("{{giftName}}",_.name)),Ot.a.createElement("div",{className:"send-gift-box"},Ot.a.createElement("div",{className:"left-box"},Ot.a.createElement("img",{src:_.giftPic,className:"gift-pic",alt:""}),Ot.a.createElement("div",{className:"gift-msg"},_.name,Ot.a.createElement("div",null,1===_.type&&Object(Dt.f)("time_to_free"),2===_.type&&Ot.a.createElement(Ot.a.Fragment,null,Ot.a.createElement("img",{src:qe,alt:""}),_.price)))),Ot.a.createElement("div",{className:"right-box",onClick:function(){o({lt:"click",event_id:"C_ASHOWROOM_POKE_GIFT_POPUPBTN_CLICK","action&watch_time":r(parseInt(localStorage.getItem(an.T)||"0",10)),live_id:p.logId,aid:p.anchorId,room_id:g,live_type:p.liveType,live_subtype:p.liveSubtype,poke_gift_id:_.giftId});var e,e=(e=_.giftId,Ft.a.getState().configure.gift.giftIdMapDetail[e]);t(e)}},Object(Dt.f)("poke_send_gift")))):null}function Pe(e){return rt.a.request({method:rt.a.METHOD.GET,path:"/nonolive/rankserv/liveRoom/weekTop3",params:{host_id:e}})}function Fe(e){return rt.a.request({method:rt.a.METHOD.GET,path:"/nonolive/rankserv/liveRoom/giftRanking",params:{host_id:e}})}function Ge(e){return rt.a.request({method:rt.a.METHOD.GET,path:"/nonolive/rankserv/gift/rankV3/whitelist",params:{host_id:e}})}var Be,ze,Ue=n.p+"assets/svg/2a0259e781c492c2636eec57b6b48b2a.svg",He=P.default.div.withConfig({componentId:"sc-5s62w0-0"})(["display:flex;justify-content:center;align-items:center;.icon{height:40px;display:block;margin:0 auto;}"]),Ke=P.default.div.withConfig({componentId:"sc-5s62w0-1"})(["height:100%;",""],function(e){return e.prevPageLoading&&"\n    .message-list-container .new-message-tip {\n      bottom: 49px;\n    }\n  "}),Ye=P.default.div.withConfig({componentId:"mlp9j-0"})(["height:100%;display:flex;flex-direction:column;.chat-panel{padding:0;display:flex;flex-direction:column;height:100%;background-color:",";}.header{background-color:",";border-bottom:",";}.chat-list-wrapper{flex:1;min-height:0;padding-top:25px;overflow:hidden;}.footer{padding-top:15px;padding-bottom:15px;width:100%;padding-left:25px;padding-right:25px;border-top:",";display:flex;justify-content:center;align-items:center;button{width:100%;height:50px;border:1px solid rgba(242,242,242,1);background-color:",";border-radius:4px;color:",";font-size:14px;&:hover{color:#20bef3;}","}}.close-btn{display:none;cursor:pointer;width:26px;height:36px;background:url(",") no-repeat;background-size:26px 26px;position:absolute;right:0;top:-36px;}.pay-message-edit{display:none;}"," ",""],function(e){return e.theme.darkTheme?"#15191b":"#f8f8f8"},function(e){return e.theme.darkTheme?"#202526":"#fff"},function(e){return e.theme.darkTheme?"1px solid rgba(239, 239, 239, 0.2)":"1px solid rgba(237, 239, 240, 1)"},function(e){return e.theme.darkTheme?"1px solid rgba(239, 239, 239, 0.2)":"1px solid rgba(237, 239, 240, 1)"},function(e){return e.theme.darkTheme?"rgba(46, 48, 51, 1)":"#fff"},function(e){return e.theme.darkTheme?"rgba(255, 255, 255, 0.9)":"#333333"},function(e){return e.theme.darkTheme&&"\n        border: none;\n        &:hover {\n          color: #20bef3;\n        }\n     "},w,function(e){return e.isFullScreen&&"\n    cursor: move;\n    position: fixed;\n    right: 50px;\n    bottom: 200px;\n    width: 360px;\n    height: 460px;\n    &:hover {\n      .chat-panel {\n        background-color: rgba(0, 0, 0, 0.5);\n      }\n      .close-btn {\n        display: block;\n      }\n    }\n    .chat-panel {\n       padding-bottom: 0;\n       border: none;\n       padding-top: 0;\n       background-color: transparent;\n       border-radius: 4px;\n       .message-list-container {\n         width: 100%;\n         height: 100%;\n         background-color: transparent;\n       }\n       .chat-item .text {\n         color: #EFEFEF!important;\n       }\n    }\n    .footer {\n      border: none;\n      padding-left: 10px;\n      padding-right: 10px;\n      button {\n        border: none;\n        background-color:rgba(255,255,255,.1);\n        color: #EFEFEF;\n      }\n    }\n  "},function(e){return e.isFullScreen&&e.focus&&"\n    background-color: rgba(0, 0, 0, 0.5);\n    .close-btn {\n      display: block;\n    }\n  "}),jn=Ot.a.forwardRef(function(e,t){var n=e.messageListComponent,a=e.rowRendererFunc,r=Object(yt.useState)(Kt.g.REALTIME_PLAYBACK_PLAYBACK),o=kt()(r,2),i=o[0],c=o[1],l=Object(yt.useState)(!0),s=kt()(l,2),u=s[0],f=s[1],d=Object(yt.useState)(!1),m=kt()(d,2),e=m[0],p=m[1],g=Object(yt.useRef)(null),h=Object(yt.useRef)({startX:0,startY:0,startLeft:0,startTop:0}),b=Object(yt.useRef)(!1),v=Object(yt.useRef)(!1),r=Object(yt.useContext)(Yt.b),o=r.roomType,l=r.anchorInfo,s=r.layout,d=r.roomId,m=s===Kt.h.FULLSCREEN,r=Object(yt.useCallback)(function(){var e=i===Kt.g.REALTIME_PLAYBACK_LIVE?Kt.g.REALTIME_PLAYBACK_PLAYBACK:Kt.g.REALTIME_PLAYBACK_LIVE;c(e),jt.h.emit(jt.g.TOOGLE_CHAT_PANEL_TYPE,e),e===Kt.g.REALTIME_PLAYBACK_PLAYBACK?Se.a.glean({lt:"pcclick",ct:"click",dt:"liveroom",et:"playbackchat"}):Se.a.glean({lt:"pcclick",ct:"click",dt:"liveroom",et:"currentchat"})},[i]),s=Object(yt.useCallback)(function(){f(!1),jt.h.emit(jt.g.CHAT_PANEL_CLOSE,!1)},[]);return Object(yt.useEffect)(function(){function e(e){p(!!v.current||e)}function t(e){f(e)}return jt.h.on(jt.g.PLAYER_FOCUS_CHANGE,e),jt.h.on(jt.g.CHAT_PANEL_ENABLE_CHANGE,t),function(){jt.h.off(jt.g.PLAYER_FOCUS_CHANGE,e),jt.h.off(jt.g.CHAT_PANEL_ENABLE_CHANGE,t)}},[]),Object(yt.useEffect)(function(){var r=g.current;if(r){var e=function(e){var t=getComputedStyle(r);b.current=!0,h.current={startX:e.clientX,startY:e.clientY,startLeft:parseFloat(t.left),startTop:parseFloat(t.top)}},t=function(e){var t,n,a;b.current&&(t=getComputedStyle(r),a=h.current,n=e.clientX-(a.startX-a.startLeft),a=e.clientY-(a.startY-a.startTop),0<n&&n<window.screen.width-parseFloat(t.width)&&(r.style.left="".concat(n,"px")),0<a&&a<window.screen.height-parseFloat(t.height)&&(r.style.top="".concat(a,"px")))},n=function(){b.current=!1};return r.addEventListener("mousedown",e),r.addEventListener("mouseenter",function(){v.current=!0,p(!0)}),r.addEventListener("mouseleave",function(){v.current=!1,p(!1)}),document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),function(){r.removeEventListener("mousedown",e),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n)}}},[g]),Object(yt.useEffect)(function(){return function(){jt.h.emit(jt.g.TOOGLE_CHAT_PANEL_TYPE,Kt.g.LIVE)}},[]),Object(yt.useImperativeHandle)(t,function(){return g.current}),u?Ot.a.createElement(Ye,{isFullScreen:m,focus:e,ref:g},Ot.a.createElement("div",{className:"chat-panel"},Ot.a.createElement(Tt,null),o===nn.d.NORMAL||m?null:Ot.a.createElement("div",{className:"header"},Ot.a.createElement(_n.a,{text:l?l.liveIntro||Object(Dt.f)("anounce_empty_text"):"",type:_n.a.TYPE_LIVE})),i===Kt.g.REALTIME_PLAYBACK_LIVE?Ot.a.createElement(En.a,{roomId:d,isLiving:l.living}):null,!m&&Ot.a.createElement(rn,{anchorInfo:l}),Ot.a.createElement("div",{className:"chat-list-wrapper",id:"fullscreen-chatpanel"},i===Kt.g.REALTIME_PLAYBACK_PLAYBACK&&Ot.a.createElement(De,{rowRendererFunc:a,anchorInfo:l,isFullScreen:m}),i===Kt.g.REALTIME_PLAYBACK_LIVE&&n()),Ot.a.createElement("div",{id:"live-playback-footer",className:"footer"},Ot.a.createElement("button",{type:"button",onClick:r},i===Kt.g.REALTIME_PLAYBACK_PLAYBACK?Object(Dt.f)("room_chat_panel_switch_to_live"):Object(Dt.f)("room_chat_panel_switch_to_playback")))),Ot.a.createElement("div",{className:"close-btn",onClick:s})):null}),Cn=n("IM9O"),We=n("bUZ1"),qe=n.p+"assets/file/640bdc40a3d0fd78e9229a7751dc995d.png",Ve=n.p+"assets/file/0569844bca49260b0422ed60cba8579a.gif",Je=n.p+"assets/file/33bb45074f6bf7b82ead28b9eedcc713.gif",Xe=function(e,i,c,l){return new(c=c||Promise)(function(n,t){function a(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(a,r)}o((l=l.apply(e,i||[])).next())})},Qe=Object(P.keyframes)(["from{left:100%;}to{left:0;}"]),Ze=Object(P.keyframes)(["from{left:0;}to{left:100%;opacity:0;}"]),$e=P.default.div.withConfig({componentId:"sc-1o8qeu9-0"})(["width:350px;min-height:60px;box-shadow:0px 2px 6px rgba(0,0,0,0.08);opacity:1;border-radius:4px;padding:0 10px;box-sizing:border-box;position:absolute;bottom:143px;margin-left:10px;overflow:hidden;z-index:",";",""],l.a.POKE_POPOUT,function(e){var t=e.theme.darkTheme,e=e.getBack;return Object(P.css)(["background:",";animation:"," 0.5s linear forwards;"],t?"#2E3033":"#ffffff",e?Ze:Qe)}),et=P.default.div.withConfig({componentId:"sc-1o8qeu9-1"})(["display:flex;height:100%;align-items:center;justify-content:center;margin-top:5px;.poke-text-box{font-size:14px;"," margin-left:8px;}span{width:50px;height:50px;"," background-size:contain;background-repeat:no-repeat;flex-shrink:0;}"],function(e){e=e.theme.darkTheme;return Object(P.css)(["color:",";"],e?"rgba(255,255,255,.9)":"#333")},function(e){e=e.theme.darkTheme;return Object(P.css)(["background-image:",";"],"url(".concat(e?Je:Ve,")"))}),tt=P.default.div.withConfig({componentId:"sc-1o8qeu9-2"})(["display:flex;justify-content:center;margin:5px 0 10px 0;.poke-btn{height:36px;padding:0 16px;background:#20bef3;border-radius:26px;line-height:36px;color:#fff;font-size:14px;cursor:pointer;}"]),nt=P.default.div.withConfig({componentId:"sc-1o8qeu9-3"})(["width:350px;box-shadow:0px 2px 6px rgba(0,0,0,0.08);border-radius:4px;position:absolute;bottom:143px;margin-left:10px;z-index:",";overflow:hidden;"," .close-icon{"," position:absolute;right:10px;top:10px;cursor:pointer;}.gift-text{font-size:16px;line-height:22px;"," margin:30px 0 20px;text-align:center;padding:0 10px;box-sizing:border-box;}.send-gift-box{width:329px;height:60px;"," border-radius:4px;margin:0 auto 10px;display:flex;padding:0 10px;box-sizing:border-box;justify-content:space-between;align-items:center;.left-box{display:flex;align-items:center;.gift-pic{width:63px;height:50px;margin-right:5px;flex-shrink:0;}.gift-msg{font-size:14px;"," div{"," line-height:17px;font-size:12px;margin-top:4px;img{width:16px;vertical-align:middle;margin-right:5px;}}}}.right-box{height:36px;background:#20bef3;border-radius:66px;line-height:36px;padding:0 20px;text-align:center;font-size:14px;color:#fff;cursor:pointer;flex-shrink:0;}}"],l.a.POKE_POPOUT,function(e){e=e.theme.darkTheme;return Object(P.css)(["background:",";"],e?"#2E3033":"#ffffff")},function(e){e=e.theme.darkTheme;return Object(P.css)(["color:",";"],e?"rgba(255,255,255,.5)":"#999")},function(e){e=e.theme.darkTheme;return Object(P.css)(["color:",";"],e?"rgba(255,255,255,.9)":"#333")},function(e){e=e.theme.darkTheme;return Object(P.css)(["background:",";"],e?"#373A3D":"#f5f5f5")},function(e){e=e.theme.darkTheme;return Object(P.css)(["color:",";"],e?"rgba(255,255,255,.9)":"#333333")},function(e){e=e.theme.darkTheme;return Object(P.css)(["color:",";"],e?"rgba(255,255,255,.5)":"#999999")}),at=n("WlxL"),rt=n("jp0t"),a=n("lSNA"),o=n.n(a),ot=n.p+"assets/file/a4c98ee4322c6692b3a36f22d4834d98.png",it=n.p+"assets/file/5334c75f667c85900c1162b113007f6e.png";(i=ze=ze||{}).COIN="coin",i.STAR="star";var ct,lt=(s={},o()(s,ze.COIN,{icon:ot}),o()(s,ze.STAR,{icon:it}),s);(c=ct=ct||{}).FANS_GROUP="fans_group",c.DAILY="daily",c.WEEKLY="weekly",c.LORD_WEEKLY="lord_weekly";function st(e){var t=e.currentLeaderboard,n=e.leaderboardList,a=e.onLeaderboardChange;return Ot.a.createElement(dt,null,n.map(function(e){return Ot.a.createElement(mt,{key:e,active:e===t&&1<n.length,onClick:function(){return a(e)}},Ot.a.createElement("div",{className:"text"},ft[e].label))}))}var ut,ft=(f={},o()(f,ct.FANS_GROUP,{label:Object(Dt.f)("fans_group_rank"),order:1}),o()(f,ct.DAILY,{label:Object(Dt.f)("rank_today"),order:2}),o()(f,ct.WEEKLY,{label:Object(Dt.f)("rank_this_week"),order:3}),o()(f,ct.LORD_WEEKLY,{label:Object(Dt.f)("week_rank_title"),order:4}),f),dt=P.default.div.withConfig({componentId:"sc-1aocax9-0"})(["z-index:22;display:flex;align-items:center;border-width:0 0 1px 0;border-style:solid;",""],function(e){e=e.theme.darkTheme;return Object(P.css)(["background-color:",";border-color:",";"],e?"#2E3033":"#fff",e?"#414448":"#EDEFF0")}),mt=P.default.div.withConfig({componentId:"sc-1aocax9-1"})(["flex:1;min-width:0;cursor:pointer;text-align:center;> .text{display:inline-block;height:","px;line-height:","px;font-size:12px;border-width:0 0 2px 0;border-style:solid;}",""],34,34,function(e){e=e.active;return Object(P.css)(["> .text{color:",";border-color:",";}"],e?"var(--color-primary)":"var(--text-color-secondary)",e?"var(--color-primary)":"transparent")}),g=n.p+"assets/file/bb9138ba6a88337f924fbd8ab7a2ad24.png",S=n.p+"assets/file/3607b8d9cb53c64f5775e42b2e65891d.png",w=n.p+"assets/file/985962dc109cc8605cd1201dd17b5dfa.png";(a=ut=ut||{}).FIRST="first",a.SECOND="second",a.THIRD="third";function pt(e){var t=e.user,n=e.rankType,a=e.rank,e=function(){t&&jt.h.emit(jt.g.SHOW_USER_CARD,t.id)},n=lt[n].icon,a=ht[a].crown;return Ot.a.createElement(bt,{crown:a},Ot.a.createElement("div",{className:"avatar-box",onClick:e},Ot.a.createElement(C.b,{src:t?t.avatar:"",size:34})),Ot.a.createElement("div",{className:"info"},Ot.a.createElement("div",{className:"name",onClick:e},t?t.name:Object(Dt.f)("rank_seat_empty")),Ot.a.createElement("div",{className:"contribution-box"},Ot.a.createElement("img",{className:"noci",src:n,alt:"contribution"}),Ot.a.createElement("div",{className:"contribution"},t?t.contribution:"-"))))}function gt(e){var t=e.rankType,n=e.first,a=e.second,e=e.third;return Ot.a.createElement(vt,null,Ot.a.createElement(pt,{user:n,rankType:t,rank:ut.FIRST}),Ot.a.createElement(pt,{user:a,rankType:t,rank:ut.SECOND}),Ot.a.createElement(pt,{user:e,rankType:t,rank:ut.THIRD}))}var ht=(i={},o()(i,ut.FIRST,{crown:g}),o()(i,ut.SECOND,{crown:S}),o()(i,ut.THIRD,{crown:w}),i),bt=P.default.div.withConfig({componentId:"sc-1pn0rb1-0"})(["flex:1;min-width:0;display:flex;align-items:center;> .avatar-box{cursor:pointer;font-size:0;padding:12px 6px 2px 6px;background-size:cover;background-position:center;}> .info{flex:1;min-width:0;padding:12px 0 0 0;> .name{cursor:pointer;font-size:13px;color:var(--text-color-primary);","}> .contribution-box{margin-top:4px;display:flex;align-items:center;> .noci{width:14px;height:14px;}> .contribution{margin-left:3px;font-size:12px;color:var(--text-color-secondary);}}}",""],O.a,function(e){e=e.crown;return Object(P.css)(["> .avatar-box{background-image:url(",");}"],e)}),vt=P.default.div.withConfig({componentId:"sc-1x1t07b-0"})(["height:70px;display:flex;padding:0 10px;> *{&:not(:last-child){margin-right:5px;}}",""],function(e){e=e.theme.darkTheme;return Object(P.css)(["background-color:",";"],e?"#2E3033":"#fff")}),xt=n("II8z");function In(a){var e=Object(yt.useState)([]),t=kt()(e,2),n=t[0],r=t[1],e=Object(yt.useState)(0),e=(t=kt()(e,2))[0],o=t[1];return Object(yt.useEffect)(function(){var n;return function t(){Object(at.a)(xt.g,{times:3})(a).promise.then(function(e){o(e.end_time),r((e.weekly_rank||[]).map(function(e){return{id:e.user_id,name:e.user_name,avatar:e.avatar,level:e.level,fansGroupLevel:e.fans_group_level,fansGroupName:e.fans_group_name,contribution:Ln(e.intimacy)}}));e=e.end_time-Date.now();0<e&&(n=window.setTimeout(t,e))}).catch(function(e){return D.a.error(e,{description:"获取粉丝团排行榜失败",report:!0})})}(),function(){return window.clearTimeout(n)}},[a]),Object(yt.useEffect)(function(){function e(e){var e=(t=e.data).rid,t=t.data;if("".concat(e)==="".concat(a))return r((t.weekly_rank||[]).map(function(e){return{id:e.user_id,name:e.user_name,avatar:e.avatar,level:e.level,fansGroupLevel:e.fans_group_level,fansGroupName:e.fans_group_name,contribution:Ln(e.intimacy)}}))}return St.a.on(Ct.d.RANK_PUSH,e),function(){return St.a.off(Ct.d.RANK_PUSH,e)}},[a]),{rankList:n,endTimestamp:e}}function Sn(e){return Ot.a.createElement(Rn,e,Ot.a.createElement("div",{className:"text"},Object(Dt.f)("cmm_more")),Ot.a.createElement("img",{className:"noci",src:An,alt:"more"}))}function Nn(e){function t(){a&&jt.h.emit(jt.g.SHOW_USER_CARD,a.id)}var n=e.rank,a=e.user,e=Dn[n];return Ot.a.createElement(Pn,null,Ot.a.createElement("div",{className:"rank"},e?Ot.a.createElement("img",{src:e.icon,alt:"rank"}):n),Ot.a.createElement(C.b,{className:"avatar",src:a?a.avatar:"",size:32,onClick:t}),Ot.a.createElement("div",{className:"info"},Ot.a.createElement("div",{className:"name",onClick:t},a?a.name:Object(Dt.f)("rank_seat_empty")),a?Ot.a.createElement(Mn.a,{fansBadge:{fansGroupLevel:a.fansGroupLevel,name:a.fansGroupName}}):null),Ot.a.createElement("div",{className:"contribution-box"},Ot.a.createElement("img",{className:"noci",src:it,alt:"contribution"}),Ot.a.createElement("div",{className:"contribution"},a?a.contribution:"-")))}function Tn(e){return Ot.a.createElement(Gn,e,Ot.a.createElement("div",{className:"text"},Object(Dt.f)("profile_introduce_fold")),Ot.a.createElement("img",{className:"noci",src:Fn,alt:"collapse"}))}var Ln=function(e){return 1e3<=e?"".concat(+(e/1e3).toFixed(2),"K"):e.toString()},An=n.p+"assets/file/492e02b3057ca27f3d1dc420972c076a.png",Rn=P.default.div.withConfig({componentId:"sc-9599g4-0"})(["z-index:1;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:10px 0;> .text{color:var(--text-color-secondary);font-size:12px;}> .noci{margin-left:5px;width:12px;height:12px;}",""],function(e){e=e.theme.darkTheme;return Object(P.css)(["background-color:",";"],e?"#2E3033":"#fff")}),Mn=n("WGtp"),s=n.p+"assets/file/5854ca8382ab23f4c221e7759f171ebf.png",c=n.p+"assets/file/1eeff081e0bdc7c3e7917faf34c9011a.png",f=n.p+"assets/file/7907753b7e1747e856ba834ba834558e.png",Dn={1:{icon:s},2:{icon:c},3:{icon:f}},Pn=P.default.div.withConfig({componentId:"sc-8aibi1-0"})(["height:50px;display:flex;align-items:center;padding-right:20px;> *{&:not(:last-child){margin-right:5px;}}> .rank{width:60px;text-align:center;color:var(--text-color-primary);font-size:12px;> img{width:20px;height:20px;}}> .avatar{cursor:pointer;}> .info{flex:1;min-width:0;> .name{cursor:pointer;font-size:12px;color:var(--text-color-secondary);","}}> .contribution-box{width:80px;display:flex;align-items:center;> .noci{width:16px;height:16px;}> .contribution{margin-left:5px;font-size:12px;color:var(--text-color-primary);}}"],O.a),Fn=n.p+"assets/file/7b00ccc898000a8449ca6863986836a7.png",Gn=P.default.div.withConfig({componentId:"b5qrkf-0"})(["z-index:1;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:10px 0;> .text{color:var(--text-color-secondary);font-size:12px;}> .noci{width:12px;height:12px;}",""],function(e){e=e.theme.darkTheme;return Object(P.css)(["background-color:",";"],e?"#2E3033":"#fff")});function Bn(e){var n=e.endTimestamp,t=Object(yt.useState)(ca),t=(e=kt()(t,2))[0],a=e[1];return Object(yt.useEffect)(function(){function e(){var e=n-Date.now();return e<=0?(a(ca),window.clearInterval(t)):a(oa(e))}var t;return e(),t=window.setInterval(e,1e3),function(){return window.clearInterval(t)}},[n]),Ot.a.createElement(ia,null,t.date,Ot.a.createElement("span",{className:"highlight"},Object(Dt.f)("week_rank_unit_day")),t.hour,Ot.a.createElement("span",{className:"highlight"},Object(Dt.f)("week_rank_unit_hour")),t.minute,Ot.a.createElement("span",{className:"highlight"},Object(Dt.f)("week_rank_unit_minute")),t.second,Ot.a.createElement("span",{className:"highlight"},Object(Dt.f)("week_rank_unit_second")))}function zn(e){var n=e.rankList,t=e.onClose,a=e.endTimestamp,e=la(e,["rankList","onClose","endTimestamp"]);return Ot.a.createElement(ua,e,Ot.a.createElement(Bn,{endTimestamp:a}),Ot.a.createElement("div",{className:"list"},sa.map(function(e,t){return Ot.a.createElement(Nn,{key:t,rank:t+1,user:n[t]})})),Ot.a.createElement(Tn,{onClick:t}))}function Un(e){var t=e.roomId,n=In(t),a=n.rankList,e=n.endTimestamp,t=Object(yt.useState)(!1),t=(n=kt()(t,2))[0],r=n[1];return Ot.a.createElement(fa,null,Ot.a.createElement(gt,{rankType:ze.STAR,first:a[0],second:a[1],third:a[2]}),Ot.a.createElement(Sn,{className:"more",onClick:function(){return r(!0)}}),t?Ot.a.createElement(zn,{className:"rank-list",rankList:a,endTimestamp:e,onClose:function(){return r(!1)}}):null)}function Hn(a){var e=Object(yt.useState)([]),t=kt()(e,2),n=t[0],r=t[1],e=Object(yt.useState)(0),e=(t=kt()(e,2))[0],o=t[1];return Object(yt.useEffect)(function(){var n;return function t(){return Object(at.a)(Pt.jb,{times:3})({roomId:a,type:0,limit:3}).promise.then(function(e){o(e.day_end_time),r((e.now_top||[]).map(function(e){return{id:e.user_id,name:e.loginname,avatar:e.avatar,level:e.level,contribution:Ln(e.price_sum)}}));e=e.day_end_time-Date.now();0<e&&(n=window.setTimeout(t,e))}).catch(function(e){return D.a.error(e,{description:"获取直播间日榜数据失败",report:!0})})}(),function(){return window.clearTimeout(n)}},[a]),Object(yt.useEffect)(function(){function e(e){e=e.msg_data,o(e.day_end_time),r((e.now_top||[]).map(function(e){return{id:e.user_id,name:e.loginname,avatar:e.avatar,level:e.level,contribution:Ln(e.price_sum)}}))}return ln.b.on(a,cn.e,e),function(){return ln.b.off(a,cn.e,e)}},[a]),{topThree:n,endTimestamp:e}}function Kn(e){function t(){a&&jt.h.emit(jt.g.SHOW_USER_CARD,a.id)}var n=e.rank,a=e.user,e=ma[n];return Ot.a.createElement(pa,null,Ot.a.createElement("div",{className:"rank"},e?Ot.a.createElement("img",{src:e.icon,alt:"rank"}):n),Ot.a.createElement(C.b,{className:"avatar",src:a?a.avatar:"",size:32,onClick:t}),Ot.a.createElement("div",{className:"info"},a?Ot.a.createElement(da.a,{level:a.level}):null,Ot.a.createElement("div",{className:"name",onClick:t},a?a.name:Object(Dt.f)("rank_seat_empty"))),Ot.a.createElement("div",{className:"contribution-box"},Ot.a.createElement("img",{className:"noci",src:ot,alt:"contribution"}),Ot.a.createElement("div",{className:"contribution"},a?a.contribution:"-")))}function Yn(e){var t,n,a,r=e.roomId,o=e.onClose,i=e.endTimestamp,e=(t=r,e=Object(yt.useState)([]),r=kt()(e,2),e=r[0],n=r[1],a=Object(yt.useCallback)(function(){return Object(at.a)(Pt.jb,{times:3})({roomId:t,type:0,limit:10}).promise.then(function(e){return n((e.now_top||[]).map(function(e){return{id:e.user_id,name:e.loginname,avatar:e.avatar,level:e.level,contribution:Ln(e.price_sum)}}))}).catch(function(e){return D.a.error(e,{description:"获取排行榜日榜失败",report:!0})})},[t]),Object(yt.useEffect)(function(){a()},[a]),e);return Ot.a.createElement(va,{rankList:e,onClose:o,endTimestamp:i})}function Wn(e){var t=e.roomId,n=Hn(t),a=n.topThree,r=n.endTimestamp,e=Object(yt.useState)(!1),e=(n=kt()(e,2))[0],o=n[1];return Ot.a.createElement(xa,null,Ot.a.createElement(gt,{rankType:ze.COIN,first:a[0],second:a[1],third:a[2]}),Ot.a.createElement(Sn,{className:"more",onClick:function(){return o(!0)}}),e?Ot.a.createElement(Yn,{roomId:t,onClose:function(){return o(!1)},endTimestamp:r}):null)}function qn(a){var e=Object(yt.useState)([]),t=kt()(e,2),n=t[0],r=t[1],e=Object(yt.useState)(0),e=(t=kt()(e,2))[0],o=t[1];return Object(yt.useEffect)(function(){var n;return function t(){return Object(at.a)(Pt.jb,{times:3})({roomId:a,type:1,limit:3}).promise.then(function(e){o(e.week_end_time),r((e.week_top||[]).map(function(e){return{id:e.user_id,name:e.loginname,avatar:e.avatar,level:e.level,contribution:Ln(e.price_sum)}}));e=e.week_end_time-Date.now();0<e&&(n=window.setTimeout(t,e))}).catch(function(e){return D.a.error(e,{description:"获取直播间周榜数据失败",report:!0})})}(),function(){return window.clearTimeout(n)}},[a]),Object(yt.useEffect)(function(){function e(e){e=e.msg_data,o(e.week_end_time),r((e.week_top||[]).map(function(e){return{id:e.user_id,name:e.loginname,avatar:e.avatar,level:e.level,contribution:Ln(e.price_sum)}}))}return ln.b.on(a,cn.e,e),function(){return ln.b.off(a,cn.e,e)}},[a]),{topThree:n,endTimestamp:e}}function Vn(e){var t,n,a,r=e.roomId,o=e.onClose,i=e.endTimestamp,e=(t=r,e=Object(yt.useState)([]),r=kt()(e,2),e=r[0],n=r[1],a=Object(yt.useCallback)(function(){return Object(at.a)(Pt.jb,{times:3})({roomId:t,type:1,limit:10}).promise.then(function(e){return n((e.week_top||[]).map(function(e){return{id:e.user_id,name:e.loginname,avatar:e.avatar,level:e.level,contribution:Ln(e.price_sum)}}))}).catch(function(e){return D.a.error(e,{description:"获取排行榜周榜失败",report:!0})})},[t]),Object(yt.useEffect)(function(){a()},[a]),e);return Ot.a.createElement(_a,{rankList:e,onClose:o,endTimestamp:i})}function Jn(e){var t=e.roomId,n=qn(t),a=n.topThree,r=n.endTimestamp,e=Object(yt.useState)(!1),e=(n=kt()(e,2))[0],o=n[1];return Ot.a.createElement(Ea,null,Ot.a.createElement(gt,{rankType:ze.COIN,first:a[0],second:a[1],third:a[2]}),Ot.a.createElement(Sn,{className:"more",onClick:function(){return o(!0)}}),e?Ot.a.createElement(Vn,{roomId:t,endTimestamp:r,onClose:function(){return o(!1)}}):null)}function Xn(t){var e=Object(yt.useState)([]),n=kt()(e,2),e=n[0],a=n[1];return Object(yt.useEffect)(function(){Object(at.a)(Pe,{times:3})(t).promise.then(function(e){return a((e.top_three||[]).map(function(e){return{id:e.user_id,name:e.name,avatar:e.avatar,level:e.user_level,contribution:Ln(e.account)}}))}).catch(function(e){return D.a.error(e,{description:"获取土豪周榜前三失败",report:!0})});function e(e){(e=e.msg_data)&&e.top_three_list&&a(e.top_three_list.map(function(e){return{id:e.user_id,name:e.name,avatar:e.avatar,level:e.user_level,contribution:Ln(e.account)}}))}return ln.b.on(t,cn.f,e),function(){return ln.b.off(t,cn.f,e)}},[t]),e}function Qn(e){return Ot.a.createElement(wa,e,Ot.a.createElement("img",{src:Oa,alt:"collapse"}))}function Zn(e){return e=e.onClose,Ot.a.createElement(ja,null,Ot.a.createElement(ya.a,null),Ot.a.createElement(Qn,{onClick:e}))}function $n(e){var t=e.error,n=e.retry,e=e.onClose;return Ot.a.createElement(Ia,null,Ot.a.createElement(Ca.a,{errorMessage:t.message,retry:n}),Ot.a.createElement(Qn,{onClick:e}))}function ea(e){var t=e.icon,n=e.label,e=e.children;return Ot.a.createElement(Na,null,Ot.a.createElement("div",{className:"left"},Ot.a.createElement("img",{className:"badge",src:t,alt:"rank"}),Ot.a.createElement("div",{className:"title"},n)),e)}function ta(e){var n=e.endTimestamp,t=Object(yt.useState)(Ta),t=(e=kt()(t,2))[0],a=e[1];return Object(yt.useEffect)(function(){function e(){var e=n-Date.now();return e<=0?(a(Ta),window.clearInterval(t)):a(oa(e))}var t;return e(),t=window.setInterval(e,1e3),function(){return window.clearInterval(t)}},[n]),Ot.a.createElement(ea,{icon:Sa,label:Object(Dt.f)("week_rank_title")},Ot.a.createElement(La,null,Ot.a.createElement("span",{className:"number"},t.date),Ot.a.createElement("span",{className:"unit"},Object(Dt.f)("week_rank_unit_day")),Ot.a.createElement("span",{className:"number"},t.hour),Ot.a.createElement("span",{className:"unit"},Object(Dt.f)("week_rank_unit_hour")),Ot.a.createElement("span",{className:"number"},t.minute),Ot.a.createElement("span",{className:"unit"},Object(Dt.f)("week_rank_unit_minute"))))}function na(e){var t=e.rank,n=e.userId,a=e.avatar,r=e.level,o=e.name,i=e.contribution,e=function(){n&&jt.h.emit(jt.g.SHOW_USER_CARD,n)};return Ot.a.createElement(Aa,null,Ot.a.createElement("div",{className:"rank"},999<t?"999+":t),Ot.a.createElement(C.b,{className:"avatar",src:a,onClick:e}),r?Ot.a.createElement(da.a,{level:r}):null,Ot.a.createElement("div",{className:"name",onClick:e},o||"----"),Ot.a.createElement("div",{className:"contribution-box"},Ot.a.createElement("img",{className:"noci",src:ot,alt:"contribution"}),Ot.a.createElement("div",{className:"contribution"},i||"----")))}function aa(e){return(e=e.self)?Ot.a.createElement(Ra,null,Ot.a.createElement(na,{userId:e.user_id,rank:e.user_rank,avatar:e.avatar,level:e.user_level,name:e.name,contribution:e.account})):null}var ra,oa=function(e){var t=Math.floor(e%864e5/36e5),n=Math.floor(e%36e5/6e4),a=Math.floor(e%6e4/1e3);return{date:Math.floor(e/864e5).toString(),hour:t<10?"0".concat(t):t.toString(),minute:n<10?"0".concat(n):n.toString(),second:a<10?"0".concat(a):a.toString()}},ia=P.default.div.withConfig({componentId:"rlt6nl-0"})(["height:32px;line-height:32px;padding:0 20px;font-size:12px;text-align:right;color:var(--text-color-secondary);> .highlight{color:var(--color-primary);margin:0 2px;}"]),ca={date:"0",hour:"00",minute:"00",second:"00"},la=function(e,t){var n={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},sa=new Array(10).fill(0),ua=P.default.div.withConfig({componentId:"cfn88l-0"})(["",""],function(e){e=e.theme.darkTheme;return Object(P.css)(["background-color:",";"],e?"#2E3033":"#fff")}),fa=P.default.div.withConfig({componentId:"sc-1ovyqxv-0"})(["z-index:21;position:relative;overflow:visible;> .more{z-index:1;display:none;position:absolute;top:100%;left:0;width:100%;}> .rank-list{z-index:2;position:absolute;top:0;left:0;width:100%;}&:hover{> .more{display:flex;}}"]),da=n("t3Xz"),ma={1:{icon:s},2:{icon:c},3:{icon:f}},pa=P.default.div.withConfig({componentId:"sc-9zdlbf-0"})(["height:45px;display:flex;align-items:center;padding-right:20px;> *{&:not(:last-child){margin-right:5px;}}> .rank{width:60px;text-align:center;color:var(--text-color-primary);font-size:12px;> img{width:20px;height:20px;}}> .avatar{cursor:pointer;}> .info{flex:1;min-width:0;display:flex;align-items:center;> *{&:not(:last-child){margin-right:5px;}}> .name{cursor:pointer;font-size:12px;color:var(--text-color-secondary);","}}> .contribution-box{width:80px;display:flex;align-items:center;> .noci{width:16px;height:16px;}> .contribution{margin-left:5px;font-size:12px;color:var(--text-color-primary);}}"],O.a),ga=function(e,t){var n={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},ha=new Array(10).fill(0),ba=P.default.div.withConfig({componentId:"sc-127w67p-0"})(["",""],function(e){e=e.theme.darkTheme;return Object(P.css)(["background-color:",";"],e?"#2E3033":"#fff")}),a=function(e){var n=e.rankList,t=e.onClose,a=e.endTimestamp,e=ga(e,["rankList","onClose","endTimestamp"]);return Ot.a.createElement(ba,e,Ot.a.createElement(Bn,{endTimestamp:a}),Ot.a.createElement("div",{className:"list"},ha.map(function(e,t){return Ot.a.createElement(Kn,{key:t,rank:t+1,user:n[t]})})),Ot.a.createElement(Tn,{onClick:t}))},va=Object(P.default)(a).withConfig({componentId:"sc-1khxqih-0"})(["z-index:2;position:absolute;top:0;left:0;width:100%;"]),xa=P.default.div.withConfig({componentId:"sc-1e2ci4w-0"})(["z-index:21;position:relative;overflow:visible;> .more{z-index:1;display:none;position:absolute;top:100%;left:0;width:100%;}&:hover{> .more{display:flex;}}"]),_a=Object(P.default)(a).withConfig({componentId:"sc-1cbrrf2-0"})(["z-index:2;position:absolute;top:0;left:0;width:100%;"]),Ea=P.default.div.withConfig({componentId:"sc-1cz357w-0"})(["z-index:21;position:relative;overflow:visible;> .more{z-index:1;display:none;position:absolute;top:100%;left:0;width:100%;}&:hover{> .more{display:flex;}}"]),ka=function(e,i,c,l){return new(c=c||Promise)(function(n,t){function a(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(a,r)}o((l=l.apply(e,i||[])).next())})},ya=n("vMhd"),g=P.default.div.withConfig({componentId:"sc-9jrbdq-0"})(["z-index:21;position:absolute;top:","px;left:0;width:100%;height:calc(100% - ","px);",""],34,34,function(e){e=e.theme.darkTheme;return Object(P.css)(["background-color:",";"],e?"#2E3033":"#fff")}),Oa=n.p+"assets/file/28a56b2b1a55f994c9f0cf92d8e35d15.png",wa=P.default.div.withConfig({componentId:"wgql45-0"})(["position:absolute;top:16px;right:10px;cursor:pointer;width:24px;height:24px;border-radius:50%;background-color:rgb(0 0 0 / 0.2);display:flex;align-items:center;justify-content:center;> img{width:14px;height:14px;}"]),ja=Object(P.default)(g).withConfig({componentId:"oa38dp-0"})(["display:flex;align-items:center;justify-content:center;"]),Ca=n("9T9G"),Ia=Object(P.default)(g).withConfig({componentId:"sc-1ish9uh-0"})(["display:flex;align-items:center;justify-content:center;"]),Sa=n.p+"assets/file/ba60930fefdb48b37b2e6bb843105d03.png",Na=P.default.div.withConfig({componentId:"sc-1aa2bnj-0"})(["display:flex;align-items:center;> .left{flex:1;min-width:0;display:flex;align-items:center;> .badge{width:32px;height:32px;}> .title{margin-left:5px;font-size:16px;color:#ffe19a;}}"]),Ta={date:"0",hour:"00",minute:"00"},La=P.default.div.withConfig({componentId:"q8rer4-0"})(["display:flex;align-items:center;> .number{margin:0 3px;font-size:14px;color:rgb(255 255 255 / 0.9);padding:2px 5px;border-radius:4px;background-color:rgb(0 0 0 / 0.5);}> .unit{font-size:12px;color:rgb(255 255 255 / 0.6);}"]),S=n.p+"assets/file/2409dfebf7ac857cfa59006386eea09b.png",Aa=P.default.div.withConfig({componentId:"sc-1ysd88v-0"})(["display:flex;align-items:center;> *{&:not(:last-child){margin-right:6px;}}> .rank{width:34px;height:34px;background-image:url(",");background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;font-size:12px;color:#fff;}> .avatar{cursor:pointer;}> .name{flex:1;cursor:pointer;font-size:14px;color:#fff;","}> .contribution-box{width:85px;display:flex;align-items:center;> .noci{width:20px;height:20px;}> .contribution{margin-left:5px;font-size:14px;color:#fff;}}"],S,O.a),Ra=P.default.div.withConfig({componentId:"sc-27p400-0"})(["padding:10px;border-radius:4px;background-color:rgb(255 255 255 / 0.2);"]),w=n.p+"assets/file/a0c36f11c7eefb8ecbcc160ad0d521a8.png",i=n.p+"assets/file/edda682a9510a0fdbda90a3113a751ce.png",s=n.p+"assets/file/066c263070fbc703e651cf67354387df.png",c=n.p+"assets/file/273bb0e47eea75803ebe8739a0917f13.png",f=n.p+"assets/file/e79ccd40cb0d2a36fb8294b6283ad133.png",a=n.p+"assets/file/169d23eec82e0046bcda823bb9f4a40d.png",Ma=function(e,t){var n={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};(S=ra=ra||{}).FIRST="first",S.SECOND="second",S.THIRD="third";function Da(e){function t(){a&&jt.h.emit(jt.g.SHOW_USER_CARD,a.id)}var n=e.rank,a=e.user,r=Ma(e,["rank","user"]),o=(i=$a[n]).height,e=i.circle,n=i.badge,i=i.borderRadius;return Ot.a.createElement(er,K()({},r,{height:o,circle:e,borderRadius:i}),Ot.a.createElement("div",{className:"avatar-box",onClick:t},Ot.a.createElement(C.b,{src:a?a.avatar:"",size:40}),Ot.a.createElement("img",{className:"badge",src:n,alt:"c"})),Ot.a.createElement("div",{className:"name",onClick:t},a?a.name:"----"),Ot.a.createElement("div",{className:"contribution-box"},Ot.a.createElement("img",{className:"noci",src:ot,alt:"contribution"}),Ot.a.createElement("div",{className:"contribution"},a?a.contribution:0)))}function Pa(e){var n=void 0===(a=e.rankList)?[]:a,t=n[0],e=n[1],a=n[2];return Ot.a.createElement(nr,null,Ot.a.createElement("div",{className:"top-three"},Ot.a.createElement(Da,{className:"top",rank:ra.SECOND,user:e?{id:e.user_id,avatar:e.avatar,name:e.name,contribution:e.account}:void 0}),Ot.a.createElement(Da,{className:"top",rank:ra.FIRST,user:t?{id:t.user_id,avatar:t.avatar,name:t.name,contribution:t.account}:void 0}),Ot.a.createElement(Da,{className:"top",rank:ra.THIRD,user:a?{id:a.user_id,avatar:a.avatar,name:a.name,contribution:a.account}:void 0})),Ot.a.createElement("div",{className:"rest"},tr.map(function(e){var t=n[e];return Ot.a.createElement("div",{className:"item",key:e},t?Ot.a.createElement(na,{rank:e+1,userId:t.user_id,avatar:t.avatar,level:t.user_level,name:t.name,contribution:t.account}):Ot.a.createElement(na,{rank:e+1,userId:0,avatar:"",level:0,name:"",contribution:0}))})))}function Fa(e){var t=e.rankList,e=(n=void 0===t?[]:t)[0],t=n[1],n=n[2];return Ot.a.createElement(rr,null,Ot.a.createElement(Da,{className:"top",rank:ra.SECOND,user:t?{id:t.user_id,avatar:t.avatar,name:t.name,contribution:t.account}:void 0}),Ot.a.createElement(Da,{className:"top",rank:ra.FIRST,user:e?{id:e.user_id,avatar:e.avatar,name:e.name,contribution:e.account}:void 0}),Ot.a.createElement(Da,{className:"top",rank:ra.THIRD,user:n?{id:n.user_id,avatar:n.avatar,name:n.name,contribution:n.account}:void 0}))}function Ga(e){return e=e.ammount,Ot.a.createElement(ir,null,Ot.a.createElement("img",{className:"coin",src:ot,alt:"coin"}),Ot.a.createElement("div",{className:"ammount"},"x",e))}function Ba(e){var t=e.picture,e=e.ammount;return Ot.a.createElement(cr,null,Ot.a.createElement("img",{className:"picture",src:t,alt:"gift"}),Ot.a.createElement("div",{className:"ammount"},"x",e))}function za(e){return e=e.picture,Ot.a.createElement(lr,{src:e,alt:"badge"})}function Ua(e){var t=e.level,n=e.rewards,t=(e=ur[t]||sr).rankIcon,e=e.label;return Ot.a.createElement(fr,null,Ot.a.createElement("img",{className:"rank",src:t,alt:"rank"}),Ot.a.createElement("div",{className:"label"},e),Ot.a.createElement("div",{className:"reward-list"},n.map(function(e,t){var n=e.type,a=e.content,r=e.ammount;switch(n){case 1:return Ot.a.createElement(Ga,{key:t,ammount:r});case 3:return Ot.a.createElement(Ba,{key:t,picture:a,ammount:r});case 4:return Ot.a.createElement(za,{key:t,picture:Y.a.processServerImageUrl(a)});default:return null}})))}function Ha(e){return e=void 0===(e=e.rewardList)?[]:e,Ot.a.createElement(dr,null,e.map(function(e,t){return Ot.a.createElement(Ua,{key:t,level:e.level,rewards:e.rewards.map(function(e){return{type:e.reward_type,content:e.reward_content,ammount:e.count}})})}))}function Ka(e){var t=e.anchorName,n=e.rankDetail,a=e.onClose,r=n.background_pic,o=n.banner,i=n.end_time,c=n.self_info,l=n.now_week_ranking,s=n.rule_intro,e=n.last_week_top3_ranking,n=n.week_rewards;return Ot.a.createElement(mr,{style:{backgroundImage:"url(".concat(r,")")}},Ot.a.createElement("div",{className:"detail"},Ot.a.createElement("div",{className:"title"},Ot.a.createElement("div",{className:"name"},t),Ot.a.createElement("div",null,Object(Dt.f)("week_rank_username_title").replace("{{username}}",""))),Ot.a.createElement("img",{className:"banner",src:o,alt:"banner"}),Ot.a.createElement("div",{className:"child"},Ot.a.createElement(ta,{endTimestamp:i}),Ot.a.createElement(aa,{self:c}),Ot.a.createElement(Pa,{rankList:l||[]})),Ot.a.createElement("div",{className:"child"},Ot.a.createElement(ea,{icon:or,label:Object(Dt.f)("week_rank_award")}),Ot.a.createElement(Ha,{rewardList:n||[]})),Ot.a.createElement("div",{className:"child"},Ot.a.createElement(ea,{icon:Sa,label:Object(Dt.f)("week_rank_last_week_title")}),Ot.a.createElement(Fa,{rankList:e||[]})),Ot.a.createElement("div",{className:"child"},Ot.a.createElement(ea,{icon:ar,label:Object(Dt.f)("week_rank_rule")}),Ot.a.createElement("div",{className:"rule-box"},Ot.a.createElement("img",{src:s,alt:"rule"})))),Ot.a.createElement(Qn,{onClick:a}))}function Ya(e){var n,a,r,o,t,i=e.roomId,c=e.anchorName,l=e.onClose,e=(u=(n=i,u=Object(yt.useState)(null),s=kt()(u,2),e=s[0],a=s[1],i=Object(yt.useState)(!0),u=kt()(i,2),s=u[0],r=u[1],i=Object(yt.useState)(null),u=kt()(i,2),i=u[0],o=u[1],t=Object(yt.useCallback)(function(){return ka(void 0,void 0,void 0,Et.a.mark(function e(){var t;return Et.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a(null),r(!0),e.prev=2,e.next=5,Fe(n);case 5:t=e.sent,o(Object.assign(Object.assign({},t),{background_pic:Y.a.processServerImageUrl(t.background_pic),banner:Y.a.processServerImageUrl(t.banner),rule_intro:Y.a.processServerImageUrl(t.rule_intro)})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),D.a.error(e.t0,{description:"获取土豪周榜详情失败",report:!0}),a(e.t0);case 13:r(!1);case 14:case"end":return e.stop()}},e,null,[[2,9]])}))},[n]),Object(yt.useEffect)(function(){t()},[t]),{error:e,loading:s,rankDetail:i,retry:t})).error,s=u.loading,i=u.rankDetail,u=u.retry;return e?Ot.a.createElement($n,{error:e,retry:u,onClose:l}):s?Ot.a.createElement(Zn,{onClose:l}):Ot.a.createElement(Ka,{anchorName:c,rankDetail:i,onClose:l})}function Wa(e){var t=e.roomId,n=e.anchorName,a=Xn(t),r=Object(yt.useState)(!1),r=(e=kt()(r,2))[0],o=e[1];return Ot.a.createElement(Ot.a.Fragment,null,Ot.a.createElement(pr,null,Ot.a.createElement(gt,{rankType:ze.COIN,first:a[0],second:a[1],third:a[2]}),Ot.a.createElement(Sn,{className:"more",onClick:function(){return o(!0)}})),r?Ot.a.createElement(Ya,{roomId:t,anchorName:n,onClose:function(){return o(!1)}}):null)}function qa(){var e=(a=Object(yt.useContext)(Gt.a)).roomId,t=a.fansGroupInteractionData,n=a.anchorInfo,a=(r=function(e){var n=e.roomId,t=e.fansGroupInteractionData,a=e.living,r=Object(yt.useState)([]),o=kt()(r,2),e=o[0],i=o[1],r=Object(yt.useState)(null),o=kt()(r,2),r=o[0],c=o[1],o=Object(yt.useCallback)(function(e){return c(e)},[]);Object(yt.useEffect)(function(){var t=!1;return Object(at.a)(Ge,{times:5})(n).promise.then(function(e){if(!t)switch(e.status){case 1:i([ct.DAILY,ct.WEEKLY]);break;case 2:i([ct.DAILY,ct.LORD_WEEKLY]),c(ct.LORD_WEEKLY);break;case 3:i([ct.LORD_WEEKLY]),c(ct.LORD_WEEKLY)}}).catch(function(e){return D.a.error(e,{description:"获取直播间排行榜白名单失败",report:!0})}),function(){t=!0}},[n,a]);t.has_unlock&&(e=[ct.FANS_GROUP].concat(_t()(e)));e=e.sort(function(e,t){return ft[e].order-ft[t].order});return{leaderboardList:e,currentLeaderboard:r||e[0],onLeaderboardChange:o}}({roomId:e,fansGroupInteractionData:t,living:n.living})).leaderboardList,t=r.currentLeaderboard,r=r.onLeaderboardChange;if(!a.length||!t)return null;var o=null;switch(t){case ct.FANS_GROUP:o=Ot.a.createElement(Un,{roomId:e});break;case ct.DAILY:o=Ot.a.createElement(Wn,{roomId:e});break;case ct.WEEKLY:o=Ot.a.createElement(Jn,{roomId:e});break;case ct.LORD_WEEKLY:o=Ot.a.createElement(Wa,{roomId:e,anchorName:n.name})}return Ot.a.createElement(Ot.a.Fragment,null,Ot.a.createElement(st,{leaderboardList:a,currentLeaderboard:t,onLeaderboardChange:r}),o)}function Va(e){return D.a.error(e,{description:"排行榜渲染发生错误",report:!0})}function Ja(){return Ot.a.createElement(Vt.a,{onError:Va},Ot.a.createElement(qa,null))}var Xa,Qa,Za,$a=(S={},o()(S,ra.FIRST,{height:150,circle:w,badge:c,borderRadius:"4px 4px 0 0"}),o()(S,ra.SECOND,{height:120,circle:i,badge:f,borderRadius:"4px 0 0 0"}),o()(S,ra.THIRD,{height:120,circle:s,badge:a,borderRadius:"0 4px 0 0"}),S),er=P.default.div.withConfig({componentId:"sc-10hzzml-0"})(["padding:10px 10px 0 10px;display:flex;flex-direction:column;align-items:center;background:linear-gradient( to bottom,rgb(255 255 255 / 0.3),rgb(255 255 255 / 0) );> .avatar-box{position:relative;cursor:pointer;font-size:0;background-size:cover;background-position:center;padding:2px;> .badge{position:absolute;bottom:-8px;left:50%;transform:translateX(-50%);height:16px;}}> .name{max-width:95%;cursor:pointer;margin:15px 0 5px 0;font-size:14px;color:#fff;","}> .contribution-box{display:flex;align-items:center;> .noci{width:20px;height:20px;}> .contribution{margin-left:3px;font-size:14px;color:#fff;}}",""],O.a,function(e){var t=e.circle,n=e.height,e=e.borderRadius;return Object(P.css)(["border-radius:",";height:","px;> .avatar-box{background-image:url(",");}"],e,n,t)}),tr=new Array(7).fill(0).map(function(e,t){return t+3}),nr=P.default.div.withConfig({componentId:"sc-1twmr3m-0"})(["> .top-three{display:flex;align-items:flex-end;padding:0 10px;> .top{flex:1;min-width:0;}}> .rest{padding:8px;background-color:rgb(255 255 255 / 0.3);border-radius:4px;> .item{padding:8px 0;border-bottom:1px solid rgb(0 0 0 / 0.1);&:last-child{border-bottom:none;}}}"]),ar=n.p+"assets/file/e45e9c44cc5874377083fcb1c0f69f7e.png",rr=P.default.div.withConfig({componentId:"bssb9h-0"})(["display:flex;align-items:flex-end;> .top{flex:1;min-width:0;}"]),or=n.p+"assets/file/6cd0c28b1c3f9f2aaee2389f2faf6018.png",o=n.p+"assets/file/1b82d31b9519275326e8715269ccf1a8.png",s=n.p+"assets/file/4d3af6d53f0e38892472eb4dba13f057.png",a=n.p+"assets/file/274341caa2b377090908b095252ffb34.png",S=n.p+"assets/file/3e244efa3854d8338df8ad716fb28e0d.png",ir=P.default.div.withConfig({componentId:"b7mvx6-0"})(["display:flex;align-items:center;> .coin{width:20px;height:20px;}> .ammount{margin-left:5px;font-size:14px;color:#fff;}"]),cr=P.default.div.withConfig({componentId:"on5mtp-0"})(["display:flex;align-items:center;> .picture{width:24px;height:24px;}> .ammount{margin-left:5px;font-size:14px;color:#fff;}"]),lr=P.default.img.withConfig({componentId:"sc-1mqw67o-0"})(["width:24px;height:24px;"]),sr={rankIcon:S,label:Object(Dt.f)("week_rank_ten_place")},ur={1:{rankIcon:o,label:Object(Dt.f)("week_rank_first_place")},2:{rankIcon:s,label:Object(Dt.f)("week_rank_second_place")},3:{rankIcon:a,label:Object(Dt.f)("week_rank_three_place")}},fr=P.default.div.withConfig({componentId:"ha9uzm-0"})(["display:flex;align-items:center;> *{&:not(:last-child){margin-right:10px;}}padding:8px 0;border-bottom:1px solid rgb(0 0 0 / 0.1);&:last-child{border-bottom:none;}> .rank{width:24px;height:24px;}> .label{font-size:14px;color:#fff;}> .reward-list{flex:1;min-width:0;display:flex;align-items:center;justify-content:flex-end;> *{&:not(:last-child){margin-right:10px;}}}"]),dr=P.default.div.withConfig({componentId:"sc-15ul7tm-0"})(["padding:8px;background-color:rgb(255 255 255 / 0.3);border-radius:4px;"]),mr=Object(P.default)(g).withConfig({componentId:"sc-2n5wed-0"})(["background-size:cover;background-position:center;> .detail{position:absolute;top:0;left:0;width:100%;height:100%;overflow:auto;"," padding:20px 10px;> *{&:not(:last-child){margin-bottom:20px;}}> .title{font-size:16px;font-weight:bold;color:rgb(255 255 255 / 0.9);display:flex;align-items:center;justify-content:center;> .name{max-width:160px;","}}> .banner{border-radius:4px;width:100%;height:auto;}> .child{display:flex;flex-direction:column;> *{&:not(:last-child){margin-bottom:10px;}}> .rule-box{padding:10px;border-radius:4px;background-color:rgb(255 255 255 / 0.3);> img{display:block;width:100%;}}}}"],r.a,O.a),pr=P.default.div.withConfig({componentId:"x4mh8s-0"})(["z-index:21;overflow:visible;position:relative;> .more{display:none;position:absolute;top:100%;left:0;width:100%;}&:hover{> .more{display:flex;}}"]),gr=n("k2W6"),hr=n("SymZ"),br=n("cLsM"),vr=n("VJaf"),xr=n("8tb8"),_r=n("8AGY"),Er=n("jxKE"),kr=n("Qpla");(g=Xa=Xa||{})[g.DayRank=0]="DayRank",g[g.WeekRank=1]="WeekRank",g[g.RichWeekRank=2]="RichWeekRank",g[g.FansGroupRank=3]="FansGroupRank",(r=Qa=Qa||{})[r.First=1]="First",r[r.Second=2]="Second",r[r.Three=3]="Three",r[r.Other=4]="Other",(g=Za=Za||{})[g.Coins=1]="Coins",g[g.Medal=4]="Medal",g[g.PackGift=3]="PackGift";function yr(e){var t=e.rankNumber,n=e.avatar,a=e.coins,r=e.level,o=e.userName,i=e.onClickHanlde;return Ot.a.createElement(Kr,{onClick:function(){i()}},Ot.a.createElement(Yr,null,Ot.a.createElement("div",{className:"rank-wrap"},1===t&&Ot.a.createElement("img",{className:"rank-pic",alt:"rank",src:Jr}),2===t&&Ot.a.createElement("img",{className:"rank-pic",alt:"rank",src:Xr}),3===t&&Ot.a.createElement("img",{className:"rank-pic",alt:"rank",src:Qr}),t&&3<t&&Ot.a.createElement("span",{className:"rank"},t)),Ot.a.createElement(C.b,{src:n,size:32,style:{marginLeft:20}}),r&&Ot.a.createElement(da.a,{className:"user-level",level:r}),Ot.a.createElement("span",{className:"user-name",style:{marginLeft:10}},o)),Ot.a.createElement(Yr,null,Ot.a.createElement("img",{className:"coin",alt:"coin",src:Vr}),Ot.a.createElement("span",{className:"coins"},Object(qr.a)(a))))}function Or(e){function n(e){var t=function(){if(1===o.liveType)return{host_id:a,live_type:1,category_key:o.categoryKey};if(2===o.liveType){var e=2;return 1===o.liveMode&&(e=3),{host_id:a,live_type:e,game_key:o.gameKey}}}();r===Xa.DayRank&&At.a.handleDataCount(Object.assign({event_id:"C_ROOM_RANKPAGE_CLICK",lt:"click",room_rank_tab:"daily",room_rankclick_entity:e},t)),r===Xa.WeekRank&&At.a.handleDataCount(Object.assign({event_id:"C_ROOM_RANKPAGE_CLICK",lt:"click",room_rank_tab:"weekly",room_rankclick_entity:e},t))}var t=e.dayWeekRankList,a=e.roomId,r=e.keyType,o=Object(yt.useContext)(Yt.b).anchorInfo,e=Object(yt.useState)(!1),i=(e=kt()(e,2))[0],c=e[1],e=function(){i||c(!0)};return Ot.a.createElement(zr,{onMouseOver:e,onFocus:e,onMouseLeave:function(){i&&c(!1)}},Ot.a.createElement(Wr,{more:i},t.slice(0,3).map(function(e,t){return Ot.a.createElement(yr,{onClickHanlde:function(){n(t+1)},key:t,rankNumber:t+1,avatar:e.avatar,userName:e.loginname,level:e.level,coins:e.price_sum})})),i&&Ot.a.createElement(Ur,null,Ot.a.createElement(Hr,null,Ot.a.createElement(Wr,null,t.slice(3).map(function(e,t){return Ot.a.createElement(yr,{onClickHanlde:function(){n(t+4)},key:t,rankNumber:t+4,avatar:e.avatar,userName:e.loginname,level:e.level,coins:e.price_sum})})))))}function wr(e){var t=e.outerFontColor,n=e.boxBgColor,a=e.innerFontColor,r=e.endDate,o=e.reloadPage,i=(c=Object(Zr.a)({end:r,onComplete:function(){o()}})).day,e=c.hour,r=c.minute,c=c.second;return Ot.a.createElement($r,{outerFontColor:t,className:"time-count"},Ot.a.createElement(eo,{boxBgColor:n,innerFontColor:a},i),Object(Dt.f)("week_rank_unit_day"),Ot.a.createElement(eo,{boxBgColor:n,innerFontColor:a},e),Object(Dt.f)("week_rank_unit_hour"),Ot.a.createElement(eo,{boxBgColor:n,innerFontColor:a},r),Object(Dt.f)("week_rank_unit_minute"),Ot.a.createElement(eo,{boxBgColor:n,innerFontColor:a},c),Object(Dt.f)("week_rank_unit_second"))}function jr(e){var t=e.changeType,n=e.endDate,a=e.isWhite,r=e.reloadPage,o=e.isLiving,i=e.hasFansGroup,c=e.setEndDate,l=Object(yt.useState)(!1),e=(f=kt()(l,2))[0],s=f[1],l=Object(yt.useState)(0<a?Xa.DayRank:Xa.FansGroupRank),l=(f=kt()(l,2))[0],u=f[1],f=Object(yt.useState)(0),d=(f=kt()(f,2))[0],m=f[1],f=Object(un.a)().darkTheme;return Object(yt.useEffect)(function(){switch(a){case 1:u(Xa.DayRank);break;case 2:case 3:u(Xa.RichWeekRank);break;default:u(Xa.FansGroupRank)}},[o,a]),Ot.a.createElement(Ot.a.Fragment,null,o&&0!==a||i||!o&&(2===a||3===a)?Ot.a.createElement(ao,null,Ot.a.createElement(ro,{onMouseEnter:function(){(i&&1<a||(1===a||2===a)&&o)&&s(!0)},onMouseLeave:function(){s(!1)}},Ot.a.createElement("span",{className:"show-text"},oo[l],((1===a||2===a)&&o||i&&1<a)&&Ot.a.createElement("i",{className:"arrow-down"})),e?Ot.a.createElement("div",{className:"select-area"},Ot.a.createElement("div",{className:"cur-choose"},oo[l],(1===a||2===a)&&o&&Ot.a.createElement("i",{className:"arrow-down"})),(1===a||2===a)&&o&&Ot.a.createElement("div",{className:"select-item",onClick:function(){s(!1),m(0),u(Xa.DayRank),t(Xa.DayRank)}},oo[Xa.DayRank]),1===a&&Ot.a.createElement("div",{className:"select-item",onClick:function(){s(!1),m(0),u(Xa.WeekRank),t(Xa.WeekRank)}},oo[Xa.WeekRank]),(2===a||3===a)&&Ot.a.createElement("div",{className:"select-item",onClick:function(){s(!1),m(0),u(Xa.RichWeekRank),t(Xa.RichWeekRank)}},oo[Xa.RichWeekRank]),i&&Ot.a.createElement("div",{className:"select-item",onClick:function(){s(!1),m(0),u(Xa.FansGroupRank),t(Xa.FansGroupRank),c(0)}},oo[Xa.FansGroupRank])):null),Ot.a.createElement(wr,{endDate:n,outerFontColor:f?"rgba(255, 255, 255, 0.6)":"rgba(153, 153, 153, 0.9)",innerFontColor:"#20bef3",boxBgColor:"transparent",reloadPage:function(){Date.now()>=n&&d<1&&(r(),m(d+1))}})):null)}function Cr(e){var t=e.message,n=e.pic,e=void 0!==(e=e.noStyle)&&e;return Ot.a.createElement(io,{noStyle:e},Ot.a.createElement("img",{alt:"",src:n}),Ot.a.createElement("span",null,t))}function Ir(e){var t=e.userRankInfo,e=e.keyIndex;return Ot.a.createElement(ko,null,Ot.a.createElement(yo,null,Ot.a.createElement("div",{className:"rank-no"},e||(null!=t&&t.userRank&&0!==(null==t?void 0:t.userRank)&&(null==t?void 0:t.userRank)<1e3?null==t?void 0:t.userRank:"999+")),Ot.a.createElement("div",{className:"rank-avatar"},Ot.a.createElement("img",{alt:"",src:(null==t?void 0:t.avatar)||To,className:"rank-user-avatar"})),null!=t&&t.userName?Ot.a.createElement(da.a,{className:"user-level",level:(null==t?void 0:t.userLevel)||0,style:{width:"34px",height:"18px"}}):null,Ot.a.createElement("div",{className:"rank-user-name"},(null==t?void 0:t.userName)||"----")),Ot.a.createElement(Oo,null,Ot.a.createElement("img",{alt:"",src:No,className:"gold"}),Ot.a.createElement("span",{className:"account"},Object(qr.a)(null==t?void 0:t.account)||"----")))}function Sr(e){var t=e.styleBg,n=e.userBg,a=e.rankPic,r=e.userAvatar,o=e.userName,i=e.coins,e=Lo(e,["styleBg","userBg","rankPic","userAvatar","userName","coins"]);return Ot.a.createElement(Ao,K()({styleBg:t},e),Ot.a.createElement(Ro,{userBg:n},Ot.a.createElement("div",{className:"userInfo"},Ot.a.createElement("img",{alt:"",src:r||To,className:"userAvatar"})),Ot.a.createElement("img",{alt:"",src:a,className:"number-no"})),Ot.a.createElement("div",{className:"user-name"},o),Ot.a.createElement("div",{className:"coins"},Ot.a.createElement("img",{alt:"coin",src:No,className:"coin"}),Object(mn.e)(i)?Object(qr.a)(i):i))}function Nr(e){var t=e.rankPic,n=e.title,a=e.rewards,r=Object(yt.useState)({rewardContent:"",rewardType:Za.Medal}),o=(c=kt()(r,2))[0],i=c[1],e=Object(yt.useState)({rewardContent:"",rewardType:Za.PackGift,count:0}),c=(r=kt()(e,2))[0],l=r[1],e=Object(yt.useState)({rewardType:Za.Coins,count:0}),e=(r=kt()(e,2))[0],s=r[1];return Object(yt.useEffect)(function(){a&&0<a.length&&a.forEach(function(e){switch(e.rewardType){case Za.Medal:i({rewardContent:Object(co.a)(e.rewardContent),rewardType:Za.Medal});break;case Za.PackGift:l({rewardContent:e.rewardContent,rewardType:Za.PackGift,count:e.count});break;case Za.Coins:s({rewardType:Za.Coins,count:e.count})}})},[a]),Ot.a.createElement(Wo,null,Ot.a.createElement(qo,null,Ot.a.createElement("img",{alt:"",src:t,className:"rank-no"}),Ot.a.createElement("span",{className:"title"},n)),Ot.a.createElement(Vo,null,o.rewardContent&&""!==o.rewardContent?Ot.a.createElement("div",{className:"rewards"},Ot.a.createElement("img",{alt:"",src:o.rewardContent,className:"medal"})):null,c.rewardContent&&""!==c.rewardContent?Ot.a.createElement("div",{className:"rewards"},Ot.a.createElement("img",{alt:"",src:c.rewardContent}),Ot.a.createElement("span",{className:"num"},"X",c.count)):null,e.count&&0<Number(e.count)?Ot.a.createElement("div",{className:"rewards"},Ot.a.createElement("img",{alt:"",src:Yo}),Ot.a.createElement("span",{className:"num"},"X",Object(qr.a)(e.count))):null))}function Tr(e){var t=e.rewardList,n=Object(yt.useState)([]),a=(c=kt()(n,2))[0],r=c[1],o=Object(yt.useState)([]),n=(e=kt()(o,2))[0],i=e[1],c=Object(yt.useState)([]),e=(o=kt()(c,2))[0],l=o[1],c=Object(yt.useState)([]),c=(o=kt()(c,2))[0],s=o[1];return Object(yt.useEffect)(function(){t&&0<t.length&&t.forEach(function(e){switch(e.level){case Qa.First:r(e.rewards);break;case Qa.Second:i(e.rewards);break;case Qa.Three:l(e.rewards);break;case Qa.Other:s(e.rewards)}})},[t]),Ot.a.createElement($o,null,Ot.a.createElement(ei,null,Ot.a.createElement("img",{alt:"",src:Ko}),Ot.a.createElement("span",null,Object(Dt.f)("week_rank_award"))),Ot.a.createElement(ti,null,Ot.a.createElement(Nr,{rankPic:Jo,title:Object(Dt.f)("week_rank_first_place"),rewards:a}),Ot.a.createElement(Nr,{rankPic:Xo,title:Object(Dt.f)("week_rank_second_place"),rewards:n}),Ot.a.createElement(Nr,{rankPic:Qo,title:Object(Dt.f)("week_rank_three_place"),rewards:e}),Ot.a.createElement(Nr,{rankPic:Zo,title:Object(Dt.f)("week_rank_ten_place"),rewards:c})))}function Lr(e){return e=e.userLastRankList,Ot.a.createElement(ni,null,Ot.a.createElement(ai,null,Ot.a.createElement("img",{alt:"",src:So}),Ot.a.createElement("span",null,Object(Dt.f)("week_rank_last_week_title"))),Ot.a.createElement(ri,null,Ot.a.createElement(oi,null,Ot.a.createElement(Sr,{styleBg:Do,userBg:Uo,rankPic:Go,userAvatar:2<=e.length?e[1].avatar:"",userName:2<=e.length?e[1].userName:"----",coins:2<=e.length?e[1].account:"----",style:{height:"118px",minHeight:"118px"}}),Ot.a.createElement(Sr,{styleBg:Mo,userBg:zo,rankPic:Fo,userAvatar:1<=e.length?e[0].avatar:"",userName:1<=e.length?e[0].userName:"----",coins:1<=e.length?e[0].account:"----",style:{height:"144px",minHeight:"144px"}}),Ot.a.createElement(Sr,{styleBg:Po,userBg:Ho,rankPic:Bo,userAvatar:3<=e.length?e[2].avatar:"",userName:3<=e.length?e[2].userName:"----",coins:3<=e.length?e[2].account:"----",style:{height:"118px",minHeight:"118px"}}))))}function Ar(e){return e=e.ruleIntroPic,Ot.a.createElement(ci,null,Ot.a.createElement(li,null,Ot.a.createElement("img",{alt:"",src:ii}),Ot.a.createElement("span",null,Object(Dt.f)("week_rank_rule"))),Ot.a.createElement(si,null,Ot.a.createElement("img",{alt:"",src:Object(co.a)(e)})))}function Rr(e){var t={avatar:"",userId:0,userRank:0,account:0,userName:"",userLevel:0};return Array.from(new Array(e),function(){return t})}function Mr(e){var m=e.roomId,t=e.name,n=e.isOpen,a=Object(yt.useState)(null),r=(u=kt()(a,2))[0],p=u[1],o=Object(yt.useState)(Er.g.NOT_START),i=(f=kt()(o,2))[0],g=f[1],c=Object(yt.useState)(0),l=(d=kt()(c,2))[0],h=d[1],s=Object(yt.useState)(""),a=(e=kt()(s,2))[0],b=e[1],u=Object(yt.useState)(null),f=(o=kt()(u,2))[0],v=o[1],c=Object(yt.useState)([]),s=(d=kt()(c,2))[0],x=d[1],e=Object(yt.useState)([]),o=(u=kt()(e,2))[0],_=u[1],c=Object(yt.useState)([]),e=(d=kt()(c,2))[0],E=d[1],u=Object(yt.useState)(""),d=(c=kt()(u,2))[0],k=c[1],u=Object(yt.useState)(""),u=(c=kt()(u,2))[0],y=c[1],O=Object(yt.useCallback)(function(){return fi(void 0,void 0,void 0,Et.a.mark(function e(){var t,n,a,r,o,i,c,l,s,u,f,d;return Et.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g(Er.g.LOADING),e.prev=1,e.next=4,Fe(m);case 4:a=e.sent,r=a.end_time,o=a.banner,c=a.background_pic,t=a.self_info,n=a.now_week_ranking,f=a.last_week_top3_ranking,d=a.week_rewards,i=a.rule_intro,h(r||0),b(o),k(i),y(c),t&&0<Object.keys(t).length&&(a=t.avatar,r=t.user_level,o=t.user_id,i=t.user_rank,c=t.account,l=t.name,v({avatar:a,userLevel:r,userId:o,userRank:i,account:c,userName:l})),n&&n instanceof Array&&0<n.length&&(l=Rr(10),(u=n.map(function(e){return{avatar:e.avatar,userLevel:e.user_level,userId:e.user_id,userRank:e.user_rank,account:e.account,userName:e.name}})).length<l.length&&0<u.length?(s=l.length-u.length,s=l.slice(0,s),x([].concat(_t()(u),_t()(s)))):x(u)),f&&f instanceof Array&&0<f.length&&(s=Rr(3),(u=f.map(function(e){return{avatar:e.avatar,userLevel:e.user_level,userId:e.user_id,userRank:e.user_rank,account:e.account,userName:e.name}})).length<s.length&&0<u.length?(f=s.length-u.length,f=s.slice(0,f),_([].concat(_t()(u),_t()(f)))):_(u)),d&&d instanceof Array&&0<d.length&&(d=d.map(function(e){return{level:e.level,rewards:e.rewards.map(function(e){return{rewardType:e.reward_type,rewardContent:e.reward_content,count:e.count}})||[]}}),E(d)),g(Er.g.SUCCESS),e.next=29;break;case 24:e.prev=24,e.t0=e.catch(1),D.a.error(e.t0,{description:"获取周星榜失败-2"}),p(e.t0),g(Er.g.ERROR);case 29:case"end":return e.stop()}},e,null,[[1,24]])}))},[m]);return Object(yt.useEffect)(function(){O()},[O]),Ot.a.createElement(Ot.a.Fragment,null,i===Er.g.LOADING?Ot.a.createElement(mo,{isOpen:n},Ot.a.createElement(Co,null,Ot.a.createElement(ya.a,null))):Ot.a.createElement(po,{backgroundImage:u,isOpen:n},Ot.a.createElement(go,null,i===Er.g.ERROR&&Ot.a.createElement(Ca.a,{errorMessage:r.message,retry:O}),i===Er.g.SUCCESS&&Ot.a.createElement(ho,null,Ot.a.createElement(bo,null,Object(Dt.f)("week_rank_username_title").replace("{{username}}","".concat(t))),Ot.a.createElement(vo,null,Ot.a.createElement("img",{alt:"banner",src:Object(co.a)(a),className:"banner"})),Ot.a.createElement(xo,null,Ot.a.createElement("div",{className:"left"},Ot.a.createElement("img",{alt:"",src:So,className:"rank-icon"}),Ot.a.createElement("span",null,Object(Dt.f)("week_rank_title"))),Ot.a.createElement("div",{className:"right"},Ot.a.createElement(wr,{endDate:l,outerFontColor:"rgba(255, 255, 255, 0.7)",innerFontColor:"rgba(255, 255, 255, 0.9)",boxBgColor:"rgba(255, 255, 255, 0.3)",reloadPage:function(){Date.now()>=l&&di<1&&(O(),di+=1)}}))),Ot.a.createElement(_o,null,Ot.a.createElement(Ir,{userRankInfo:f})),Ot.a.createElement(wo,null,Ot.a.createElement(jo,null,Ot.a.createElement(Sr,{styleBg:Do,userBg:Uo,rankPic:Go,userAvatar:2<=s.length?s[1].avatar:"",userName:2<=s.length?s[1].userName:"----",coins:2<=s.length?s[1].account:"----",style:{height:"118px",minHeight:"118px"}}),Ot.a.createElement(Sr,{styleBg:Mo,userBg:zo,rankPic:Fo,userAvatar:1<=s.length?s[0].avatar:"",userName:1<=s.length?s[0].userName:"----",coins:1<=s.length?s[0].account:"----",style:{height:"144px",minHeight:"144px"}}),Ot.a.createElement(Sr,{styleBg:Po,userBg:Ho,rankPic:Bo,userAvatar:3<=s.length?s[2].avatar:"",userName:3<=s.length?s[2].userName:"----",coins:3<=s.length?s[2].account:"----",style:{height:"118px",minHeight:"118px"}})),Ot.a.createElement(Eo,null,s&&0<s.length?s.slice(3,s.length).map(function(e,t){return Ot.a.createElement(Ir,{key:t,keyIndex:t+4,userRankInfo:e})}):Ot.a.createElement(Io,null,Ot.a.createElement(Cr,{message:Object(Dt.f)("week_rank_empty_rank"),pic:ui,noStyle:!0})))),Ot.a.createElement(Tr,{rewardList:e}),Ot.a.createElement(Lr,{userLastRankList:o}),Ot.a.createElement(Ar,{ruleIntroPic:d})))))}function Dr(e){var t=e.list,e=e.isOpen;return Ot.a.createElement(uo,{isOpen:e},Ot.a.createElement(fo,{championBg:zo,secondPlaceBg:Uo,thirdPlaceBg:Ho},Ot.a.createElement("div",{className:"host-second-rank"},Ot.a.createElement("div",{className:"second-rank-body"},Ot.a.createElement("div",{className:"avatar"},Ot.a.createElement("img",{alt:"",src:t&&2<=t.length&&t[1].avatar?t[1].avatar:To,className:"user-avatar"})),Ot.a.createElement("div",{className:"rank"},Ot.a.createElement("img",{alt:"",src:Go}))),Ot.a.createElement("div",{className:"host-username"},t&&2<=t.length?t[1].userName:"----")),Ot.a.createElement("div",{className:"champion"},Ot.a.createElement("div",{className:"champion-body"},Ot.a.createElement("div",{className:"avatar"},Ot.a.createElement("img",{alt:"",src:t&&1<=t.length&&t[0].avatar?t[0].avatar:To,className:"user-avatar"})),Ot.a.createElement("div",{className:"rank"},Ot.a.createElement("img",{alt:"",src:Fo}))),Ot.a.createElement("div",{className:"host-username"},t&&1<=t.length?t[0].userName:"----")),Ot.a.createElement("div",{className:"host-third-rank"},Ot.a.createElement("div",{className:"third-rank-body"},Ot.a.createElement("div",{className:"avatar"},Ot.a.createElement("img",{alt:"",src:t&&3<=t.length&&t[2].avatar?t[2].avatar:To,className:"user-avatar"})),Ot.a.createElement("div",{className:"rank"},Ot.a.createElement("img",{alt:"",src:Bo}))),Ot.a.createElement("div",{className:"host-username"},t&&3<=t.length?t[2].userName:"----"))))}function Pr(e){var t=e.data,n=e.fansGroupName,a=t.rank,r=t.fans_group_level,o=t.intimacy,e=t.user_name,t=t.avatar;return Ot.a.createElement(pi,null,Ot.a.createElement("div",{className:"user-info"},Ot.a.createElement("div",{className:"rank"},1===a&&Ot.a.createElement("img",{className:"rank-pic",alt:"rank",src:Jr}),2===a&&Ot.a.createElement("img",{className:"rank-pic",alt:"rank",src:Xr}),3===a&&Ot.a.createElement("img",{className:"rank-pic",alt:"rank",src:Qr}),a&&3<a&&Ot.a.createElement("span",{className:"rank"},a)),Ot.a.createElement("div",{className:"mask"},Ot.a.createElement(C.b,{src:t,size:32,style:{marginLeft:20}})),Ot.a.createElement("div",{className:"info"},e?Ot.a.createElement(Ot.a.Fragment,null," ",Ot.a.createElement("div",{className:"username"},e),Ot.a.createElement("div",{className:"level-wrapper"}," ",Ot.a.createElement(Mn.a,{fansBadge:{name:n,fansGroupLevel:r}}))):Ot.a.createElement("div",{className:"username"},Object(Dt.f)("fans_group_weekly_rank_empty")))),Ot.a.createElement("div",{className:"heart-container"},Ot.a.createElement("i",{className:"heart"}),Ot.a.createElement("span",{className:"num"},e?Object(qr.a)(o||0):"--")))}function Fr(e){var n=e.fansGroupInteractionData,a=e.roomId,r=e.setEndDate,t=Object(yt.useState)([]),o=(s=kt()(t,2))[0],i=s[1],c=Object(yt.useState)(null),t=(e=kt()(c,2))[0],l=e[1],s=Object(yt.useState)(Er.g.NOT_START),u=(c=kt()(s,2))[0],f=c[1],e=Object(yt.useState)(!1),d=(s=kt()(e,2))[0],m=s[1],c=Object(yt.useMemo)(function(){if(u===Er.g.SUCCESS){var e=10-o.length;if(0<e){for(var t=_t()(o),n=e;0<n;--n){var a=t.length;t.push({rank:a+1})}return t}}return o},[o,u]),p=Object(yt.useCallback)(function(){return gi(void 0,void 0,void 0,Et.a.mark(function e(){var t,n;return Et.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Er.g.LOADING),e.next=4,Object(xt.g)(a);case 4:n=e.sent,t=n.weekly_rank,(n=n.end_time)?(t&&t instanceof Array&&n&&(r(n),i(t)),r(n||0),f(Er.g.SUCCESS)):(f(Er.g.ERROR),r(0)),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),D.a.error(e.t0,{description:"getFansGroupRank失败"}),l(e.t0),f(Er.g.ERROR);case 15:case"end":return e.stop()}},e,null,[[0,10]])}))},[a,r]);Object(yt.useEffect)(function(){p()},[p]);var g=Object(yt.useCallback)(function(e){var t;e&&e.data&&(t=e.rid,e=e.data.weekly_rank,t&&a.toString()===t&&i(e))},[a]),e=Object(yt.useCallback)(function(){d||m(!0)},[d]),s=Object(yt.useCallback)(function(){d&&m(!1)},[d]);return Object(yt.useEffect)(function(){return St.a.on(Ct.d.RANK_PUSH,g),jt.h.on(jt.g.FANS_GROUP_PUSH_RANK,p),function(){jt.h.off(jt.g.FANS_GROUP_PUSH_RANK,p),St.a.off(Ct.d.RANK_PUSH,g)}}),u===Er.g.LOADING?Ot.a.createElement(mi,null,Ot.a.createElement("div",{className:"load-wrapper"},Ot.a.createElement(ya.a,null))):u===Er.g.ERROR?Ot.a.createElement(mi,null,Ot.a.createElement(Ca.a,{errorMessage:t.message,retry:p})):Ot.a.createElement(mi,{onMouseOver:e,onFocus:e,onMouseLeave:s,more:d},c.slice(0,3).map(function(e,t){return Ot.a.createElement(Pr,{key:t,data:e,fansGroupName:n.fans_group_name||""})}),d&&Ot.a.createElement("div",{className:"hover-item-wrapper"},Ot.a.createElement("div",{className:"hover-item-content"},c.slice(3).map(function(e,t){return Ot.a.createElement(Pr,{key:t,fansGroupName:n.fans_group_name||"",data:e})}))))}function Gr(e){function i(e,t,n,a,r){switch(e){case Xa.DayRank:_(t),y([].concat(_t()(r),_t()(Br.slice(0,10-r.length))));break;case Xa.WeekRank:_(n),y([].concat(_t()(a),_t()(Br.slice(0,10-a.length))))}}var c=e.roomId,t=e.name,n=e.isLiving,a=e.fansGroupInteractionData,r=Object(yt.useState)(),o=(g=kt()(r,2))[0],l=g[1],s=Object(yt.useState)(!1),u=(E=kt()(s,2))[0],f=E[1],d=Object(yt.useState)(null),m=(v=kt()(d,2))[0],p=v[1],e=Object(yt.useState)(Er.g.NOT_START),g=(r=kt()(e,2))[0],h=r[1],s=Object(yt.useState)(0),d=(E=kt()(s,2))[0],b=E[1],v=Object(yt.useState)(!1),r=(e=kt()(v,2))[0],x=e[1],s=Object(yt.useState)(0),v=(E=kt()(s,2))[0],_=E[1],e=Object(yt.useState)([]),E=(s=kt()(e,2))[0],k=s[1],e=Object(yt.useState)(Br),e=(s=kt()(e,2))[0],y=s[1],O=Object(yt.useContext)(Yt.b).anchorInfo,w=Object(yt.useCallback)(function(){return hi(void 0,void 0,void 0,Et.a.mark(function e(){var t,n;return Et.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h(Er.g.LOADING),e.prev=1,e.next=4,Pe(c);case 4:t=e.sent,n=t.top_three,t=t.end_time,n&&n instanceof Array&&0<n.length?(n=n.map(function(e){return{avatar:e.avatar,userId:e.user_id,userRank:e.user_rank,account:e.account,userName:e.name,userLevel:e.user_level}}),k(n),x(!1)):x(!0),_(t||0),h(Er.g.SUCCESS),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),D.a.error(e.t0,{description:"获取周星榜失败"}),p(e.t0),h(Er.g.ERROR);case 17:case"end":return e.stop()}},e,null,[[1,12]])}))},[c]),j=Object(yt.useCallback)(function(o){return hi(void 0,void 0,void 0,Et.a.mark(function e(){var t,n,a,r;return Et.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Pt.jb)({roomId:c,type:o});case 3:r=e.sent,t=r.day_end_time,n=r.week_end_time,a=r.week_top,r=r.now_top,i(o,t,n,a,r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),D.a.error(e.t0,{description:"请求日榜、周榜数据接口-报错"});case 14:case"end":return e.stop()}},e,null,[[0,11]])}))},[c]),C=Object(yt.useCallback)(function(){return hi(void 0,void 0,void 0,Et.a.mark(function e(){var t;return Et.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(kr.a)(2e3);case 2:return e.prev=2,e.next=5,Ge(c);case 5:t=e.sent,b(null==t?void 0:t.status),e.t0=null==t?void 0:t.status,e.next=1===e.t0?10:2===e.t0?13:3===e.t0?16:0===e.t0?19:21;break;case 10:return l(Xa.DayRank),j(Xa.DayRank),e.abrupt("break",22);case 13:case 16:return l(Xa.RichWeekRank),w(),e.abrupt("break",22);case 19:return l(Xa.FansGroupRank),e.abrupt("break",22);case 21:return e.abrupt("break",22);case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(2),D.a.error(e.t1,{description:"直播间送礼排行榜，白名单控制接口-报错"});case 27:case"end":return e.stop()}},e,null,[[2,24]])}))},[j,w,c]);Object(yt.useEffect)(function(){l(Xa.DayRank),f(!1),h(Er.g.NOT_START),b(0),x(!1),_(0),k([]),y(Br)},[c]),Object(yt.useEffect)(function(){return C(),tn.a.on(c,It.S,C),function(){tn.a.off(c,It.S,C)}},[C,c]);var I,S=Object(yt.useCallback)(function(){Se.a.glean({lt:"features",ct:"gift-weekly-ranking",dt:"entrance",et:"show"})},[]),N=Object(yt.useCallback)(function(){Se.a.glean({lt:"features",ct:"gift-weekly-ranking",dt:"entrance",et:"click"})},[]),T=Object(yt.useCallback)(function(){Se.a.glean({lt:"features",ct:"gift-weekly-ranking",dt:"entrance",et:"close"})},[]),L=Object(yt.useCallback)(function(e){f(e),(e?N:T)()},[]);return Object(yt.useEffect)(function(){S(),w()},[w]),Object(yt.useEffect)(function(){function e(e){var t;e&&e.msg_data&&0<Object.keys(e.msg_data).length?(e=(t=e.msg_data).end_time,t=t.top_three_list,_(e),t&&t instanceof Array&&0<t.length&&(t=t.map(function(e){return{avatar:e.avatar,userId:e.user_id,userRank:e.user_rank,account:e.account,userName:e.name,userLevel:e.user_level}}),k(t),x(!1))):x(!0)}function t(e){var t,n,a;o&&e&&e.msg_data&&(t=(a=e.msg_data).day_end_time,n=a.week_end_time,e=a.week_top,a=a.now_top,i(o,t,n,e,a))}return ln.b.on(c,cn.e,t),ln.b.on(c,cn.f,e),function(){ln.b.off(c,cn.e,t),ln.b.off(c,cn.f,e)}},[c,E,o]),g===Er.g.LOADING?I=Ot.a.createElement(Co,null,Ot.a.createElement(ya.a,null)):g===Er.g.ERROR?I=Ot.a.createElement(Ca.a,{errorMessage:m.message,retry:w}):g===Er.g.SUCCESS&&(I=r?Ot.a.createElement(Cr,{message:Object(Dt.f)("week_rank_no_host"),pic:ui}):Ot.a.createElement(Dr,{list:E,isOpen:u})),Ot.a.createElement(Ot.a.Fragment,null,(!!o||0===o)&&(0<d||1===a.has_unlock)&&Ot.a.createElement(jr,{changeType:function(e){l(e),e===Xa.RichWeekRank?w():j(e);var t=function(){if(1===O.liveType)return{host_id:c,live_type:1,category_key:O.categoryKey};if(2===O.liveType){var e=2;return 1===O.liveMode&&(e=3),{host_id:c,live_type:e,game_key:O.gameKey}}}();switch(e){case Xa.DayRank:At.a.handleDataCount(Object.assign({event_id:"C_ROOM_RANKPAGE_CLICK",lt:"click",room_rank_tab:"daily",room_rankclick_entity:"0"},t));break;case Xa.WeekRank:case Xa.RichWeekRank:At.a.handleDataCount(Object.assign({event_id:"C_ROOM_RANKPAGE_CLICK",lt:"click",room_rank_tab:"weekly",room_rankclick_entity:"0"},t))}},endDate:v,setEndDate:_,reloadPage:function(){o===Xa.DayRank&&j(Xa.DayRank),o===Xa.WeekRank&&j(Xa.WeekRank),o===Xa.RichWeekRank&&w(),o===Xa.FansGroupRank&&jt.h.emit(jt.g.FANS_GROUP_PUSH_RANK)},isWhite:d,isLiving:n,hasFansGroup:1===a.has_unlock}),2!==d&&3!==d||o!==Xa.RichWeekRank?null:Ot.a.createElement("div",{onMouseOver:function(){L(!0)},onFocus:function(){L(!0)},onMouseLeave:function(){L(!1)}},I,u?Ot.a.createElement(Mr,{name:t,roomId:c,isOpen:u}):null),(1===d||2===d)&&o===Xa.DayRank&&n&&Ot.a.createElement(Or,{dayWeekRankList:e,roomId:c,keyType:o}),1===d&&o===Xa.WeekRank&&n&&Ot.a.createElement(Or,{dayWeekRankList:e,roomId:c,keyType:o}),1===a.has_unlock&&o===Xa.FansGroupRank&&Ot.a.createElement(Fr,{fansGroupInteractionData:a,setEndDate:_,roomId:c}))}var Br=[{account:"--",price_sum:"--",loginname:"--"},{account:"--",price_sum:"--",loginname:"--"},{account:"--",price_sum:"--",loginname:"--"},{account:"--",price_sum:"--",loginname:"--"},{account:"--",price_sum:"--",loginname:"--"},{account:"--",price_sum:"--",loginname:"--"},{account:"--",price_sum:"--",loginname:"--"},{account:"--",price_sum:"--",loginname:"--"},{account:"--",price_sum:"--",loginname:"--"},{account:"--",price_sum:"--",loginname:"--"}],zr=P.default.div.withConfig({componentId:"sc-60d6q8-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;"]),Ur=P.default.div.withConfig({componentId:"sc-60d6q8-1"})(["position:relative;display:flex;flex-direction:column;padding:0 20px;min-width:0;width:100%;"]),Hr=P.default.div.withConfig({componentId:"sc-60d6q8-2"})(["position:absolute;top:0px;left:0;right:0px;z-index:",";"],l.a.LOCAL_TYCOON_MASK),Kr=P.default.div.withConfig({componentId:"sc-60d6q8-3"})(["display:flex;height:40px;justify-content:space-between;align-items:center;min-width:0;"]),Yr=P.default.div.withConfig({componentId:"sc-60d6q8-4"})(["display:flex;justify-content:center;align-items:center;min-width:0;.rank-wrap{width:20px;text-align:center;font-size:14px;font-weight:bold;","}> img.coin{width:16px;height:16px;margin-right:2px;}> img.rank-pic{width:20px;height:20px;}> .user-level{margin-left:10px;width:37px;padding:0;}> span.user-name{max-width:80px;margin-right:40px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;","}> span.coins{display:inline-block;width:43px;text-align:left;","}"],function(e){e=e.theme.darkTheme;return Object(P.css)(["color:",";"],e?"rgba(255,255,255,0.7)":"#666")},function(e){e=e.theme.darkTheme;return Object(P.css)(["color:",";"],e?"rgba(255,255,255,0.7)":"rgba(102, 102, 102, 1)")},function(e){e=e.theme.darkTheme;return Object(P.css)(["color:",";"],e?"rgba(255,255,255,0.9)":"rgba(51, 51, 51, 1)")}),Wr=P.default.div.withConfig({componentId:"sc-60d6q8-5"})(["display:flex;align-self:center;flex-direction:column;font-size:12px;font-weight:400;padding:0 20px;min-width:0;width:100%;"," ",""],function(e){e=e.theme.darkTheme;return Object(P.css)(["background-color:",";color:",";"],e?"#2E3033":"#ffffff",e?"rgba(255,255,255,0.9)":"#333333")},function(e){return e.more&&Object(P.css)(["z-index:",";"],l.a.LOCAL_TYCOON_MASK)}),qr=n("zt6L"),Vr=n.p+"assets/file/a4c98ee4322c6692b3a36f22d4834d98.png",Jr=n.p+"assets/file/830427ef2b97932797158947c3eadebd.png",Xr=n.p+"assets/file/f25b96c76ceb8ebc85166107bf195e16.png",Qr=n.p+"assets/file/13da97060bbe2bf301f3c85a08cd193f.png",Zr=n("7nli"),$r=P.default.div.withConfig({componentId:"qzbns3-0"})(["display:flex;font-size:12px;font-weight:400;height:22px;line-height:22px;",""],function(e){e=e.outerFontColor;return Object(P.css)(["color:",";"],e)}),eo=P.default.div.withConfig({componentId:"qzbns3-1"})(["margin:0 4px;height:22px;line-height:22px;width:22px;text-align:center;font-size:14px;font-weight:400;"," &:first-child{margin-left:0px;}"],function(e){var t=e.boxBgColor,e=e.innerFontColor;return Object(P.css)(["background:",";color:",";"],t,e)}),to=n.p+"assets/file/775dab276c1d93c8c050e8f3da2fb52a.png",no=n.p+"assets/file/5408877df89376c8edf1e1c50a36b37e.png",ao=P.default.div.withConfig({componentId:"sc-2it59z-0"})(["display:flex;height:32px;align-items:center;justify-content:space-between;padding:0 20px;font-size:12px;.arrow-down{margin-left:5px;width:8px;height:8px;display:inline-block;","}.select-area{text-align:left;position:absolute;top:-6px;left:-6px;padding:6px;box-shadow:0px 0px 2px rgba(56,204,227,0.9);border-radius:4px;z-index:",";& > div{white-space:nowrap;}","}.cur-choose{.arrow-down{margin-left:2px;}}.select-item{margin-top:4px;cursor:pointer;&:hover{color:#20bef3;}}.time-count{font-size:12px !important;& > div{font-size:12px !important;margin:0 !important;}}",""],function(e){e=e.theme.darkTheme;return Object(P.css)(["background:",";"],"url(".concat(e?no:to,")"))},l.a.RANK_SELECT,function(e){e=e.theme.darkTheme;return Object(P.css)(["background:",";"],e?"#2e3033":"#fff")},function(e){e=e.theme.darkTheme;return Object(P.css)(["background-color:",";"],e?"#2E3033":"#ffffff")}),ro=P.default.div.withConfig({componentId:"sc-2it59z-1"})(["position:relative;",""],function(e){e=e.theme.darkTheme;return Object(P.css)(["color:",";"],e?"rgba(255, 255, 255, 0.7)":"#666")}),oo={0:Object(Dt.f)("rank_today"),1:Object(Dt.f)("rank_this_week"),2:Object(Dt.f)("week_rank_title"),3:Object(Dt.f)("fans_group_rank")},io=P.default.div.withConfig({componentId:"pnolad-0"})(["display:flex;align-items:center;flex-direction:column;width:100%;> img{width:200px;height:112px;}> span{display:inline-block;padding:10px 0;font-size:12px;font-weight:400;line-height:16px;}",""],function(e){var t=e.theme.darkTheme,e=e.noStyle;return Object(P.css)(["background:",";color:",";"],e?"transparent":t?"#292b2e":"#fff",e?"#FFFFFF":"#999999")}),co=n("wV8y"),r=n("K/dA"),g=n.p+"assets/file/00a0695cbe77060bd998b696fa6397bc.png",lo=Object(P.keyframes)(["0%{opacity:0;}100%{opacity:1;}"]),so=Object(P.keyframes)(["0%{opacity:1;}100%{opacity:0;}"]),uo=(P.default.div.withConfig({componentId:"uukw0u-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;"]),P.default.div.withConfig({componentId:"uukw0u-1"})(["position:absolute;top:0px;left:0;right:0px;z-index:",";"],l.a.LOCAL_TYCOON),P.default.div.withConfig({componentId:"uukw0u-2"})(["display:flex;flex-direction:column;",""],function(e){var t=e.theme,e=t.darkTheme,t=t.isOpen;return Object(P.css)(["background-color:",";animation:"," 0.5s linear;"],e?"#2E3033":"#ffffff",t?so:lo)})),fo=(P.default.div.withConfig({componentId:"uukw0u-3"})(["display:flex;justify-content:space-between;padding:6px 20px 16px 20px;"]),P.default.div.withConfig({componentId:"uukw0u-4"})(["background:rgba(56,204,227,0.1);border-radius:2px;"]),P.default.div.withConfig({componentId:"uukw0u-5"})(["font-size:14px;font-weight:400;line-height:19px;",""],function(e){e=e.theme.darkTheme;return Object(P.css)(["color:",";"],e?"#ffffff":"#666666")}),P.default.div.withConfig({componentId:"uukw0u-6"})(["display:flex;padding-bottom:10px;justify-content:space-around;align-items:flex-end;.host-username{font-size:12px;font-weight:400;"," padding-top:6px;max-width:90px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}> .champion{display:flex;justify-content:center;align-items:center;flex-direction:column;flex:1;> .champion-body{height:75px;width:72px;position:relative;> .avatar{position:absolute;top:0;left:0px;width:72px;height:72px;padding:2px;"," >.user-avatar{width:68px;height:68px;}}> .rank{width:100%;height:17px;position:absolute;left:0;bottom:0;> img{width:auto;height:auto;max-width:100%;max-height:100%;}}}}> .host-second-rank{display:flex;justify-content:center;align-items:center;flex-direction:column;flex:1;> .second-rank-body{width:68px;height:59px;position:relative;> .avatar{position:absolute;top:0;left:6px;width:56px;height:56px;padding:2px;"," >.user-avatar{width:52px;height:52px;}}> .rank{position:absolute;width:100%;height:17px;left:0;bottom:0;> img{width:auto;height:auto;max-width:100%;max-height:100%;}}}}> .host-third-rank{display:flex;justify-content:center;align-items:center;flex-direction:column;flex:1;> .third-rank-body{width:68px;height:59px;position:relative;> .avatar{position:absolute;top:0;left:6px;width:56px;height:56px;padding:2px;"," >.user-avatar{width:52px;height:52px;}}> .rank{width:100%;height:17px;position:absolute;left:0;bottom:0px;> img{width:auto;height:auto;max-width:100%;max-height:100%;}}}}"],function(e){e=e.theme.darkTheme;return Object(P.css)(["color:",";"],e?"#ffffff":"#333333")},function(e){e=e.championBg;return Object(P.css)(["background-image:url(",");background-position:center;background-size:cover;"],e)},function(e){e=e.secondPlaceBg;return Object(P.css)(["background-image:url(",");background-position:center;background-size:cover;"],e)},function(e){e=e.thirdPlaceBg;return Object(P.css)(["background-image:url(",");background-position:center;background-size:cover;"],e)})),mo=P.default.div.withConfig({componentId:"uukw0u-7"})(["position:absolute;width:100%;bottom:0;top:115px;z-index:",";overflow:auto;",""],l.a.LOCAL_TYCOON,r.a),po=P.default.div.withConfig({componentId:"uukw0u-8"})(["position:absolute;width:100%;bottom:0;top:115px;"," z-index:",";overflow:hidden;"],function(e){var t=e.backgroundImage,e=e.isOpen;return Object(P.css)(["background-image:url(",");background-position:center;background-size:cover;animation:"," 0.6s linear;"],Object(co.a)(t),e?lo:so)},l.a.LOCAL_TYCOON),go=P.default.div.withConfig({componentId:"uukw0u-9"})(["position:absolute;width:100%;bottom:0;top:0;background-color:transparent;z-index:",";overflow:auto;",""],l.a.LOCAL_TYCOON_MASK,r.a),ho=P.default.div.withConfig({componentId:"uukw0u-10"})(["position:relative;display:flex;justify-content:center;align-items:center;flex-direction:column;padding:0 10px;min-width:0;"]),bo=P.default.div.withConfig({componentId:"uukw0u-11"})(["padding:20px 0px;font-size:16px;font-weight:600;color:#ffffff;"]),vo=P.default.div.withConfig({componentId:"uukw0u-12"})(["width:349px;height:118px;background-color:#606392;border-radius:8px;> .banner{width:349px;height:118px;border-radius:8px;}"]),xo=P.default.div.withConfig({componentId:"uukw0u-13"})(["display:flex;justify-content:space-between;min-width:0;height:24px;margin:20px 0px;width:100%;> .left{display:flex;align-items:center;font-size:16px;font-weight:500;color:#ffe19a;height:24px;> .rank-icon{height:24px;width:24px;}}> .right{display:none;align-items:center;height:24px;}"]),_o=P.default.div.withConfig({componentId:"uukw0u-14"})(["margin-bottom:20px;background:rgba(255,255,255,0.2);border-radius:4px;width:100%;padding:0 10px;"]),Eo=P.default.div.withConfig({componentId:"uukw0u-15"})(["width:100%;background:rgba(255,255,255,0.2);border-radius:4px;padding:10px;"]),ko=P.default.div.withConfig({componentId:"uukw0u-16"})(["display:flex;justify-content:space-between;height:54px;align-items:center;width:100%;&:not(:last-child){border-bottom:1px solid rgba(0,0,0,0.1);}"]),yo=P.default.div.withConfig({componentId:"uukw0u-17"})(["display:flex;align-items:center;height:54px;flex:3;> .rank-no{background-image:url(",");background-position:center;background-repeat:no-repeat;background-size:cover;font-size:12px;font-weight:600;color:#ffffff;min-height:34px;min-width:34px;text-align:center;line-height:34px;}> .rank-avatar{background:antiquewhite;border-radius:50%;margin:0 10px;width:40px;height:40px;> .rank-user-avatar{width:40px;height:40px;border-radius:50%;}}> .rank-user-name{width:100%;font-size:14px;font-weight:400;color:#ffffff;margin-left:10px;max-width:113px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}"],g),Oo=P.default.div.withConfig({componentId:"uukw0u-18"})(["display:flex;align-items:center;height:54px;font-size:14px;font-weight:400;color:#ffffff;flex:1;justify-content:flex-end;> .gold{width:20px;height:20px;margin:0 5px;}> .account{text-align:left;width:43px;}"]),wo=P.default.div.withConfig({componentId:"uukw0u-19"})(["display:flex;flex-direction:column;width:100%;"]),jo=P.default.div.withConfig({componentId:"uukw0u-20"})(["width:100%;padding:0 20px;display:flex;align-items:flex-end;max-height:144px;"]),Co=P.default.div.withConfig({componentId:"uukw0u-21"})(["display:flex;align-items:center;justify-content:center;width:100%;height:144px;"]),Io=P.default.div.withConfig({componentId:"uukw0u-22"})(["display:flex;align-items:center;padding-top:145px;padding-bottom:145px;"]),So=n.p+"assets/file/4dfc5260d6e1ca39110975129ef5553d.png",No=n.p+"assets/file/a4c98ee4322c6692b3a36f22d4834d98.png",To=n.p+"assets/file/d9f75c0ec3e3ac8c8cc8267d6057442a.png",Lo=function(e,t){var n={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},Ao=P.default.div.withConfig({componentId:"bdtc23-0"})(["display:flex;flex-direction:column;align-items:center;width:109px;margin-right:1px;background-repeat:no-repeat;background-size:cover;",";&:last-child{margin-right:0;}> .user-name{padding:0 5px;text-align:center;width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:14px;font-weight:400;color:#ffffff;margin-top:7px;}> .coins{display:flex;align-items:center;height:20px;margin-bottom:9px;font-size:14px;font-weight:400;color:#ffffff;> .coin{width:20px;height:20px;}}"],function(e){e=e.styleBg;return Object(P.css)(["background-image:url(",");"],e)}),Ro=P.default.div.withConfig({componentId:"bdtc23-1"})(["text-align:center;position:relative;height:61px;width:68px;> .userInfo{position:absolute;left:14px;top:10px;width:40px;height:40px;background-position:center;background-repeat:no-repeat;background-size:cover;line-height:40px;text-align:center;",";> .userAvatar{position:absolute;left:2px;top:2px;width:36px;height:36px;border-radius:50%;}}> .number-no{width:68px;height:17px;position:absolute;left:0px;bottom:0px;}"],function(e){e=e.userBg;return Object(P.css)(["background-image:url(",");"],e)}),Mo=n.p+"assets/file/74539e4f26ee5c26b61635251c3a0e8e.png",Do=n.p+"assets/file/0d5152616d5a45da3ce75deb7f587919.png",Po=n.p+"assets/file/4774ea21a851ba8fd18e6ebf806af1cc.png",Fo=n.p+"assets/file/7d5702d4e58cf5dc0d6b71b5938d28c8.png",Go=n.p+"assets/file/0d6608c2fb6bdf67c0cd6adfa95eec0c.png",Bo=n.p+"assets/file/f7d6ec5c148241f11309351eceb59bab.png",zo=n.p+"assets/file/ae4391b7d0f55efa8e28b671a8356a0e.png",Uo=n.p+"assets/file/ab96239dae1a6fb454c70d3ebcc1e082.png",Ho=n.p+"assets/file/202d6a7c07276b46fe8e382be52d30b1.png",Ko=n.p+"assets/file/6cd0c28b1c3f9f2aaee2389f2faf6018.png",Yo=n.p+"assets/file/5f354828e327f6c9eb09b3d498036951.png",Wo=P.default.div.withConfig({componentId:"npde98-0"})(["display:flex;justify-content:space-between;height:46px;align-items:center;width:100%;&:not(:last-child){border-bottom:1px solid rgba(0,0,0,0.1);}"]),qo=P.default.div.withConfig({componentId:"npde98-1"})(["flex:1;min-width:0;display:flex;align-items:center;font-size:14px;font-weight:400;color:rgba(255,255,255,0.9);> img{margin-right:10px;&.rank-no{width:22px;height:22px;}&.user-avatar{width:40px;height:40px;}}> .title{","}"],O.a),Vo=P.default.div.withConfig({componentId:"npde98-2"})(["display:flex;align-items:center;justify-content:flex-end;font-size:12px;font-weight:400;color:rgba(255,255,255,0.9);> .rewards{display:flex;align-items:center;margin-right:10px;&:last-child{margin-right:0px;}> img{height:24px;width:24px;margin-right:4px;}> .num{width:43px;text-align:left;}}"]),Jo=n.p+"assets/file/1b82d31b9519275326e8715269ccf1a8.png",Xo=n.p+"assets/file/4d3af6d53f0e38892472eb4dba13f057.png",Qo=n.p+"assets/file/274341caa2b377090908b095252ffb34.png",Zo=n.p+"assets/file/3e244efa3854d8338df8ad716fb28e0d.png",$o=P.default.div.withConfig({componentId:"nyk6jm-0"})(["margin-top:20px;display:flex;flex-direction:column;width:100%;"]),ei=P.default.div.withConfig({componentId:"nyk6jm-1"})(["height:22px;display:flex;align-items:center;justify-content:flex-start;font-size:16px;font-weight:400;color:#ffe19a;width:100%;margin-bottom:10px;> img{width:22px;height:22px;margin-right:5px;}"]),ti=P.default.div.withConfig({componentId:"nyk6jm-2"})(["width:100%;background:rgba(255,255,255,0.2);border-radius:4px;padding:10px 10px;"]),ni=P.default.div.withConfig({componentId:"l9k8ix-0"})(["margin-top:20px;display:flex;flex-direction:column;width:100%;"]),ai=P.default.div.withConfig({componentId:"l9k8ix-1"})(["height:24px;display:flex;align-items:center;justify-content:flex-start;font-size:16px;font-weight:400;color:#ffe19a;width:100%;margin-bottom:10px;> img{width:22px;height:22px;margin-right:5px;}"]),ri=P.default.div.withConfig({componentId:"l9k8ix-2"})(["width:100%;border-radius:4px;display:flex;flex-direction:column;"]),oi=P.default.div.withConfig({componentId:"l9k8ix-3"})(["width:100%;padding:0 20px;display:flex;align-items:flex-end;max-height:144px;"]),ii=n.p+"assets/file/e45e9c44cc5874377083fcb1c0f69f7e.png",ci=P.default.div.withConfig({componentId:"qx6d8d-0"})(["margin-top:20px;display:flex;flex-direction:column;width:100%;overflow:auto;"]),li=P.default.div.withConfig({componentId:"qx6d8d-1"})(["height:24px;display:flex;align-items:center;justify-content:flex-start;font-size:16px;font-weight:400;color:#ffe19a;width:100%;margin-bottom:10px;> img{width:22px;height:22px;margin-right:5px;}"]),si=P.default.div.withConfig({componentId:"qx6d8d-2"})(["width:100%;background:rgba(255,255,255,0.2);border-radius:4px;padding:10px;margin-bottom:30px;overflow:auto;> img{width:100%;max-width:100%;}"]),ui=n.p+"assets/file/38448dfd739f61ce5dec9ddeca0f3a60.png",fi=function(e,i,c,l){return new(c=c||Promise)(function(n,t){function a(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(a,r)}o((l=l.apply(e,i||[])).next())})},di=0,mi=P.default.div.withConfig({componentId:"o9gtrh-0"})(["padding-top:4px;.load-wrapper{margin:40px auto;width:24px;}.hover-item-wrapper{position:relative;.hover-item-content{position:absolute;top:0px;left:0px;right:0px;z-index:",";}}"," ",""],l.a.LOCAL_TYCOON_MASK,function(e){e=e.theme.darkTheme;return Object(P.css)(["background-color:",";color:",";.hover-item-wrapper{.hover-item-content{background-color:",";color:",";}}"],e?"#2E3033":"#ffffff",e?"rgba(255,255,255,0.9)":"#333333",e?"#2E3033":"#ffffff",e?"rgba(255,255,255,0.9)":"#333333")},function(e){return e.more&&Object(P.css)(["z-index:",";"],l.a.LOCAL_TYCOON_MASK)}),n=(P.default.div.withConfig({componentId:"o9gtrh-1"})(["display:flex;align-self:center;flex-direction:column;font-size:12px;font-weight:400;padding:0 20px;min-width:0;width:100%;"," ",""],function(e){e=e.theme.darkTheme;return Object(P.css)(["background-color:",";color:",";"],e?"#2E3033":"#ffffff",e?"rgba(255,255,255,0.9)":"#333333")},function(e){return e.more&&Object(P.css)(["z-index:",";"],l.a.LOCAL_TYCOON_MASK)}),n.p+"assets/file/f3a2cf9732a9ca7e241f2caadb41f835.png"),pi=P.default.div.withConfig({componentId:"so2z54-0"})(["display:flex;height:40px;justify-content:space-between;align-items:center;min-width:0;margin-bottom:6px;padding:0 20px;> .user-info{flex:1;display:flex;align-items:center;> .rank{width:20px;text-align:center;font-size:14px;}> .mask{display:flex;justify-content:center;align-items:center;margin-right:5px;}> .info{> .username{font-size:13px;max-width:130px;overflow:hidden;font-weight:600;text-overflow:ellipsis;white-space:nowrap;margin-right:13px;margin-bottom:3px;}> .level-wrapper{display:flex;align-items:center;}}}> .heart-container{display:flex;align-items:center;> .heart{display:inline-block;vertical-align:middle;width:14px;height:14px;background:url(",") no-repeat;background-size:100% 100%;margin-right:2px;}> .num{width:45px;font-size:12px;}}",""],n,function(e){e=e.theme.darkTheme;return Object(P.css)(["> .user-info{.username{color:",";}> .rank{color:",";}}"],e?"rgba(255, 255, 255, .9)":"#333333",e?"rgba(255, 255, 255, .7)":"#666666")}),gi=function(e,i,c,l){return new(c=c||Promise)(function(n,t){function a(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(a,r)}o((l=l.apply(e,i||[])).next())})},hi=function(e,i,c,l){return new(c=c||Promise)(function(n,t){function a(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(a,r)}o((l=l.apply(e,i||[])).next())})},bi=function(e,i,c,l){return new(c=c||Promise)(function(n,t){function a(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(a,r)}o((l=l.apply(e,i||[])).next())})},vi="chat",xi="gift";try{var _i=Object(p.a)(JSON.parse(localStorage.getItem(an.ub)||"{}")),Ei=Object.assign(gr.a,_i)}catch(e){Ei=gr.a,D.a.error(e,{description:"Get MSG_DISPLAY_CONFIG error"})}t.a=function(e){var t=e.roomType,n=e.popoutMode,a=e.roomSettingPage,s=e.roomId,r=e.loading,u=e.anchorInfo,o=e.layout,f=e.isAdmin,i=e.playMode,c=e.luckyDraw,l=e.adminType,d=e.chatPanelType,m=e.isInPopoutMode,p=e.happyBagMsgList,g=e.happyBagAcrossMsgList,h=e.happyBagInteractionData,b=e.happyBagRecycelList,v=e.headlineEnable,x=e.currentHeadline,_=e.openHeadlineDialog,E=Object(yt.useContext)(Gt.a),k=E.happyBagMsgList,y=E.happyBagAcrossMsgList,O=E.happyBagInteractionData,w=E.happyBagRecycelList,j=E.fansGroupInteractionData,C=E.firstChargeGiftCash,I=Object(un.a)(),S=Ft.a.getState().configure,N=Object(wt.g)(),T=Object(Xt.a)([]),L=kt()(T,2),A=L[0],R=L[1],M=Object(Xt.a)([]),D=kt()(M,2),P=D[0],F=D[1],G=Object(yt.useRef)(null),B=Object(yt.useState)([]),z=kt()(B,2),U=z[0],H=z[1],K=Object(yt.useState)(!1),Y=kt()(K,2),W=Y[0],q=Y[1],V=Object(yt.useState)(vi),J=kt()(V,2),X=J[0],Q=J[1],Z=Object(yt.useState)(0),$=kt()(Z,2),e=$[0],ee=$[1],E=Object(yt.useState)(!1),T=kt()(E,2),L=T[0],te=T[1],M=Object(yt.useState)({}),D=kt()(M,2),ne=D[0],ae=D[1],re=Object(yt.useRef)(null),B=Object(br.a)(s).paymessageConfig,oe=S.gift.giftIdMapDetail,z=Object(yt.useState)(Ei.giftMsgDisplay),K=kt()(z,2),ie=K[0],ce=K[1],Y=Object(yt.useState)(Ei.tapMsgDisplay),le=kt()(Y,1)[0],V=Object(yt.useState)(Ei.followMsgDisplay),J=kt()(V,2),se=J[0],ue=J[1],Z=Object(yt.useState)(Ei.subscriptionMsgDisplay),$=kt()(Z,2),fe=$[0],de=$[1],E=Object(yt.useState)(Ei.guestMsgDisplay),T=kt()(E,2),me=T[0],pe=T[1],M=Object(yt.useState)(Ei.payMessageDisplay),D=kt()(M,2),ge=D[0],he=D[1],z=Object(yt.useState)(Ei.userEnterMessageDisplay),K=kt()(z,2),be=K[0],ve=K[1],Y=Object(yt.useState)(Ei.giftEffectDisplay),V=kt()(Y,2),xe=V[0],_e=V[1],J=Object(yt.useState)(Ei.magicBoxEffectDisplay),Z=kt()(J,2),Ee=Z[0],ke=Z[1],$=Object(yt.useState)(Ei.happyBagPopMsgDisplay),E=kt()($,2),ye=E[0],Oe=E[1],T=Object(yt.useState)(Ei.sengGiftByChatKeywordsDisplay),M=kt()(T,2),we=M[0],je=M[1],D=Object(yt.useState)(!0),z=kt()(D,2),Ce=z[0],Ie=z[1],K=Object(yt.useState)(!1),Y=kt()(K,2),V=Y[0],Se=Y[1],J=Object(yt.useState)({anchor_id:0,anchor_name:"",user_id:0,follow_tag:0}),Z=kt()(J,2),$=Z[0],Ne=Z[1],Te=Object(yt.useRef)(),Le=Object(yt.useRef)(),Ae=Object(yt.useRef)(),Re=Object(yt.useRef)(null),Me=Object(On.a)({anchorInfo:u}).guestGz;Nt();var E=Object(fn.a)(o),T=E.chatUserCardId,M=E.selectChatMsg,De=E.setChatUserCardId,D=Object(yt.useMemo)(function(){var e={giftMsgDisplay:ie,tapMsgDisplay:le,followMsgDisplay:se,subscriptionMsgDisplay:fe,guestMsgDisplay:me,payMessageDisplay:ge,userEnterMessageDisplay:be,giftEffectDisplay:xe,magicBoxEffectDisplay:Ee,happyBagPopMsgDisplay:ye,sengGiftByChatKeywordsDisplay:we};return Ei=e,localStorage.setItem(an.ub,JSON.stringify(e)),e},[se,ie,me,ge,fe,le,be,xe,Ee,ye,we]),z=Object(yt.useMemo)(function(){return{setGiftMsgDisplay:ce,setFollowMsgDisplay:ue,setSubscriptionMsgDisplay:de,setGuestMsgDisplay:pe,setPayMessageDisplay:he,setUserEnterMessageDisplay:ve,setGiftEffectDisplay:_e,setMagicBoxEffectDisplay:ke,setHappyBagPopMsgDisplay:Oe,setSengGiftByChatKeywordsDisplay:je}},[]),Pe=Object(yt.useCallback)(function(e){e&&kn.a.showInfoMessage(Object(Dt.f)("liveroom_socket_chat_too_often"),Le.current,5e3,"message--chat-panel")},[]),Fe=Object(yt.useCallback)(function(){return bi(void 0,void 0,void 0,Et.a.mark(function e(){var t,n;return Et.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Pt.Y)(s);case 2:t=e.sent,n={},t.fans_group_emotions&&t.fans_group_emotions instanceof Array&&(n.fansGroupEmotions=t.fans_group_emotions.filter(function(e){return!e.illegal}).sort(function(e,t){return(null==t?void 0:t.level)-(null==e?void 0:e.level)})),n.defaultEmotions=t.official_emotions,ae(function(){return Object.assign({},n)});case 7:case"end":return e.stop()}},e)}))},[s]),Ge=Object(yt.useCallback)(function(){kn.a.showInfoMessage(Object(Dt.f)("liveroom_chat_must_fans"),Le.current,5e3,"message--chat-panel")},[]),Be=Object(yt.useCallback)(function(){var e=Ft.a.getState().user,t=u.living,n=u.roomSetting;q(Boolean(!t&&(null==n?void 0:n.noChatOffLive)&&(e&&s!==e.user_id||!e)))},[u,s]),ze=Object(yt.useCallback)(function(e){var t=Ft.a.getState().user;return e.filter(function(e){return!(!e.userId&&!me&&e.cmd!==It.B)&&(e.cmd!==It.v&&e.cmd!==It.s||(!!(t&&t.user_id===s||f)||!zt()(null==t?void 0:t.userBlackList,{user_id:e.userId})))})},[me,f,s]),Ue=Object(yt.useCallback)(function(){G.current||(G.current=new sn.MsgList.MsgListContoller(ze,{anchorId:s,chatListMaxSize:500}))},[ze,s]);Object(yt.useEffect)(function(){return G.current&&G.current.reset(),function(){G.current=null}},[s,a]);function He(){kn.a.create(Object(Dt.f)("player_force_exit"),kn.a.MSG_TYPE_WARNING)}var Ke=Object(yt.useCallback)(function(e){var t;(e.cmd===It.z||e.cmd===It.B&&e.runCmd===It.E||e.cmd===It.Y)&&((null==(t=P)?void 0:t.length)>Kt.l&&t.splice(0,100),F([].concat(_t()(t),[e])))},[P,F]),Ye=Object(yt.useCallback)(function(e){e=(G.current.isFirstLoad?Object(mn.b):Object(mn.a))(e);R(e),G.current.updateChatlistSilent(e)},[R]),We=Object(yt.useCallback)(function(){G.current&&Ye(G.current.chatList)},[Ye]),qe=Object(yt.useCallback)(function(e){var t=Wt.a.getUserId(),e=e;Ke(e),t===e.userId&&e.cmd!==It.z?e.order=Kt.j.HIGH:e.order=Kt.j.NORMAL,e.block=!1,G.current||Ue(),G.current.addItem(e)},[Ke,Ue]),Ve=Object(yt.useCallback)(function(e){0<e.admin?jt.h.emit(jt.g.SET_ADMIN_STATUS,!0):jt.h.emit(jt.g.SET_ADMIN_STATUS,!1),jt.h.emit(jt.g.SET_ADMIN_TYPE,e.admin)},[]),Je=Object(yt.useCallback)(function(e){e=e.msgId;G.current.updateItem(e,{recall:!0})},[]),Xe=Object(yt.useCallback)(function(t){var e=Ft.a.getState().user,n=e&&(e.userBlackList||[]).find(function(e){return e.user_id===t.userId});ge&&((!e||e.user_id!==s)&&n||qe(t))},[qe,ge,s]),Qe=Object(yt.useCallback)(function(e){var t=e.boxWinObj&&e.boxWinObj.awards instanceof Array?e.boxWinObj.awards:[],n=e.sponsorObj||{};t.length&&n&&(t=t[0],t={cmd:It.N,medals:[],type:3,msg:"",roomId:s,userName:e.boxWinObj.userName,userId:e.boxWinObj.userId,level:e.boxWinObj.level,sponsorName:n.userName,sponsorLevel:n.level,sponsorId:n.userId,award:t},qe(t))},[s,qe]),Ze=Object(yt.useCallback)(function(t){t.level&&0<t.level&&t.userId&&0<t.userId&&be&&(U.includes(t.userId)||(H(function(e){return[].concat(_t()(e),[t.userId])}),1e3<U.length&&H(function(e){return e.shift(),_t()(e)}),qe(t)))},[U,qe,be]),$e=Object(yt.useCallback)(function(e){var t,n=oe[e.giftId],a=Ft.a.getState().user;if(n){var r={};r.giftName=n.name,r.giftImg=n.picture,r.category=n.category,r.gift_play_type=n.giftPlayType,r.effect_res_url=null===(t=n.effectResource)||void 0===t?void 0:t.id,r.effect_dynamic_items=n.effctDynamicItems,r.giftType=n.type,r.like_count=0,r.is_like=!1;var o,i=Object.assign(Object.assign({},e),r),c={};switch(!i.notifyObj||null!=(r=i.notifyObj.gift_box)&&r.id&&(i.boxName=(null==r?void 0:r.name)||"",i.boxId=r.id,null!==(o=null==S?void 0:S.giftBox)&&void 0!==o&&o.forEach(function(e){e.boxId===i.boxId&&(c.effect_res_url=e.svgUrl)}),c.category=3,c.userId=i.userId,c.giftEffect=i.giftEffect,c.giftImg=i.giftImg,c.effect_dynamic_items=["gift_img"]),!ie&&(null==a?void 0:a.user_id)!==(null==i?void 0:i.userId)||(qe(i),null!==(o=null==i?void 0:i.gareaReturnObj)&&void 0!==o&&o.first_gift_send&&(o={lt:"click",af:"live_room",bf:"gift_effect",cf:"first_gift_user",action:"expose",live_type:u.liveType,room_id:s,category:2===u.liveType?u.gameKey:u.categoryKey,host_level:u.level,host_official_type:u.anchorGroup&&u.anchorGroup[0]||"",live_id:u.logId},At.a.handleDataCount(o))),C&&null!=C&&C.isFirstTopUp&&(null==C?void 0:C.paidGiftId)===e.giftId&&!localStorage.getItem(jt.g.HAS_POP_SPECIAL_ACTIVE)&&setTimeout(function(){localStorage.setItem(jt.g.HAS_POP_SPECIAL_ACTIVE,"1"),jt.h.emit(jt.g.OPEN_SPECIAL_ACTIVE_DIALOG,"others_gift_send")},7e3),Number(i.category)){case 0:case 1:case 2:i.boxId&&(null==a?void 0:a.user_id)===(null==i?void 0:i.userId)&&jt.h.emit(jt.c.GIFT_ADD_LUXURY_GIFT,c),jt.h.emit(jt.g.GIFT_ADD_GIFT,i);break;case 3:i.boxId&&jt.h.emit(jt.c.GIFT_ADD_LUXURY_GIFT,c),jt.h.emit(jt.c.GIFT_ADD_LUXURY_GIFT,i)}a&&a.user_id===i.userId&&i.giftType===nn.b.GIFT_BOXES&&jt.h.emit(jt.g.UPDATE_USER_PACK,i)}},[u.anchorGroup,u.categoryKey,u.gameKey,u.level,u.liveType,u.logId,S.giftBox,C,oe,ie,qe,s]),et=Object(yt.useCallback)(function(e){var t,n=Ft.a.getState().user;n&&e.userId===n.user_id&&((t=e.time||0)<3600?(n=Object(Dt.f)("admin_be_blocked_tip2_minute").replace("{{time}}",String(Math.floor(t/60))),Object(Bt.b)({content:n,withCancelButton:!1})):31536e3<t?Object(Bt.b)({content:Object(Dt.f)("admin_be_blocked_tip2_forever"),withCancelButton:!1}):(t=Object(Dt.f)("admin_be_blocked_tip2_day").replace("{{time}}",String(Math.floor(t/86400))),Object(Bt.b)({content:t,withCancelButton:!1})),qe(e))},[qe]),tt=Object(yt.useCallback)(function(e){var t=Ft.a.getState().user;t&&t.user_id===e.userId&&qe(e)},[qe]),nt=Object(yt.useCallback)(function(e){var t=Ft.a.getState().user;t&&e.adminId===t.user_id&&(jt.h.emit(jt.g.SET_ADMIN_STATUS,!0),jt.h.emit(jt.g.SET_ADMIN_TYPE,2),Object(Bt.b)({content:Object(Dt.f)("admin_be_added_tip1"),withCancelButton:!1})),qe(e)},[qe]),at=Object(yt.useCallback)(function(e){e=Object.assign({cmd:It.o},e);qe(e)},[qe]),rt=Object(yt.useCallback)(function(e){e=e.msg_data;qe({cmd:It.t,msg:e,msgTextColor:"#cccccc"})},[qe]),ot=Object(yt.useCallback)(function(e){var t=Ft.a.getState().user;t&&e.adminId===t.user_id&&(jt.h.emit(jt.g.SET_ADMIN_STATUS,!1),jt.h.emit(jt.g.SET_ADMIN_TYPE,0),Object(Bt.b)({content:Object(Dt.f)("admin_be_deleted_tip1"),withCancelButton:!1})),qe(e)},[qe]),it=Object(yt.useCallback)(function(e){qe({cmd:Ct.l.BEFORE_END,msg:(null==e?void 0:e.data)||{}})},[qe]),ct=Object(yt.useCallback)(function(e){qe({cmd:Ct.l.START_LIVE,msg:(null==e?void 0:e.data)||{}})},[qe]),lt=Object(yt.useCallback)(function(){var e,t=Ft.a.getState().user,n=0,a=0;if(t&&!f&&t.user_id!==u.anchorId||!t){var r=u.ifFollow,o=u.roomSetting;if(o&&(n=o.chatMustFans,a=o.chatLevelLimit),o=Ot.a.createElement("div",{className:"chat-panel___mention-follow-panel"},Ot.a.createElement("div",{className:"chat-panel___mention-follow-panel__icon"}),Ot.a.createElement("span",null,Object(Dt.f)("chat_need_follow"))),Boolean(n)&&!r)return!t&&Me?null:o;if(0<a&&(t&&!f&&t.user_id!==u.anchorId&&(null==t?void 0:t.level)<a||!t)){a=Object(Dt.f)("chat_level_limit").replace("{{level}}",String(a));return o=Ot.a.createElement("div",{className:"chat-panel___mention-follow-panel"},Ot.a.createElement("div",{className:"chat-panel___mention-follow-panel__icon"}),Ot.a.createElement("span",null,a))}if(Ce&&c&&c.drawing&&(null===(e=c.detail)||void 0===e||!e.joined)&&u.living&&(null===(e=c.detail)||void 0===e?void 0:e.startDrawType)===Qt.b.ANY_CHAT)return Boolean(n)&&!r?o:o=Ot.a.createElement("div",{className:"chat-panel__lucky-draw-ongoing-panel"},Ot.a.createElement("div",{className:"chat-panel__lucky-draw-ongoing-panel__icon"}),Ot.a.createElement("span",null,Object(Dt.f)("luckydraw_ongoing")),Ot.a.createElement("div",{className:"chat-panel__lucky-draw-ongoing-panel__close-icon",onClick:function(){Ie(!1)}}))}return null},[u,f,Ce,c,Me]),st=Object(yt.useCallback)(function(){var t,n,a=Wt.a.getUserInfo();!f&&a&&a.user_id!==s&&(t=!1,n=[],A.forEach(function(e){t=!!zt()(a.userBlackList,{user_id:e.userId}),e.block=t,n.push(e)}),R(n),G.current.updateChatlistSilent(A))},[A,f,s,R]),ut=Object(yt.useCallback)(function(e){try{var t=e.executorId,n=e.executedIdArr,a=A;s===t&&(null!=n&&n.forEach(function(t){a=a.filter(function(e){return"on_fold_msg"===e.cmd?(e.users=e.users.filter(function(e){return e.userId!==t}),!!e.users.length):t!==e.userId})}),R(a),G.current.updateChatlistSilent(a))}catch(e){console.error(e)}},[A,s,R]),ft=Object(yt.useCallback)(function(e){var t,n=Ft.a.getState().user;e.runCmd===It.C?se&&qe(e):e.runCmd===It.F?qe(e):e.runCmd===It.E?(fe||e.runBody&&n&&n.user_id===e.runBody.user_id)&&qe(e):e.runCmd===It.R?e.runBody.room_setting&&(t={chatInterval:(t=e.runBody.room_setting).chat_interval,chatMustFans:t.chat_must_fans,guestChatInterval:t.guest_chat_interval,noChatOffLive:t.no_chat_off_live,chatLevelLimit:t.chat_level_limit},jt.h.emit(jt.g.UPDATE_ANCHOR_INFO,Object.assign(Object.assign({},u),{roomSetting:t})),lt(),Be()):e.runCmd===It.H&&(n={followTag:e.runBody.follow_tag,userId:e.runBody.user_id,anchorId:e.runBody.anchor_id,userName:null==n?void 0:n.loginname},Se(!0),Ne(e.runBody),qe(Object.assign(Object.assign({},e),{runBody:n})))},[u,se,lt,qe,fe,Be]),dt=Object(yt.useCallback)(function(e){var t=e.trailer_label,n=e.user_id,e=function(){n&&N.push("/".concat(n))};o===Kt.h.FULLSCREEN?kn.a.showInfoMessage(Ot.a.createElement("div",{onClick:e},Ot.a.createElement("div",{className:"content_full"},Ot.a.createElement("img",{src:xr.a,alt:"",className:"notice_img_full"}),Ot.a.createElement("span",{className:"text_full"},"".concat(t)),Ot.a.createElement("img",{src:vr.a,alt:"",className:"move_img_full"}))),Le.current,16e3,"chat-panel_live_begin_toast_fullscreen"):kn.a.showInfoMessage(Ot.a.createElement("div",{onClick:e},Ot.a.createElement("div",{className:"content"},Ot.a.createElement("img",{src:xr.a,alt:"",className:"notice_img"}),Ot.a.createElement("span",{className:"text"},"".concat(t)),Ot.a.createElement("img",{src:vr.a,alt:"",className:"move_img"}))),Le.current,8e3,"chat-panel_live_begin_toast")},[]);Object(yt.useEffect)(function(){localStorage.setItem(an.hb,"0"),localStorage.setItem(an.Cb,"null"),localStorage.setItem(an.Db,"0")},[]),Object(yt.useEffect)(function(){Fe(),R([]),H([])},[Fe]),Object(yt.useEffect)(function(){return jt.h.on(jt.g.FANS_GROUP_BUY_SUCCESS,Fe),function(){jt.h.off(jt.g.FANS_GROUP_BUY_SUCCESS)}},[Fe]),Object(yt.useEffect)(function(){re.current&&re.current.stopAnimationTemp()},[o,d]);var mt=Object(yt.useCallback)(function(t){A.forEach(function(e){(null==e?void 0:e.msgId)===t.msgId&&("count"===t.type&&G.current.updateItem(t.msgId,{like_count:e.like_count+=1}),"like"===t.type&&G.current.updateItem(t.msgId,{is_like:!0}))})},[A]);Object(yt.useEffect)(function(){return Be(),tn.a.on(s,It.v,qe),tn.a.on(s,It.t,qe),tn.a.on(s,It.s,qe),tn.a.on(s,It.q,Ze),tn.a.on(s,It.Y,Xe),tn.a.on(s,It.z,$e),tn.a.on(s,It.A,Je),tn.a.on(s,It.O,Qe),tn.a.on(s,It.y,He),tn.a.on(s,It.x,et),tn.a.on(s,It.u,tt),tn.a.on(s,It.r,nt),tn.a.on(s,It.w,ot),tn.a.on(s,It.B,ft),tn.a.on(s,It.c,Ve),jt.h.on(jt.g.UPDATE_ON_CHAT,qe),jt.h.on(jt.g.SEND_CHAT_MUST_FANS,Ge),jt.h.on(jt.g.SEND_CHAT_TOO_FAST,Pe),jt.h.on(jt.g.SHOW_LIVE_START_TOAST,dt),jt.h.on(jt.g.CHANGE_GIFT_MSG,mt),on.b.on(on.a.ON_MESSAGE,at),Ut.b.on(Ut.a.BLACK_LIST_CHANGE,st),St.a.on(Ct.l.BEFORE_END,it),St.a.on(Ct.l.START_LIVE,ct),Ut.b.on(Ut.a.ANCHOR_BLACKLIST_ADD,ut),sn.MsgList.MsgListEventemitter.on(sn.MsgList.TYPE.CHATLIST_UPDATE,We),ln.b.on(s,cn.d,rt),function(){tn.a.off(s,It.v,qe),tn.a.off(s,It.t,qe),tn.a.off(s,It.s,qe),tn.a.off(s,It.q,Ze),tn.a.off(s,It.Y,Xe),tn.a.off(s,It.z,$e),tn.a.off(s,It.A,Je),tn.a.off(s,It.O,Qe),tn.a.off(s,It.y,He),tn.a.off(s,It.x,et),tn.a.off(s,It.u,tt),tn.a.off(s,It.r,nt),tn.a.off(s,It.w,ot),tn.a.off(s,It.B,ft),tn.a.off(s,It.c,Ve),jt.h.off(jt.g.UPDATE_ON_CHAT,qe),jt.h.off(jt.g.SEND_CHAT_MUST_FANS,Ge),jt.h.off(jt.g.SEND_CHAT_TOO_FAST,Pe),jt.h.off(jt.g.SHOW_LIVE_START_TOAST,dt),jt.h.off(jt.g.CHANGE_GIFT_MSG,mt),on.b.off(on.a.ON_MESSAGE,at),Ut.b.off(Ut.a.BLACK_LIST_CHANGE,st),Ut.b.off(Ut.a.ANCHOR_BLACKLIST_ADD,ut),sn.MsgList.MsgListEventemitter.off(sn.MsgList.TYPE.CHATLIST_UPDATE,We),ln.b.off(s,cn.d,rt),St.a.off(Ct.l.BEFORE_END,it),St.a.off(Ct.l.START_LIVE,ct)}},[s,Ge,Pe,qe,Je,Ve,Be,Qe,Xe,Ze,$e,et,tt,nt,ft,dt,at,ot,rt,We,mt,st,it,ct,ut]),Object(yt.useEffect)(function(){var e=o===Kt.h.FULLSCREEN?document.getElementById("fullscreen-chatpanel"):(i===Kt.k.REALTIME_PLAYBACK?Ae:Le).current;Re.current=Object(qt.createConfirmation)(Object(qt.confirmable)(pn.a),1e3,e)},[o,i]),Object(yt.useEffect)(function(){De(0)},[s,d,De]);function pt(e){ee(e)}function gt(){return Ot.a.createElement(hr.f,{isFullScreen:o===Kt.h.FULLSCREEN,onClick:function(){re.current.clickToBottom()}},Object(Dt.f)("new_comment"))}var ht=Object(yt.useCallback)(function(e){var t=o===Kt.h.FULLSCREEN?document.getElementById("fullscreen-chatpanel"):Le.current;return kn.a.showInfoMessage(e,t,5e3,"message--chat-panel--center"),!0},[o]),bt=Object(yt.useCallback)(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.className="chat-panel__confirm-box",Re.current({confirmation:e,options:t})},[]),K=function(e){var t,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],a=2<arguments.length?arguments[2]:void 0,r=Ft.a.getState().user,o=u.roomSetting;if(Be(),W)return Object(Bt.b)({content:Object(Dt.f)("chat_need_on_live"),withCancelButton:!1}),null===(t=Te.current)||void 0===t?void 0:t.blur();var i=e.trim();if(!function(e){var t=Ft.a.getState().user,n=u.fansGroup,a=ne.fansGroupEmotions,r="";if(Rt()(e,/\[\/(\d+)\]/g,function(e){var t=Number(e);a&&a.find(function(e){return e.id===t})&&(r+="[/".concat(e,"]"))}),n&&n.isGroupMember||t&&t.user_id===s||0===r.length)return!1;return Object(Bt.b)({content:Ot.a.createElement(Mt.a,{source:Object(Dt.f)("fold_msg_no_fans_right"),replace:"{{emotion}}"},Ot.a.createElement("span",{style:{color:"rgba(32, 190, 243, 0.95)"}},r)),cancelText:"".concat(Object(Dt.f)("fold_msg_no_fans_cancel")),okText:Ot.a.createElement(Ot.a.Fragment,null,Ot.a.createElement("img",{src:dn,style:{width:20,height:20,verticalAlign:"middle",marginTop:-3,marginRight:3},alt:"fans"}),Object(Dt.f)("fold_msg_no_fans_go"))}).then(function(e){e&&u&&jt.h.emit(jt.g.OPEN_SUBSCRIPTION_DIALOG)}),!0}(i)&&(i=Object(Jt.a)(i),(r||!n)&&i&&!/^\s*$/.test(i))){e=en.b(i,s,u,f);if(a){var c,l="";for(c in a)a.hasOwnProperty(c)&&(l+="`".concat(c,"=").concat(a[c]));e.nonopara=l}e&&tn.a.request(s,e).then(function(e){e.rst===$t.a.FORBIDDEN?(Object(Bt.b)({content:Object(Dt.f)("admin_be_blocked_tip2"),withCancelButton:!1}),te(!1)):e.rst===$t.a.WS_ERROR?o&&(!r&&0<o.chatLevelLimit||(null==r?void 0:r.level)<o.chatLevelLimit)&&(e=Object(Dt.f)("chat_level_limit").replace("{{level}}",String(o.chatLevelLimit)),kn.a.showInfoMessage(e,Le.current,5e3,"message--chat-panel")):(n&&te(!0),jt.h.emit(jt.c.CHAT_PANEL_MSG_SEND,i))}).catch(function(){kn.a.create(Object(Dt.f)("player_send_msg_timeout"),kn.a.MSG_TYPE_ERROR)})}},vt=Object(yt.useCallback)(function(e){re.current.setMessageListAutoScroll(e)},[]),xt=Object(yt.useCallback)(function(e,t){return Ot.a.createElement("div",{style:{padding:"0 17px"},key:t},Ot.a.createElement(Ht.a,{msgIndex:t,roomId:s,msg:e,isFullScreen:o===Kt.h.FULLSCREEN,showConfirm:bt,showToast:ht,block:e.block,emotion:ne,setMessageListAutoScroll:vt,isPlayBack:!1,anchorInfo:u,layout:o}))},[u,ne,o,vt,s,bt,ht]),Y=function(){var e=o===Kt.h.FULLSCREEN?{darkTheme:!0,isFullScreen:!0}:I;return Ot.a.createElement(sn.MsgList.Component,{ref:re,rowRenderFunc:xt,action:e,chatList:A,gotoBtmRenderFunc:gt,styleProp:{left:X===vi?"0px":"-50000px"}})};Object(yt.useEffect)(function(){switch(n){case"chat":Q(vi);break;case"gift":Q(xi);break;default:Q(vi)}},[n]);J=[];"gift"!==n&&J.push({key:vi,label:Object(Dt.f)("room_setting_chat_list")}),!a&&"gift"!==n||J.push({key:xi,label:Object(Dt.f)("gift_history")});Z=t!==nn.d.NORMAL&&1===J.length&&J[0].key===vi,E=u&&2===u.liveType,d=Ft.a.getState().user;return Ot.a.createElement(Ot.a.Fragment,null,i===Kt.k.LIVE&&Ot.a.createElement(hr.e,{ref:Le,showAnounce:Z,isInPopoutMode:m,roomSettingPage:a,style:{display:o!==Kt.h.FULLSCREEN?"flex":"none"}},Ot.a.createElement(Yt.a,{value:{roomType:t,roomId:s,layout:o,playMode:i,anchorInfo:u,isAdmin:f,adminType:l,giftEffectDisplay:xe,emotion:ne,roomMsgDisplayConfig:D,setRoomMsgDisplayConfig:z,sendMessage:K,paymessageConfig:B,happyBagMsgList:p||k,happyBagRecycelList:b||w,happyBagAcrossMsgList:g||y,happyBagMsgImg:(null==h?void 0:h.chatPic)||O.chatPic}},o!==Kt.h.FULLSCREEN&&Ot.a.createElement(Ot.a.Fragment,null,Ot.a.createElement(hr.c,null,Ot.a.createElement(Vt.a,null,-1===N.location.pathname.indexOf(Zt.a.LIVE)&&Ot.a.createElement(hn,null)),t===nn.d.NORMAL?null:Z&&!m?Ot.a.createElement(_n.a,{text:u?u.liveIntro||Object(Dt.f)("anounce_empty_text"):"",type:_n.a.TYPE_LIVE}):Ot.a.createElement(hr.h,null,J.map(function(e){return Ot.a.createElement("div",{key:e.key,onClick:function(){e.key===vi&&pt(0),Q(e.key)},className:e.key===X?"active":""},e.label)}))),!a&&!m&&(t===nn.d.NORMAL?Ot.a.createElement(Ja,null):Ot.a.createElement(Gr,{name:u.name,roomId:s,isLiving:u.living,fansGroupInteractionData:j})),u.living&&v&&x?Ot.a.createElement(Lt.a,{headline:x,onClick:_}):null,Ot.a.createElement(Tt,null),!a&&!m&&Ot.a.createElement(rn,{anchorInfo:u}),X!==xi?Ot.a.createElement(Vt.a,null,Ot.a.createElement(En.a,{roomId:s,isLiving:u.living,roomSettingPage:a,isInPopoutMode:m,payMessageDisplay:ge})):null,X===xi&&Ot.a.createElement(hr.g,null,Ot.a.createElement("div",{className:"history-tab-item ".concat(0===e?"on":""),onClick:function(){pt(0)}},Object(Dt.f)("gift_history_tab")),Ot.a.createElement("div",{className:"history-tab-item ".concat(1===e?"on":""),onClick:function(){pt(1)}},Object(Dt.f)("pay_msg_history_tab"))),Ot.a.createElement(hr.d,{showAnounce:Z},r?Ot.a.createElement(_r.a,null):Ot.a.createElement(Vt.a,{fallback:function(){return Ot.a.createElement(_r.a,null)}},Y(),a||"gift"===n?Ot.a.createElement(vn,{roomId:s,chatList:P,needFetchGiftHistory:X===xi,giftActiveTab:e,styleProp:{left:X===xi?"0px":"-50000px"}}):null)),W?Ot.a.createElement("div",{className:"chat-panel___mention-follow-panel"},Ot.a.createElement("div",{className:"chat-panel___mention-follow-panel__icon"}),Ot.a.createElement("span",null,Object(Dt.f)("chat_need_on_live"))):lt(),V&&Ot.a.createElement(wn,{isFollow:$.follow_tag,anchorId:u.anchorId,liveId:u.logId}),Ot.a.createElement(Vt.a,null,Ot.a.createElement(gn,null))),!m&&Ot.a.createElement(Ot.a.Fragment,null,Ot.a.createElement(hr.a,{roomSettingPage:a},Ot.a.createElement(Vt.a,null,Ot.a.createElement(hr.b,null,Ot.a.createElement(yn.a,{roomSettingPage:a,roomId:s,isLiving:u.living,liveType:u.liveType})),Ot.a.createElement(xn.a,{roomSettingPage:a,sendMessage:K,inputIsFocus:L,anchorInfo:u,noLogin:!d})))),0<T&&Ot.a.createElement(Cn.a,{cardId:T,selectChatMsg:M,close:function(){return De(0)},chatPanelEl:Le.current}))),o===Kt.h.FULLSCREEN&&i===Kt.k.LIVE&&Ot.a.createElement(Yt.a,{value:{roomType:t,roomId:s,emotion:ne,layout:o,playMode:i,anchorInfo:u,isAdmin:f,adminType:l,giftEffectDisplay:xe,roomMsgDisplayConfig:D,setRoomMsgDisplayConfig:z,sendMessage:K,paymessageConfig:B,happyBagMsgList:p||k,happyBagRecycelList:p||w,happyBagAcrossMsgList:g||y,happyBagMsgImg:(null==h?void 0:h.chatPic)||O.chatPic}},Ot.a.createElement(Vt.a,null,Ot.a.createElement(bn,{roomId:s,noLogin:!d,sendMessage:K,anchorInfo:u,luckyDraw:c,isAdmin:f,payMessageDisplay:ge,isGameLive:E,forbidChatOffLive:W,messageListComponent:Y}))),i===Kt.k.REALTIME_PLAYBACK&&Ot.a.createElement(Yt.a,{value:{roomType:t,anchorInfo:u,isAdmin:f,adminType:l,giftEffectDisplay:xe,layout:o,playMode:i,roomId:s,emotion:ne,roomMsgDisplayConfig:D,setRoomMsgDisplayConfig:z,sendMessage:K,paymessageConfig:B,happyBagMsgList:p||k,happyBagRecycelList:p||w,happyBagAcrossMsgList:g||y,happyBagMsgImg:(null==h?void 0:h.chatPic)||O.chatPic}},Ot.a.createElement(jn,{ref:Ae,rowRendererFunc:xt,messageListComponent:Y}),0<T&&o!==Kt.h.FULLSCREEN&&Ot.a.createElement(Cn.a,{cardId:T,selectChatMsg:M,close:function(){return De(0)},chatPanelEl:Ae.current})))}},k6ah:function(e,t,n){"use strict";function _(e){return w.a.createElement(x,e,Object(S.f)("pay_message_submit"))}function a(e){var n=e.loading,a=e.isFullScreen,t=Object(O.useContext)(F.b),e=t.chargeList,r=t.selectedChargeIndex,o=t.selectCharge;return w.a.createElement(Y,null,w.a.createElement("div",{className:"points"},e.map(function(e,t){return w.a.createElement(W,{isFullScreen:a,key:t,active:t===r,onClick:function(){return function(e){if(!n)return o(e)}(t)}},w.a.createElement("div",{className:"time"},Object(B.c)(e.stickyTime)),w.a.createElement("div",{className:"coin"},w.a.createElement("img",{className:"icon",src:K,alt:"coin"}),w.a.createElement("span",{className:"number"},e.coins)))})))}function E(e){var t=e.loading,n=e.poor,e=e.isFullScreen;return w.a.createElement(q,null,w.a.createElement(a,{loading:t,isFullScreen:e}),w.a.createElement("div",{className:"info"},w.a.createElement(H.b,{className:"poor",to:"/me/recharge_history",target:"_blank"},n?w.a.createElement("span",null,Object(S.f)("pay_message_insufficient_balance"),w.a.createElement(V,{name:P.a.ARROW_RIGHT,size:16})):"")))}function u(e){var t=e.emotion,n=e.selectEmotion,a=e.canUse,e=t.pic;return w.a.createElement(Z,{onClick:function(){return n(t,a)}},w.a.createElement("img",{className:"emotion",src:X.a.processServerImageUrl(e),alt:"emotion"}),a?null:w.a.createElement("div",{className:"lock"},w.a.createElement("img",{src:Q,alt:"lock"})))}function o(e){var n=e.onClose,t=Object(O.useRef)(null),a=(i=Object(O.useContext)(R.b)).emotion,r=i.anchorInfo,e=i.roomId,o=Object(O.useCallback)(function(e,t){return setTimeout(n,0),t?C.h.emit(C.g.PAY_MESSAGE_USE_EMOTION,e.id):C.h.emit(C.g.OPEN_SUBSCRIPTION_DIALOG)},[n]);Object(O.useEffect)(function(){function e(e){if(!t.current||!t.current.contains(e.target))return n()}return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}},[n]);var i=r.fansGroup,c=void 0===(r=(i||{}).fansGroupType)?0:r,r=a.defaultEmotions,a=a.fansGroupEmotions,l=e===$,s=i&&i.isGroupMember;return w.a.createElement(ee,{ref:t},w.a.createElement("div",{className:"fan-group"},a&&a.map(function(e){return w.a.createElement(u,{key:e.id,emotion:e,selectEmotion:o,canUse:l||!!s&&(!!e.level&&c>=e.level)})})),w.a.createElement("div",{className:"offical"},r&&r.map(function(e){return w.a.createElement(u,{key:e.id,emotion:e,selectEmotion:o,canUse:!0})})))}function k(){var e=(r=Object(O.useContext)(F.b)).chargeList[r.selectedChargeIndex],t=Object(O.useState)(!1),n=(r=y()(t,2))[0],a=r[1],t=Object(O.useCallback)(function(){return e.emotion?a(!0):G.a.create(Object(S.f)("pay_message_charge_no_emotion"),G.a.MSG_TYPE_ERROR,document.querySelector(".real-player"))},[e]),r=Object(O.useCallback)(function(){return a(!1)},[]);return Object(O.useEffect)(function(){n&&!e.emotion&&(a(!1),G.a.createV2({message:Object(S.f)("pay_message_charge_no_emotion"),type:G.a.MSG_TYPE_ERROR}))},[n,e]),w.a.createElement(te,{emotion:!!e.emotion},w.a.createElement("img",{className:"emotion",src:J,alt:"emotion",onClick:t}),n&&w.a.createElement(o,{onClose:r}))}function h(e){var i=e.user,c=e.onClose,t=e.isFullScreen,n=Object(O.useRef)(null),l=(v=Object(O.useContext)(R.b)).roomId,s=v.anchorInfo,u=v.isAdmin,a=Object(O.useContext)(F.b),r=a.chargeList,o=a.selectedChargeIndex,f=a.messageMaxCount,d=a.messageList,m=a.messageText,p=a.changeMessageText,g=j.a.getState().userFinance,h=r[o],b=Object(O.useRef)(null),e=Object(O.useCallback)(function(e){return p(e.target.value.substring(0,120))},[p]),v=Object(O.useState)(!1),v=(a=y()(v,2))[0],x=a[1];return Object(O.useEffect)(function(){function e(e){p("".concat(m,"[/").concat(e,"]").substring(0,120)),setTimeout(function(){var e;b.current&&(b.current.focus(),e=b.current.value.length,b.current.setSelectionRange(e,e))},0)}return C.h.on(C.g.PAY_MESSAGE_USE_EMOTION,e),function(){C.h.off(C.g.PAY_MESSAGE_USE_EMOTION,e)}},[p,m]),Object(O.useEffect)(function(){function e(e){var t;if(null===(t=n.current)||void 0===t||!t.contains(e.target))return c(!1)}return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}},[c]),Object(O.useEffect)(function(){p(localStorage.getItem(A.i)||""),localStorage.removeItem(A.i)},[]),a=g.account<h.coins,g=r[o],w.a.createElement(z,{color:Object(B.d)(r[o].level),isFullScreen:t,ref:n},w.a.createElement(U,{name:P.a.CLOSE,size:16,onClick:function(){c(!1)}}),w.a.createElement("div",{className:"input"},w.a.createElement("div",{className:"info"},w.a.createElement("img",{className:"avatar",src:i.avatar,alt:"avatar"}),w.a.createElement("div",{className:"name"},i.loginname),w.a.createElement("div",{className:"time"},Object(S.f)("pay_message_sticky_time"),": ",Object(B.c)(g.stickyTime))),w.a.createElement("textarea",{disabled:v,ref:b,className:"content",value:m,onChange:e,placeholder:Object(S.f)("pay_message_content_placeholder"),maxLength:120}),w.a.createElement("div",{className:"content-length"},m.length," / ",120)),w.a.createElement(k,null),w.a.createElement(E,{loading:v,poor:a,isFullScreen:t}),w.a.createElement(_,{disabled:v||!m.replace(/\s/g,"")||a,onClick:function(){return ne(void 0,void 0,void 0,I.a.mark(function e(){var t,n,a,r,o;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.user_id===l)return e.abrupt("return",G.a.create(Object(S.f)("pay_message_can_not_send_to_self"),G.a.MSG_TYPE_ERROR,document.querySelector(".real-player")));e.next=2;break;case 2:if(0<h.stickyTime&&d.length>=f)return e.abrupt("return",G.a.create(Object(S.f)("pay_message_over_max_count").replace("{x}","".concat(f)),G.a.MSG_TYPE_WARNING,document.querySelector(".real-player")));e.next=4;break;case 4:return x(!0),e.prev=5,r=s.fansGroup,t=Object(N.a)(m),o=T.c(l,t,h,{fansName:r&&r.isGroupMember?r.fansBadge.name:"",fansGroupType:r&&r.isGroupMember?r.fansGroupType:0,fansBgPic:r&&r.isGroupMember?r.fansBadge.bgPic:""},s,u),n={rst:0,is_level_up:0,new_level:0,available_balance:""},e.next=12,L.a.request(l,o);case 12:if(n=e.sent,a=n.rst,r=n.is_level_up,o=n.new_level,r&&j.a.dispatch(Object(M.c)({level:o})),1006===a)throw new Error("".concat(Object(S.f)("admin_be_blocked_tip2"),"(#").concat(a,")"));e.next=17;break;case 17:if(0!==a)throw new Error("メッセージ送信に失敗しました".concat("(#",a,")"));e.next=19;break;case 19:C.h.emit(C.c.CHAT_PANEL_MSG_SEND,t),p(""),c(!0),j.a.dispatch(Object(D.b)()),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(5),G.a.create(e.t0.message,G.a.MSG_TYPE_ERROR,document.querySelector(".real-player"));case 28:x(!1);case 29:case"end":return e.stop()}},e,null,[[5,25]])}))}}))}function d(e){var t=e.message,n=e.spentTime,a=e.onShowDetail,r=e.detailMessageId,o=e.isFullScreen,i=Object(O.useCallback)(function(){return a(t.id)},[t,a]),c=t.stickyTime,l=t.avatar,s=t.level,e=t.coin;return c<n?null:w.a.createElement(le,{color:Object(B.d)(s),onClick:i,isFullScreen:o,isShowBtnArrow:r===t.id},w.a.createElement(se,{isFullScreen:o,src:l,size:o?32:40}),w.a.createElement("div",{className:"pay-message"},w.a.createElement("div",{className:"spent",style:{transform:"scaleX(".concat(1-n/c,")")}}),w.a.createElement("img",{src:ce,alt:"coin"}),w.a.createElement("span",{className:"coin"},function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=parseInt(e,10);if(Number.isNaN(n))return"";if(9999<n){e=n/1e3;return"".concat(t?e.toFixed(1):Math.floor(e),"K")}return n}(e))),w.a.createElement("div",{className:"arrow"}))}function m(e){var n=e.id,t=e.messageList,a=e.onClose,r=e.isFullScreen,o=Object(O.useRef)(null),i=Object(O.useContext)(R.b).emotion;Object(O.useEffect)(function(){function e(e){var t;if(null===(t=o.current)||void 0===t||!t.contains(e.target))return a(n)}return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}},[n,a]);for(var c=0,l=t.length;c<l&&t[c].id!==n;c+=1);var s=t[c];return s?(e=Object(B.d)(s.level),w.a.createElement(fe,{ref:o,index:c,color:e,isFullScreen:r},w.a.createElement(ue.a,{msg:{id:s.id,username:s.username,avatar:s.avatar,coin:s.coin,content:s.content,level:s.level,emotion:s.emotion,fansGroupType:s.fansGroupType,stickyTime:s.stickyTime,userId:s.userId},emotion:i}))):null}var r=n("J4zp"),y=n.n(r),O=n("q1tI"),w=n.n(O),i=n("vOnD"),j=n("y90O"),C=n("WfGX"),b=n("TrD6"),v=n("3IhF"),c=n("o0o1"),I=n.n(c),S=n("SUlE"),N=n("DVT8"),T=n("VmMe"),L=n("solc"),A=n("t/+K"),R=n("xjki"),M=n("bUZ1"),D=n("I7o+"),P=n("NXoE"),F=n("JvGe"),G=n("cjBY"),B=n("35tE"),l=n("lSNA"),s=n.n(l),f=n("OoQT"),p=n("Xamy"),g=n.p+"assets/file/c8670b48a92bf7d6220949e69664c0a7.png",r=n.p+"assets/file/c57828b2a49e4f775714f518121b07a5.png",c=n.p+"assets/file/9cb34658522877846ebaaed6ba0d3988.png",g=(l={},s()(l,S.b.ENGLISH,c),s()(l,S.b.KOREAN,r),s()(l,S.b.JAPANESE,g),s()(l,S.b.CHINESE,g),l)[S.d],l=Object(i.keyframes)(["0%{transform:scale(0);}100%{transform:scale(1);}"]),z=i.default.div.withConfig({componentId:"ew1xcq-0"})(["position:absolute;bottom:0;left:0;width:100%;padding:16px;padding-top:60px;background-color:#fff;z-index:",";background-image:url(",");background-repeat:no-repeat;background-position:top center;background-size:370px auto;animation:"," 0.35s forwards;transform-origin:50% 100%;"," > .input{border-radius:4px;padding:16px;"," transition:background-color 0.3s;will-change:background-color;position:relative;> .info{display:flex;align-items:center;font-size:12px;color:#fff;margin-bottom:16px;"," > .avatar{width:32px;height:32px;border-radius:50%;}> .name{flex:1;margin:0 10px;}}.content-length{position:absolute;font-size:12px;color:#fff;right:26px;bottom:26px;user-select:none;pointer-events:none;","}> .content{resize:none;border:none;outline:none;display:block;padding:8px;width:100%;border-radius:4px;background-color:rgba(255,255,255,0.2);height:120px;line-height:1.5;overflow:auto;"," "," color:rgba(255,255,255,0.8);font-size:12px;&::placeholder{color:rgba(255,255,255,0.7);}}}"," "," .full-screen &{background-color:rgb(32,37,38);> .input{> .content{height:34px;}}}"],p.a.PAY_MESSAGE_EDIT,g,l,function(e){return e.isFullScreen&&Object(i.css)(["z-index:1;background-color:rgba(32,37,38,0.98);"])},function(e){return e.isFullScreen&&Object(i.css)(["padding:10px 16px;"])},function(e){return e.isFullScreen&&Object(i.css)(["margin-bottom:6px;"])},function(e){return e.isFullScreen&&Object(i.css)(["right:0px;bottom:-22px;"])},f.a,function(e){return e.isFullScreen&&Object(i.css)(["height:32px;line-height:normal;"])},function(e){e=e.color;return e&&Object(i.css)(["> .input{background-color:",";}"],e)},function(e){return e.theme.darkTheme&&Object(i.css)(["background-color:rgb(32,37,38);"])}),U=Object(i.default)(P.b).withConfig({componentId:"ew1xcq-1"})(["position:absolute;top:10px;right:10px;color:#999;cursor:pointer;",""],function(e){return e.theme.darkTheme&&Object(i.css)(["color:rgba(255,255,255,0.9);"])}),x=i.default.button.withConfig({componentId:"sc-1p1rc0h-0"})(["border:none;outline:none;display:block;width:100%;height:48px;border-radius:24px;background-color:rgba(56,204,227,0.1);color:#20bef3;font-size:15px;transition:all 0.3s;&:disabled{color:#fff;background-color:rgb(198,198,198);cursor:not-allowed;}",""],function(e){return e.theme.darkTheme&&Object(i.css)(["&:disabled{background-color:rgba(198,198,198,0.5);}"])}),H=n("55Ip"),K=n.p+"assets/file/b84de561404c17d277b26f6dc954e0e3.png",Y=i.default.div.withConfig({componentId:"jwd07j-0"})(["margin:10px 0 0 0;position:relative;> .points{width:100%;overflow:hidden;margin-right:-10px;}"]),W=i.default.div.withConfig({componentId:"jwd07j-1"})(["width:76px;height:43px;border:1px solid rgba(237,239,240,1);border-radius:4px;align-items:center;font-size:12px;color:#999999;margin:0 0 10px 0;text-align:center;float:left;margin-right:10px;cursor:pointer;.time{font-size:14px;line-height:19px;margin-top:2px;}> .coin{display:flex;align-items:center;line-height:0;justify-content:center;margin-top:4px;> .icon{width:12px;height:12px;margin-right:4px;vertical-align:middle;}> .number{vertical-align:middle;}}"," "," &:nth-child(4n){margin-right:0;}"],function(e){var t=e.active;return e.theme.darkTheme?t?Object(i.css)(["background:rgba(32,190,243,0.1);border:1px solid #20bef3;color:#20bef3;"]):Object(i.css)(["border:1px solid rgba(60,63,67,1);color:rgba(255,255,255,0.5);"]):t?Object(i.css)(["border:1px solid #20bef3;color:#20bef3;"]):void 0},function(e){var t=e.isFullScreen,e=e.active;if(t)return e?Object(i.css)(["width:72px;margin-right:13px;background:rgba(32,190,243,0.1);border:1px solid #20bef3;color:#20bef3;"]):Object(i.css)(["width:72px;margin-right:13px;border:1px solid rgba(60,63,67,1);color:rgba(255,255,255,0.5);"])}),q=i.default.div.withConfig({componentId:"sc-1detn6z-0"})(["> .info{display:flex;align-items:center;font-size:12px;color:#ff5000;margin-bottom:10px;height:17px;> .poor{flex:1;margin:0 10px;}","}"],function(e){return e.theme.darkTheme&&Object(i.css)(["color:#ff5000;"])}),V=Object(i.default)(P.b).withConfig({componentId:"sc-1detn6z-1"})(["color:#ff5000;margin-left:5px;",""],function(e){return e.theme.darkTheme&&Object(i.css)(["color:#ff5000;"])}),J=n.p+"assets/file/ec6a65067ea7cda34311ae864932fcf7.png",g=n("mjvw"),X=n("EQxi"),Q=n.p+"assets/file/cc550e57c3369d522f0c41520fcd60d2.png",Z=i.default.div.withConfig({componentId:"iy1xbd-0"})(["display:inline-block;width:","px;height:","px;margin:4px;cursor:pointer;position:relative;overflow:hidden;> .emotion{width:100%;height:100%;}> .lock{position:absolute;width:100%;height:100%;top:0;left:0;background-color:rgba(0,0,0,0.5);> img{position:absolute;width:12px;height:12px;bottom:0;right:0;}}",";"],32,32,function(e){e=e.theme.darkTheme;return Object(i.css)(["&:hover{background-color:",";}"],e?"#363636":"#f2f2f2")}),$=g.a.getUserId(),ee=i.default.div.withConfig({componentId:"sc-6t6ppc-0"})(["z-index:1;position:absolute;bottom:calc(100% + 15px);left:-50px;width:calc(","px + 8px);height:auto;background-color:#fff;border-radius:4px;box-shadow:2px 2px 24px rgba(0,0,0,0.5);padding:4px;font-size:0;&::after{content:'';position:absolute;top:100%;left:53px;border-width:8px;border-style:solid;border-color:#fff transparent transparent transparent;}",";"],240,function(e){e=e.theme.darkTheme;return Object(i.css)(["background-color:",";&::after{border-top-color:",";}"],e?"#2e3637":"#fff",e?"#2e3637":"#fff")}),te=i.default.div.withConfig({componentId:"eq7k0x-0"})(["position:relative;> .emotion{margin-top:4px;width:24px;height:24px;display:block;}",""],function(e){e=e.emotion;return Object(i.css)(["> .emotion{cursor:",";}"],e?"pointer":"not-allowed")}),ne=function(e,i,c,l){return new(c=c||Promise)(function(n,t){function a(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(a,r)}o((l=l.apply(e,i||[])).next())})},l=n("bTu8"),f=n("g0Ox"),ae=n("xqva"),re=n("Ndxo"),oe=n("IdJ0"),ie=n("O5KI"),g=(n("X2ca"),n("Gt/x")),ce=n.p+"assets/file/8918d1d034550f93995f0032f0610bc8.png",le=i.default.div.withConfig({componentId:"crifd-0"})(["display:inline-block;padding:6px 0px;vertical-align:middle;position:relative;> .pay-message{cursor:pointer;display:flex;align-items:center;border-top-right-radius:16px;border-bottom-right-radius:16px;position:relative;width:64px;overflow:hidden;img{z-index:1;margin-left:7px;margin-right:2px;}> .spent{z-index:1;position:absolute;width:100%;height:100%;top:0;left:0;transform-origin:left;background-color:rgba(0,0,0,0.16);}> .coin{position:relative;z-index:2;flex:1;min-width:0;font-size:12px;color:#fff;}}",""],function(e){var t=e.color,n=e.isShowBtnArrow,e=e.isFullScreen;return Object(i.css)(["> .pay-message{background-color:",";padding:",";left:",";}.arrow{position:absolute;bottom:100%;border-width:5px;border-style:solid;left:50px;bottom:-7px;display:",";border-color:transparent transparent "," transparent;}"],t,e?"7px 4px":"9px 4px",e?"24px":"32px",n?"block":"none",t)}),se=Object(i.default)(g.b).withConfig({componentId:"crifd-1"})(["position:absolute;cursor:pointer;z-index:2;border-radius:50%;",""],function(e){var t=e.isFullScreen,e=e.theme.darkTheme;return Object(i.css)(["background-color:",";top:",";"],e?"#ccc":"#fff",t?"4px":"2px")}),ue=n("5pbc"),fe=i.default.div.withConfig({componentId:"nqpzqy-0"})(["z-index:3;position:absolute;left:16px;width:calc(100% - 32px);font-size:16px;box-shadow:0px 2px 8px rgba(0,0,0,0.26);background-color:#fff;border-radius:4px;"," ",""],function(e){e=e.isFullScreen;return Object(i.css)(["top:",";"],e?"54px":"58px")},function(e){return e.theme.darkTheme&&Object(i.css)(["&:disabled{background-color:rgb(32,37,38);}"])});function de(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return me(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,t=function(){};return{s:t,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw r}}}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}l.a.use([f.a]);function pe(e){var n=e.isFullScreen,a=Date.now(),t=Object(O.useState)(0),r=y()(t,2)[1],o=(u=Object(O.useContext)(F.b)).messageMaxCount,i=u.messageList,e=Object(O.useState)(""),c=(t=y()(e,2))[0],l=t[1],s=Object(O.useCallback)(function(t){return l(function(e){return e===t?"":t})},[]),u=Object(O.useCallback)(function(t){return l(function(e){return e===t?"":e})},[]);Object(O.useEffect)(function(){var e=setInterval(function(){return r(function(e){return e+1})},1e3);return function(){return clearInterval(e)}},[]),Object(O.useEffect)(function(){var t=de(i);try{for(t.s();!(n=t.n()).done;){var e=n.value,n=e.id;e.time+1e3*e.stickyTime<a&&ie.b.emit(ie.a.DELETE_PAY_MESSAGE,n)}}catch(e){t.e(e)}finally{t.f()}});var f,e=j.a.getState().user,t=i;return Object(O.useEffect)(function(){function e(e){var t=e.executorId,n=e.executedIdArr,e=window.location.pathname.split("/").length&&window.location.pathname.split("/")[1];t===Number(e)&&null!=n&&n.length&&i.forEach(function(t){n.find(function(e){return e===t.userId})&&ie.b.emit(ie.a.DELETE_PAY_MESSAGE,t.id)})}return oe.b.on(oe.a.ANCHOR_BLACKLIST_ADD,e),function(){oe.b.off(oe.a.ANCHOR_BLACKLIST_ADD,e)}},[i,e]),e&&e.userBlackList&&(e=e.userBlackList,f=void 0===e?[]:e,t=i.filter(function(t){return!f.find(function(e){return e.user_id===t.userId})})),t.length?w.a.createElement(ge,{isFullScreen:n},w.a.createElement("div",{style:{display:3<t.length?"block":"none"}},w.a.createElement(P.b,{name:P.b.NAME.ARROW_LEFT,size:20,className:"arrow-left"}),w.a.createElement(P.b,{name:P.b.NAME.ARROW_RIGHT,size:20,className:"arrow-right"})),0<t.length?w.a.createElement(ae.a,{effect:"flip",spaceBetween:7,slidesPerView:3,slidesPerGroup:3,allowTouchMove:!1,navigation:{prevEl:".arrow-left",nextEl:".arrow-right"}},t.slice(0,o).map(function(e){var t=Math.floor((a-e.time)/1e3);return w.a.createElement(re.a,{key:e.id},w.a.createElement(d,{key:e.id,message:e,detailMessageId:c,spentTime:t,onShowDetail:s,isFullScreen:n}))})):null,c?w.a.createElement(m,{id:c,messageList:i,onClose:u,isFullScreen:n}):null):null}var ge=i.default.div.withConfig({componentId:"sc-18qd4el-0"})(["position:relative;z-index:",";background-color:#fff;padding:9px 8px 0;font-size:0;.arrow-left{cursor:pointer;position:absolute;left:10px;&:hover{color:#20bef3;}&.swiper-button-disabled{&:hover{cursor:not-allowed;}}}.arrow-right{cursor:pointer;position:absolute;right:10px;&:hover{color:#20bef3;}&.swiper-button-disabled{&:hover{cursor:not-allowed;}}}.full-screen &{background-color:rgb(32,37,38);border-radius:4px 4px 0 0;}.swiper-container{width:303px;height:50px;.swiper-slide{width:95px;}}",""],p.a.PAY_MESSAGE_LIST,function(e){var t=e.isFullScreen,e=e.theme.darkTheme;return Object(i.css)(["border-top:",";background-color:",";border-top-right-radius:",";border-top-left-radius:",";.arrow-left,.arrow-right{top:",";color:",";}.swiper-container{width:",";}"],t?"none":e?"1px solid rgba(74, 78, 78)":"1px solid #edeff0",t?"rgba(32,37,38,0.4)":e?"rgb(32,37,38)":"#fff",t?"4px":"",t?"4px":"",t?"18px":"20px",t||e?"#fff":"#333",t?"297px":"303px")}),he=i.default.div.withConfig({componentId:"sc-1448gr7-0"})(["> .pay-message-edit{box-sizing:border-box;","}",""],function(e){var t=e.isFullScreen,n=e.isNoList,e=e.theme.darkTheme;return n?Object(i.css)(["background:none;"]):t?Object(i.css)(["background:rgba(32,37,38,0.4);"]):e?Object(i.css)(["background:rgb(32,37,38);"]):Object(i.css)(["background:#fff;"])},function(e){e=e.offset;return Object(i.css)([".full-screen & + .message-list-container{padding-top:0 !important;top:","px !important;height:","px !important;}"],e,370-e)});t.a=function(e){var t=e.isLiving,n=e.isFullScreen,a=e.roomSettingPage,r=e.isInPopoutMode,o=e.payMessageDisplay,i=Object(O.useContext)(F.b),c=i.open,l=i.messageList,s=i.messageText,u=Object(O.useState)(!1),f=y()(u,2),e=f[0],d=f[1],m=j.a.getState().user,p=Object(O.useCallback)(function(){return m?(v.a.handleDataCount({lt:"pcclick",ct:"click",dt:"superchat",et:"open",ft:m.user_id}),d(!0)):j.a.dispatch(Object(b.c)(!0))},[m]),i=Object(O.useCallback)(function(e){d(!1),C.h.emit(C.g.ASYNC_PAY_MSG,e?"":s)},[s]);Object(O.useEffect)(function(){return C.h.on(C.g.PAY_MESSAGE_EDIT_POP_SHOW,p),function(){C.h.off(C.g.PAY_MESSAGE_EDIT_POP_SHOW,p)}},[p]);var g,u=l;m&&m.userBlackList&&(f=m.userBlackList,g=void 0===f?[]:f,u=l.filter(function(t){return!g.find(function(e){return e.user_id===t.userId})}));return w.a.createElement(he,{offset:1,isFullScreen:n,isNoList:!u.length},o&&w.a.createElement(pe,{isFullScreen:n}),c&&t&&!a&&!r&&w.a.createElement("div",{className:"pay-message-edit"},e&&w.a.createElement(h,{user:m,onClose:i,isFullScreen:n})))}},obtk:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c});var t=n("o0o1"),a=n.n(t),r=n("jp0t"),o=function(e,i,c,l){return new(c=c||Promise)(function(n,t){function a(e){try{o(l.next(e))}catch(e){t(e)}}function r(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(a,r)}o((l=l.apply(e,i||[])).next())})},i=function(){return o(void 0,void 0,void 0,a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.a.request({path:"/nonolive/gappserv/paidMessage/isWhiteUser",method:r.a.METHOD.GET}));case 1:case"end":return e.stop()}},e)}))},c=function(t){return o(void 0,void 0,void 0,a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.a.request({path:"/nonolive/gappserv/paidMessage/getStickyMessage",method:r.a.METHOD.GET,params:{room_id:t}}));case 1:case"end":return e.stop()}},e)}))}},zt6L:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(e){return 999999<e?"".concat(Math.floor(e/1e5)/10,"M"):999<e?"".concat(Math.floor(e/100)/10,"K"):e}}}]);
//# sourceMappingURL=http://hw-source-map.mildom.jp/mildompc-web-server-sourcemap/static_sourcemap/anchor_live_page~page_popout_chat~page_popout_gift~page_room_8a9fe0a6f40176541e90.js.map