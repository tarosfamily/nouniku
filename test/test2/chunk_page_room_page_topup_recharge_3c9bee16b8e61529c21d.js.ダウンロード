(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"6RVU":function(e,t,n){"use strict";function b(e){function t(){d(!0)}var n=e.showDialog,i=e.closeDialog,a=e.firstChargeGiftCash,o=e.exposeSource,c=Object(v.useContext)(G.a).roomId,r=y.a.getState().configure.gift.giftIdMapDetail,f=Object(v.useRef)(null),l=Object(v.useState)(0),s=(g=x()(l,2))[0],p=g[1],u=Object(v.useState)(!1),l=(e=x()(u,2))[0],d=e[1],g=Object(v.useMemo)(function(){return a&&null!=a&&a.paidGiftId&&null!=a&&a.freeGiftId&&r[a.paidGiftId]?{specialGiftLv3:r[a.paidGiftId],specialGiftLv1:r[a.freeGiftId]}:{}},[a,r]),u=Object(v.useMemo)(function(){return a&&(null!=a&&a.extraCoins||null!=a&&a.coins)?Number(a.extraCoins||0)+Number(a.coins||0):0},[a]),e=Object(v.useMemo)(function(){var e=Math.floor(s/1e3),t=Math.floor(e/60/60/24),n=Math.floor(e/60/60-24*t),i=Math.floor(e/60-60*n-24*t*60),e=e%60;return{days:t,hours:0<n?n:"00",minute:0<i?i:"00",second:e<10?"0".concat(e):e}},[s]);return Object(v.useEffect)(function(){if(null!=a&&a.isFirstTopUp){var t=setInterval(function(){var e=Date.now();a.endTime&&a.endTime>=e?p(a.endTime-e):(p(0),sessionStorage.removeItem(O.W),E.h.emit(E.g.OPEN_SPECIAL_ACTIVE_DIALOG,"entrance_room_click",!1),clearInterval(t))},900);return function(){return clearInterval(t)}}},[a]),Object(v.useEffect)(function(){var e;n&&(e={lt:"rec_stat",af:"live_room",bf:"special_gift",cf:"detailed_page",action:"expose",expose_source:o,room_id:c},N.a.handleDataCount(e))},[o,c,n]),Object(v.useLayoutEffect)(function(){var e;n&&f.current&&(m=new S.a.Player(f.current),e=new S.a.Parser,m.loops=1,e.load(Object(k.a)(null==a?void 0:a.paidGiftSvga)||A,function(e){m.setVideoItem(e),m.startAnimation()}),m.onFinished(t))},[a,n]),_.a.createElement(w.c,{type:w.b.CENTER,improveLayer:!0,open:n},_.a.createElement(P,null,_.a.createElement(L,null,_.a.createElement("div",{className:"time-box"},0<e.days&&Object(D.f)("special_gift_active_cut_time_day").replace("{{day}}","".concat(e.days)),_.a.createElement("div",{className:"time-item"},e.hours),_.a.createElement("i",null),_.a.createElement("div",{className:"time-item"},e.minute),_.a.createElement("i",null),_.a.createElement("div",{className:"time-item"},e.second))),_.a.createElement(M,{isAnimationStop:l},_.a.createElement("div",{className:"main-path1"},_.a.createElement("div",{className:"special-gift-lv3"},_.a.createElement(C.a,{src:null===(l=null==g?void 0:g.specialGiftLv3)||void 0===l?void 0:l.picture,alt:""}),null===(l=null==g?void 0:g.specialGiftLv3)||void 0===l?void 0:l.name,"x1"),_.a.createElement("div",{className:"gift-canvas"},_.a.createElement("canvas",{ref:f,width:296,height:330}))),_.a.createElement("div",{className:"main-path2"},_.a.createElement("div",{className:"head-text"},_.a.createElement("i",null),_.a.createElement("span",null,Object(D.f)("special_gift_active_title")),_.a.createElement("i",null)),_.a.createElement("div",{className:"gift-box"},_.a.createElement("div",{className:"gift-item"},_.a.createElement("div",{className:"img-box"},_.a.createElement(C.a,{src:null===(l=null==g?void 0:g.specialGiftLv1)||void 0===l?void 0:l.picture,alt:""}),"x1"),null===(g=null==g?void 0:g.specialGiftLv1)||void 0===g?void 0:g.name),_.a.createElement("div",{className:"gift-item"},_.a.createElement("div",{className:"img-box"},_.a.createElement("img",{src:F,alt:""}),"x",u),Object(D.f)("anchor_task_coins")))),_.a.createElement("div",{className:"buy-btn",onClick:function(){if(!y.a.getState().user)return window.sessionStorage.setItem(O.Vb,"1"),y.a.dispatch(Object(T.c)(!0));var e={lt:"rec_stat",af:"live_room",bf:"special_gift",cf:"recharge_in_detailed_page",action:"click",expose_source:o,discount_gift_countdown:s,room_id:c};N.a.handleDataCount(e),localStorage.setItem(O.Wb,"1"),j.a.openTopupDialog(),i()}},null==a?void 0:a.payMessage)),_.a.createElement(R,{onClick:function(){i(),m.stopAnimation(),d(!1)}})))}function h(e){var t=e.showDialog,n=e.closeDialog,i=e.firstChargeGiftCash,a=Object(v.useContext)(G.a).roomId,o=y.a.getState().configure.gift.giftIdMapDetail,c=Object(v.useMemo)(function(){return i&&null!=i&&i.paidGiftId&&o[i.paidGiftId]?o[i.paidGiftId]:""},[i,o]),r=Object(v.useMemo)(function(){return{source_site:"first_gift"}},[]),e=Object(v.useCallback)(function(){var e={lt:"rec_stat",af:"live_room",bf:"special_gift",cf:"send_gfit_page",action:"click",room_id:a};N.a.handleDataCount(e);var t,e=y.a.getState().userFinance.userPack;e&&0<e.length&&(t=e.filter(function(e){return e.gift_id===(null==i?void 0:i.paidGiftId)})),t&&0<t.length?E.h.emit(E.g.SPECIAL_GIFT_SEND_GIFT,{giftId:t[0].gift_id,giftExtInfo:{balance:t[0].balance},eventCmd:g.a.CMD_SPECIAL_GIFT_SEND_GIFT,curSelectCount:1,wsNonoParaData:r}):(n(),d.d.error(Object(D.f)("gift:send_failed")))},[n,i.paidGiftId,a,r]);return Object(v.useEffect)(function(){return g.b.on(g.a.CMD_SPECIAL_GIFT_SEND_GIFT,n),function(){g.b.off(g.a.CMD_SPECIAL_GIFT_SEND_GIFT,n)}},[n]),Object(v.useEffect)(function(){var e;t&&(e={lt:"rec_stat",af:"live_room",bf:"special_gift",cf:"send_gfit_page",action:"expose",room_id:a},N.a.handleDataCount(e))},[a,t]),_.a.createElement(w.c,{type:w.b.CENTER,improveLayer:!0,open:t},_.a.createElement(z,null,_.a.createElement(J,null,_.a.createElement("div",{className:"title"},Object(D.f)("special_gift_pop_title")),_.a.createElement("div",{className:"gift-box"},_.a.createElement(C.a,{src:null==c?void 0:c.picture,alt:""})),_.a.createElement("div",{className:"gift-text"},null==c?void 0:c.name,"x1"),_.a.createElement("div",{className:"pop-text"},Object(D.f)("special_gift_pop_text")),_.a.createElement("div",{className:"send-btn",onClick:e},Object(D.f)("special_gift_pop_btn"))),_.a.createElement(R,{onClick:function(){n()}})))}var m,i=n("J4zp"),x=n.n(i),v=n("q1tI"),_=n.n(v),E=n("WfGX"),I=n("4DtP"),O=n("t/+K"),w=n("WCjN"),y=n("y90O"),C=n("aJ4X"),a=n("2HG2"),S=n.n(a),j=n("cjrQ"),G=n("5VyL"),T=n("TrD6"),D=n("SUlE"),N=n("3IhF"),k=n("wV8y"),A=n.p+"assets/file/09babd08b5f55a655a048a41223e1017.svga",F=n.p+"assets/file/abc3a3d7264fbc89bdcef448d81368a0.png",o=n("lSNA"),c=n.n(o),r=n("vOnD"),f=n.p+"assets/file/31e9f06b6d3fa98b0245536785e46f0a.png",l=n.p+"assets/file/69d118607ddfe984f018355bdaad04d8.png",s=n.p+"assets/file/cad0d8a43ae7c40e25bacda10cd582a4.png",p=n.p+"assets/file/bbac3140aa04cd3abc697548b82bf066.png",u=n.p+"assets/file/9b43420eefd17e3da803b9978b78a8f5.png",i=n.p+"assets/file/22483a77eff9ec713ab7118a2cbe1087.png",a=n.p+"assets/file/3f2886cf815e8ae4f3447bb306b310cd.png",o=(o={},c()(o,D.b.ENGLISH,s),c()(o,D.b.KOREAN,l),c()(o,D.b.JAPANESE,f),c()(o,D.b.CHINESE,f),o),P=r.default.div.withConfig({componentId:"sc-176fq82-0"})(["position:relative;"]),L=r.default.div.withConfig({componentId:"sc-176fq82-1"})(["width:400px;height:180px;background:url(",") no-repeat center;position:relative;.time-box{position:absolute;right:16px;bottom:17px;height:24px;display:flex;align-items:center;justify-content:right;font-size:14px;font-weight:600;color:#ffffff;.time-item{margin-left:7px;width:24px;height:24px;background:rgba(90,14,167,0.41);border-radius:6px;text-align:center;line-height:24px;}i{height:13px;display:block;width:4px;margin-left:7px;position:relative;&:after{content:'';position:absolute;width:4px;height:4px;background:#ffffff;border-radius:50%;opacity:0.7;bottom:0;}&:before{content:'';position:absolute;width:4px;height:4px;background:#ffffff;border-radius:50%;opacity:0.7;top:0;}}}"],o[D.d]),R=r.default.div.withConfig({componentId:"sc-176fq82-2"})(["width:38px;height:38px;background:url(",") no-repeat center;position:absolute;bottom:-58px;left:50%;transform:translateX(-50%);cursor:pointer;"],i),M=r.default.div.withConfig({componentId:"sc-176fq82-3"})(["width:400px;padding:0 10px 10px;background:linear-gradient(180deg,#ab55f3 0%,#7948e8 100%);border-radius:0px 0px 20px 20px;.main-path1{width:380px;height:152px;margin-bottom:10px;background:url(",") no-repeat center;position:relative;.special-gift-lv3{display:none;"," img{width:108px;margin:20px auto 10px;display:block;}text-align:center;font-size:16px;font-weight:600;line-height:28px;color:#ffffff;overflow:hidden;}.gift-canvas{display:block;"," width:296px;height:330px;position:absolute;bottom:0;left:50%;transform:translateX(-50%);}}.main-path2{width:380px;height:159px;background:url(",") no-repeat center;position:relative;overflow:hidden;.head-text{line-height:20px;height:20px;font-size:14px;font-weight:600;color:rgba(255,255,255,0.7);margin-top:10px;display:flex;justify-content:center;align-items:center;i{width:20px;height:1px;background:#ffffff;opacity:0.5;display:block;margin:0 10px;}}.gift-box{padding:16px 10px 0;display:flex;justify-content:space-between;.gift-item{width:175px;font-size:12px;text-align:center;color:rgba(255,255,255,0.7);.img-box{font-size:14px;font-weight:600;color:#ffb04d;overflow:hidden;width:175px;height:80px;background:url(",") no-repeat center;margin-bottom:8px;img{width:50px;display:block;margin:9px auto;}}}}}.buy-btn{width:376px;height:52px;background:linear-gradient(180deg,#efcc6e 0%,#fd9141 100%);border-radius:70px;text-align:center;line-height:52px;font-size:18px;color:#ffffff;margin:10px auto 0;cursor:pointer;}"],p,function(e){return e.isAnimationStop&&Object(r.css)(["display:block;"])},function(e){return e.isAnimationStop&&Object(r.css)(["display:none;"])},u,a),d=n("9UTw"),g=n("IsqJ"),a=n.p+"assets/file/31209f64012e6b34cdd816e006bc0cbc.png",n=n.p+"assets/file/46fa5b9487191702b2f8621c432ad281.png",z=r.default.div.withConfig({componentId:"sc-11fwls0-0"})(["width:300px;height:342px;background:linear-gradient(180deg,#be5bf8 0%,#7948e8 100%);border-radius:20px;position:relative;&:after{content:'';width:300px;height:116px;background:url(",") no-repeat center;position:absolute;top:0;left:0;}"],a),J=r.default.div.withConfig({componentId:"sc-11fwls0-1"})(["overflow:hidden;.title{width:100%;text-align:center;height:28px;font-size:20px;line-height:28px;color:#ffffff;margin:20px 0;}.gift-box{width:120px;height:121px;background:url(",") no-repeat center;margin:0 auto;line-height:121px;text-align:center;display:flex;img{width:108px;margin:auto;}}.gift-text{font-size:14px;line-height:23px;color:#ffb04d;text-align:center;margin-top:10px;}.pop-text{height:20px;font-size:14px;line-height:20px;color:#ffffff;opacity:0.7;text-align:center;margin-top:14px;}.send-btn{width:260px;height:52px;background:linear-gradient(180deg,#efcc6e 0%,#fd9141 100%);border-radius:70px;margin:14px auto;color:#ffffff;font-size:18px;text-align:center;line-height:52px;cursor:pointer;}"],n);t.a=function(e){function t(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];l(0),d(!1),u(t),p(e)}function n(){l(1),u(!1),d(!0)}function i(e){e?(m(e),o(e),sessionStorage.setItem(O.W,JSON.stringify(e))):(m({}),o({}),sessionStorage.setItem(O.W,JSON.stringify({})))}function a(){Object(I.Ub)().then(function(e){i(e)}).catch(function(){})}var o=e.updataCharGift,c=Object(v.useState)(0),r=x()(c,2),f=r[0],l=r[1],s=Object(v.useState)("entrance_room_click"),e=x()(s,2),c=e[0],p=e[1],r=Object(v.useState)(!1),s=x()(r,2),e=s[0],u=s[1],r=Object(v.useState)(!1),s=x()(r,2),r=s[0],d=s[1],s=Object(v.useState)(sessionStorage.getItem(O.W)&&JSON.parse(sessionStorage.getItem(O.W)||"{}")),s=x()(s,2),g=s[0],m=s[1];return Object(v.useEffect)(function(){return g&&0<Object.keys(g).length&&(null==g||!g.endTime||g.endTime&&g.endTime<=Date.now()?a():o(g)),null===g&&a(),E.h.on(E.g.UPDATE_FIRST_CHARGE_GIFT_DATA,a),E.h.on(E.g.OPEN_SPECIAL_ACTIVE_DIALOG,t),E.h.on(E.g.OPEN_SPECIAL_SEND_GIFT_DIALOG,n),E.h.on(E.g.UPDATE_FIRST_CHARGE_GIFT_FOR_RES,i),function(){E.h.off(E.g.UPDATE_FIRST_CHARGE_GIFT_DATA,a),E.h.off(E.g.OPEN_SPECIAL_ACTIVE_DIALOG,t),E.h.off(E.g.OPEN_SPECIAL_SEND_GIFT_DIALOG,n),E.h.off(E.g.UPDATE_FIRST_CHARGE_GIFT_FOR_RES,i)}},[]),e&&0===f?_.a.createElement(b,{firstChargeGiftCash:g,showDialog:e&&0===f,exposeSource:c,closeDialog:function(){u(!1)}}):r&&1===f?_.a.createElement(h,{firstChargeGiftCash:g,showDialog:r&&1===f,closeDialog:function(){d(!1)}}):_.a.createElement(_.a.Fragment,null)}},HTCG:function(e,t,n){"use strict";var i=n("7W2i"),a=n.n(i),o=n("a1gu"),c=n.n(o),r=n("Nsbk"),f=n.n(r),i=n("lwsE"),l=n.n(i),o=n("cDf5"),s=n.n(o),r=n("l5Jd");function p(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=f()(n);return t=i?(e=f()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),c()(this,t)}}i=function(e,t,n,i){var a,o=arguments.length,c=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===("undefined"==typeof Reflect?"undefined":s()(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;0<=r;r--)(a=e[r])&&(c=(o<3?a(c):3<o?a(t,n,c):a(t,n))||c);return 3<o&&c&&Object.defineProperty(t,n,c),c},o=function e(){l()(this,e)};i([Object(r.number)()],o.prototype,"userId",void 0),i([Object(r.number)()],o.prototype,"limitFee",void 0),i([Object(r.number)()],o.prototype,"discountFee",void 0),i([Object(r.number)()],o.prototype,"couponType",void 0),i([Object(r.array)({model:"string"})],o.prototype,"platform",void 0),i([Object(r.number)()],o.prototype,"createTime",void 0),i([Object(r.number)()],o.prototype,"expiredTime",void 0),i([Object(r.string)()],o.prototype,"userCouponId",void 0),o=i([Object(r.mapping)({userId:"coupon_info.user_id",limitFee:"coupon_info.limit_fee",discountFee:"coupon_info.discount_fee",couponType:"coupon_info.coupon_type",platform:"coupon_info.platform",createTime:"coupon_info.create_time",expiredTime:"coupon_info.expired_time",userCouponId:"coupon_info.user_coupon_id"})],o);n=function(e){a()(n,e);var t=p(n);function n(){return l()(this,n),t.apply(this,arguments)}return n}(r.ApiModel);i([Object(r.array)({model:o,optional:!0})],n.prototype,"couponInfo",void 0),n=i([Object(r.mapping)({couponInfo:"coupon_info"})],n),t.a=n},"yX+1":function(e,n,i){"use strict";(function(r){i.d(n,"a",function(){return t});var e=i("o0o1"),f=i.n(e),e=i("J4zp"),l=i.n(e),s=i("q1tI"),p=i("4Qmz"),u=i("HTCG"),d=function(e,c,r,f){return new(r=r||Promise)(function(n,t){function i(e){try{o(f.next(e))}catch(e){t(e)}}function a(e){try{o(f.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,a)}o((f=f.apply(e,c||[])).next())})},t=function(){var e=Object(s.useState)([]),t=l()(e,2),n=t[0],a=t[1],i=Object(s.useState)(null),e=l()(i,2),t=e[0],o=e[1],i=Object(s.useState)(),e=l()(i,2),i=e[0],c=e[1],e=Object(s.useCallback)(function(){return d(void 0,void 0,void 0,f.a.mark(function e(){var t,n,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getRechargeCoupon({},{model:u.a});case 3:n=e.sent,(n=n.res)&&null!==(t=null==n?void 0:n.couponInfo)&&void 0!==t&&t.length&&(i=n.couponInfo.filter(function(e){return e.expiredTime>Date.now()&&e.platform.includes("Gmo")})).length&&(o(i[0]),a(i)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),c(e.t0),p.a.error(e.t0,{description:"获取用户充值福利券失败",report:!0});case 12:case"end":return e.stop()}},e,null,[[0,8]])}))},[]);return{couponList:n,errorInfo:i,selectCoupon:t,setSelectCoupon:o,setCouponList:a,fetchCoupon:e}}}).call(this,i("W1C6").default)}}]);
//# sourceMappingURL=http://hw-source-map.mildom.jp/mildompc-web-server-sourcemap/static_sourcemap/page_room~page_topup_recharge_8a9fe0a6f40176541e90.js.map